<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>12 Bucles | Programación práctica con R</title>
  <meta name="description" content="Este libro le enseñará cómo programar en R, con ejemplos prácticos. Lo escribí para personas que no son programadores para proporcionar una introducción amigable al lenguaje R. Aprenderá a cargar datos, ensamblar y desensamblar objetos de datos, navegar por el sistema de entorno de R, escribir sus propias funciones y utilizar todas las herramientas de programación de R. A lo largo del libro, utilizará sus nuevas habilidades para resolver problemas prácticos de ciencia de datos." />
  <meta name="generator" content="bookdown 0.31 and GitBook 2.6.7" />

  <meta property="og:title" content="12 Bucles | Programación práctica con R" />
  <meta property="og:type" content="book" />
  <meta property="og:image" content="https://github.com/davidrsch/hopres/cover.png" />
  <meta property="og:description" content="Este libro le enseñará cómo programar en R, con ejemplos prácticos. Lo escribí para personas que no son programadores para proporcionar una introducción amigable al lenguaje R. Aprenderá a cargar datos, ensamblar y desensamblar objetos de datos, navegar por el sistema de entorno de R, escribir sus propias funciones y utilizar todas las herramientas de programación de R. A lo largo del libro, utilizará sus nuevas habilidades para resolver problemas prácticos de ciencia de datos." />
  <meta name="github-repo" content="davidrsch/hopres" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="12 Bucles | Programación práctica con R" />
  
  <meta name="twitter:description" content="Este libro le enseñará cómo programar en R, con ejemplos prácticos. Lo escribí para personas que no son programadores para proporcionar una introducción amigable al lenguaje R. Aprenderá a cargar datos, ensamblar y desensamblar objetos de datos, navegar por el sistema de entorno de R, escribir sus propias funciones y utilizar todas las herramientas de programación de R. A lo largo del libro, utilizará sus nuevas habilidades para resolver problemas prácticos de ciencia de datos." />
  <meta name="twitter:image" content="https://github.com/davidrsch/hopres/cover.png" />

<meta name="author" content="Garrett Grolemund" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="s3.html"/>
<link rel="next" href="speed.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="hopr.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><strong><a href="./">Programación práctica con R</a></strong></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Bienvenido</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#sobre-la-traducción"><i class="fa fa-check"></i>Sobre la traducción</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#sobre-la-versión-original-en-inglés"><i class="fa fa-check"></i>Sobre la versión original en inglés</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="prefacio.html"><a href="prefacio.html"><i class="fa fa-check"></i>Prefacio</a>
<ul>
<li class="chapter" data-level="" data-path="prefacio.html"><a href="prefacio.html#convenciones-usadas-en-este-libro"><i class="fa fa-check"></i>Convenciones Usadas en Este Libro</a></li>
<li class="chapter" data-level="" data-path="prefacio.html"><a href="prefacio.html#reconocimientos"><i class="fa fa-check"></i>Reconocimientos</a></li>
</ul></li>
<li class="part"><span><b>I Parte 1</b></span></li>
<li class="chapter" data-level="1" data-path="dice.html"><a href="dice.html"><i class="fa fa-check"></i><b>1</b> Proyecto 1: Dados Ponderados</a></li>
<li class="chapter" data-level="2" data-path="Básico.html"><a href="Básico.html"><i class="fa fa-check"></i><b>2</b> Lo Más Básico</a>
<ul>
<li class="chapter" data-level="2.1" data-path="Básico.html"><a href="Básico.html#la-interfaz-de-usuario-de-r"><i class="fa fa-check"></i><b>2.1</b> La Interfaz de Usuario de R</a></li>
<li class="chapter" data-level="2.2" data-path="Básico.html"><a href="Básico.html#objetos"><i class="fa fa-check"></i><b>2.2</b> Objetos</a></li>
<li class="chapter" data-level="2.3" data-path="Básico.html"><a href="Básico.html#funciones"><i class="fa fa-check"></i><b>2.3</b> Funciones</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="Básico.html"><a href="Básico.html#muestra-con-reemplazo"><i class="fa fa-check"></i><b>2.3.1</b> Muestra con reemplazo</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="Básico.html"><a href="Básico.html#Escribir-funciones"><i class="fa fa-check"></i><b>2.4</b> Escribiendo Sus Propias Funciones</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="Básico.html"><a href="Básico.html#el-constructor-de-funciones"><i class="fa fa-check"></i><b>2.4.1</b> El Constructor de Funciones</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="Básico.html"><a href="Básico.html#argumentos"><i class="fa fa-check"></i><b>2.5</b> Argumentos</a></li>
<li class="chapter" data-level="2.6" data-path="Básico.html"><a href="Básico.html#scripts"><i class="fa fa-check"></i><b>2.6</b> Scripts</a></li>
<li class="chapter" data-level="2.7" data-path="Básico.html"><a href="Básico.html#resumen"><i class="fa fa-check"></i><b>2.7</b> Resumen</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="packages.html"><a href="packages.html"><i class="fa fa-check"></i><b>3</b> Paquetes y páginas de ayuda</a>
<ul>
<li class="chapter" data-level="3.1" data-path="packages.html"><a href="packages.html#paquetes"><i class="fa fa-check"></i><b>3.1</b> Paquetes</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="packages.html"><a href="packages.html#install.packages"><i class="fa fa-check"></i><b>3.1.1</b> install.packages</a></li>
<li class="chapter" data-level="3.1.2" data-path="packages.html"><a href="packages.html#library"><i class="fa fa-check"></i><b>3.1.2</b> library</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="packages.html"><a href="packages.html#obteniendo-ayuda-con-las-páginas-de-ayuda"><i class="fa fa-check"></i><b>3.2</b> Obteniendo Ayuda con las Páginas de Ayuda</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="packages.html"><a href="packages.html#partes-de-una-página-de-ayuda"><i class="fa fa-check"></i><b>3.2.1</b> Partes de una Página de Ayuda</a></li>
<li class="chapter" data-level="3.2.2" data-path="packages.html"><a href="packages.html#obteniendo-más-ayuda"><i class="fa fa-check"></i><b>3.2.2</b> Obteniendo Más Ayuda</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="packages.html"><a href="packages.html#resumen-1"><i class="fa fa-check"></i><b>3.3</b> Resumen</a></li>
<li class="chapter" data-level="3.4" data-path="packages.html"><a href="packages.html#resumen-del-proyecto-1"><i class="fa fa-check"></i><b>3.4</b> Resumen del Proyecto 1</a></li>
</ul></li>
<li class="part"><span><b>II Parte 2</b></span></li>
<li class="chapter" data-level="4" data-path="cards.html"><a href="cards.html"><i class="fa fa-check"></i><b>4</b> Proyecto 2: Baraja de Cartas</a></li>
<li class="chapter" data-level="5" data-path="objects.html"><a href="objects.html"><i class="fa fa-check"></i><b>5</b> Objectos de R</a>
<ul>
<li class="chapter" data-level="5.1" data-path="objects.html"><a href="objects.html#vectores-atómicos"><i class="fa fa-check"></i><b>5.1</b> Vectores Atómicos</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="objects.html"><a href="objects.html#dobles"><i class="fa fa-check"></i><b>5.1.1</b> Dobles</a></li>
<li class="chapter" data-level="5.1.2" data-path="objects.html"><a href="objects.html#enteros"><i class="fa fa-check"></i><b>5.1.2</b> Enteros</a></li>
<li class="chapter" data-level="5.1.3" data-path="objects.html"><a href="objects.html#caracteres"><i class="fa fa-check"></i><b>5.1.3</b> Caracteres</a></li>
<li class="chapter" data-level="5.1.4" data-path="objects.html"><a href="objects.html#lógicos"><i class="fa fa-check"></i><b>5.1.4</b> Lógicos</a></li>
<li class="chapter" data-level="5.1.5" data-path="objects.html"><a href="objects.html#complejo-y-sin-procesar"><i class="fa fa-check"></i><b>5.1.5</b> Complejo y Sin Procesar</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="objects.html"><a href="objects.html#attributes"><i class="fa fa-check"></i><b>5.2</b> Atributos</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="objects.html"><a href="objects.html#names"><i class="fa fa-check"></i><b>5.2.1</b> Nombres</a></li>
<li class="chapter" data-level="5.2.2" data-path="objects.html"><a href="objects.html#dimensiones"><i class="fa fa-check"></i><b>5.2.2</b> Dimensiones</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="objects.html"><a href="objects.html#matrices"><i class="fa fa-check"></i><b>5.3</b> Matrices</a></li>
<li class="chapter" data-level="5.4" data-path="objects.html"><a href="objects.html#arreglos"><i class="fa fa-check"></i><b>5.4</b> Arreglos</a></li>
<li class="chapter" data-level="5.5" data-path="objects.html"><a href="objects.html#clases"><i class="fa fa-check"></i><b>5.5</b> Clases</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="objects.html"><a href="objects.html#fechas-y-horarios"><i class="fa fa-check"></i><b>5.5.1</b> Fechas y Horarios</a></li>
<li class="chapter" data-level="5.5.2" data-path="objects.html"><a href="objects.html#factores"><i class="fa fa-check"></i><b>5.5.2</b> Factores</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="objects.html"><a href="objects.html#coerción"><i class="fa fa-check"></i><b>5.6</b> Coerción</a></li>
<li class="chapter" data-level="5.7" data-path="objects.html"><a href="objects.html#listas"><i class="fa fa-check"></i><b>5.7</b> Listas</a></li>
<li class="chapter" data-level="5.8" data-path="objects.html"><a href="objects.html#data-frames"><i class="fa fa-check"></i><b>5.8</b> Data Frames</a></li>
<li class="chapter" data-level="5.9" data-path="objects.html"><a href="objects.html#loading"><i class="fa fa-check"></i><b>5.9</b> Cargar Datos</a></li>
<li class="chapter" data-level="5.10" data-path="objects.html"><a href="objects.html#guardar-datos"><i class="fa fa-check"></i><b>5.10</b> Guardar Datos</a></li>
<li class="chapter" data-level="5.11" data-path="objects.html"><a href="objects.html#resumen-2"><i class="fa fa-check"></i><b>5.11</b> Resumen</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="notation.html"><a href="notation.html"><i class="fa fa-check"></i><b>6</b> Notación de R</a>
<ul>
<li class="chapter" data-level="6.1" data-path="notation.html"><a href="notation.html#selección-de-valores"><i class="fa fa-check"></i><b>6.1</b> Selección de Valores</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="notation.html"><a href="notation.html#números-enteros-positivos"><i class="fa fa-check"></i><b>6.1.1</b> Números Enteros Positivos</a></li>
<li class="chapter" data-level="6.1.2" data-path="notation.html"><a href="notation.html#números-enteros-negativos"><i class="fa fa-check"></i><b>6.1.2</b> Números Enteros Negativos</a></li>
<li class="chapter" data-level="6.1.3" data-path="notation.html"><a href="notation.html#cero"><i class="fa fa-check"></i><b>6.1.3</b> Cero</a></li>
<li class="chapter" data-level="6.1.4" data-path="notation.html"><a href="notation.html#espacios-en-blanco"><i class="fa fa-check"></i><b>6.1.4</b> Espacios en Blanco</a></li>
<li class="chapter" data-level="6.1.5" data-path="notation.html"><a href="notation.html#logic"><i class="fa fa-check"></i><b>6.1.5</b> Valores Lógicos</a></li>
<li class="chapter" data-level="6.1.6" data-path="notation.html"><a href="notation.html#nombres"><i class="fa fa-check"></i><b>6.1.6</b> Nombres</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="notation.html"><a href="notation.html#repartir-una-carta"><i class="fa fa-check"></i><b>6.2</b> Repartir una Carta</a></li>
<li class="chapter" data-level="6.3" data-path="notation.html"><a href="notation.html#barajar-el-mazo"><i class="fa fa-check"></i><b>6.3</b> Barajar el Mazo</a></li>
<li class="chapter" data-level="6.4" data-path="notation.html"><a href="notation.html#signos-de-dólar-y-corchetes-dobles"><i class="fa fa-check"></i><b>6.4</b> Signos de Dólar y Corchetes Dobles</a></li>
<li class="chapter" data-level="6.5" data-path="notation.html"><a href="notation.html#resumen-3"><i class="fa fa-check"></i><b>6.5</b> Resumen</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="modify.html"><a href="modify.html"><i class="fa fa-check"></i><b>7</b> Modificación de Valores</a>
<ul>
<li class="chapter" data-level="7.0.1" data-path="modify.html"><a href="modify.html#cambio-de-valores-en-el-lugar"><i class="fa fa-check"></i><b>7.0.1</b> Cambio de Valores en el Lugar</a></li>
<li class="chapter" data-level="7.0.2" data-path="modify.html"><a href="modify.html#subconjunto-lógico"><i class="fa fa-check"></i><b>7.0.2</b> Subconjunto Lógico</a></li>
<li class="chapter" data-level="7.0.3" data-path="modify.html"><a href="modify.html#missing"><i class="fa fa-check"></i><b>7.0.3</b> Información Faltante</a></li>
<li class="chapter" data-level="7.0.4" data-path="modify.html"><a href="modify.html#resumen-4"><i class="fa fa-check"></i><b>7.0.4</b> Resumen</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="environment.html"><a href="environment.html"><i class="fa fa-check"></i><b>8</b> Entornos</a>
<ul>
<li class="chapter" data-level="8.1" data-path="environment.html"><a href="environment.html#entornos"><i class="fa fa-check"></i><b>8.1</b> Entornos</a></li>
<li class="chapter" data-level="8.2" data-path="environment.html"><a href="environment.html#trabajar-con-entornos"><i class="fa fa-check"></i><b>8.2</b> Trabajar con Entornos</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="environment.html"><a href="environment.html#el-entorno-activo"><i class="fa fa-check"></i><b>8.2.1</b> El Entorno Activo</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="environment.html"><a href="environment.html#reglas-de-alcance"><i class="fa fa-check"></i><b>8.3</b> Reglas de Alcance</a></li>
<li class="chapter" data-level="8.4" data-path="environment.html"><a href="environment.html#asignación"><i class="fa fa-check"></i><b>8.4</b> Asignación</a></li>
<li class="chapter" data-level="8.5" data-path="environment.html"><a href="environment.html#evaluación"><i class="fa fa-check"></i><b>8.5</b> Evaluación</a></li>
<li class="chapter" data-level="8.6" data-path="environment.html"><a href="environment.html#cierres"><i class="fa fa-check"></i><b>8.6</b> Cierres</a></li>
<li class="chapter" data-level="8.7" data-path="environment.html"><a href="environment.html#resumen-5"><i class="fa fa-check"></i><b>8.7</b> Resumen</a></li>
<li class="chapter" data-level="8.8" data-path="environment.html"><a href="environment.html#resumen-del-proyecto-2"><i class="fa fa-check"></i><b>8.8</b> Resumen del Proyecto 2</a></li>
</ul></li>
<li class="part"><span><b>III Parte 3</b></span></li>
<li class="chapter" data-level="9" data-path="slots.html"><a href="slots.html"><i class="fa fa-check"></i><b>9</b> Proyecto 3: Máquina Tragamonedas</a></li>
<li class="chapter" data-level="10" data-path="programs.html"><a href="programs.html"><i class="fa fa-check"></i><b>10</b> Programas</a>
<ul>
<li class="chapter" data-level="10.1" data-path="programs.html"><a href="programs.html#estrategia"><i class="fa fa-check"></i><b>10.1</b> Estrategia</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="programs.html"><a href="programs.html#pasos-secuenciales"><i class="fa fa-check"></i><b>10.1.1</b> Pasos Secuenciales</a></li>
<li class="chapter" data-level="10.1.2" data-path="programs.html"><a href="programs.html#casos-paralelos"><i class="fa fa-check"></i><b>10.1.2</b> Casos Paralelos</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="programs.html"><a href="programs.html#declaraciones-if"><i class="fa fa-check"></i><b>10.2</b> Declaraciones if</a></li>
<li class="chapter" data-level="10.3" data-path="programs.html"><a href="programs.html#declaraciones-else"><i class="fa fa-check"></i><b>10.3</b> Declaraciones else</a></li>
<li class="chapter" data-level="10.4" data-path="programs.html"><a href="programs.html#tablas-de-búsqueda"><i class="fa fa-check"></i><b>10.4</b> Tablas de Búsqueda</a></li>
<li class="chapter" data-level="10.5" data-path="programs.html"><a href="programs.html#comentarios-de-código"><i class="fa fa-check"></i><b>10.5</b> Comentarios de Código</a></li>
<li class="chapter" data-level="10.6" data-path="programs.html"><a href="programs.html#resumen-6"><i class="fa fa-check"></i><b>10.6</b> Resumen</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="s3.html"><a href="s3.html"><i class="fa fa-check"></i><b>11</b> S3</a>
<ul>
<li class="chapter" data-level="11.1" data-path="s3.html"><a href="s3.html#el-sistema-s3"><i class="fa fa-check"></i><b>11.1</b> El Sistema S3</a></li>
<li class="chapter" data-level="11.2" data-path="s3.html"><a href="s3.html#atributos"><i class="fa fa-check"></i><b>11.2</b> Atributos</a></li>
<li class="chapter" data-level="11.3" data-path="s3.html"><a href="s3.html#funciones-genéricas"><i class="fa fa-check"></i><b>11.3</b> Funciones Genéricas</a></li>
<li class="chapter" data-level="11.4" data-path="s3.html"><a href="s3.html#métodos"><i class="fa fa-check"></i><b>11.4</b> Métodos</a>
<ul>
<li class="chapter" data-level="11.4.1" data-path="s3.html"><a href="s3.html#selección-de-método"><i class="fa fa-check"></i><b>11.4.1</b> Selección de Método</a></li>
</ul></li>
<li class="chapter" data-level="11.5" data-path="s3.html"><a href="s3.html#clases-1"><i class="fa fa-check"></i><b>11.5</b> Clases</a></li>
<li class="chapter" data-level="11.6" data-path="s3.html"><a href="s3.html#s3-y-depuración"><i class="fa fa-check"></i><b>11.6</b> S3 y Depuración</a></li>
<li class="chapter" data-level="11.7" data-path="s3.html"><a href="s3.html#s4-y-r5"><i class="fa fa-check"></i><b>11.7</b> S4 y R5</a></li>
<li class="chapter" data-level="11.8" data-path="s3.html"><a href="s3.html#resumen-7"><i class="fa fa-check"></i><b>11.8</b> Resumen</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="loops.html"><a href="loops.html"><i class="fa fa-check"></i><b>12</b> Bucles</a>
<ul>
<li class="chapter" data-level="12.1" data-path="loops.html"><a href="loops.html#valores-esperados"><i class="fa fa-check"></i><b>12.1</b> Valores Esperados</a></li>
<li class="chapter" data-level="12.2" data-path="loops.html"><a href="loops.html#expand.grid"><i class="fa fa-check"></i><b>12.2</b> expand.grid</a></li>
<li class="chapter" data-level="12.3" data-path="loops.html"><a href="loops.html#bucles-for"><i class="fa fa-check"></i><b>12.3</b> Bucles for</a></li>
<li class="chapter" data-level="12.4" data-path="loops.html"><a href="loops.html#bucles-while"><i class="fa fa-check"></i><b>12.4</b> Bucles while</a></li>
<li class="chapter" data-level="12.5" data-path="loops.html"><a href="loops.html#bucles-repeat"><i class="fa fa-check"></i><b>12.5</b> Bucles repeat</a></li>
<li class="chapter" data-level="12.6" data-path="loops.html"><a href="loops.html#resumen-8"><i class="fa fa-check"></i><b>12.6</b> Resumen</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="speed.html"><a href="speed.html"><i class="fa fa-check"></i><b>13</b> Velocidad</a>
<ul>
<li class="chapter" data-level="13.1" data-path="speed.html"><a href="speed.html#código-vectorizado"><i class="fa fa-check"></i><b>13.1</b> Código Vectorizado</a></li>
<li class="chapter" data-level="13.2" data-path="speed.html"><a href="speed.html#cómo-escribir-código-vectorizado"><i class="fa fa-check"></i><b>13.2</b> Cómo Escribir Código Vectorizado</a></li>
<li class="chapter" data-level="13.3" data-path="speed.html"><a href="speed.html#cómo-escribir-bucles-for-rápidos-en-r"><i class="fa fa-check"></i><b>13.3</b> Cómo Escribir Bucles for Rápidos en R</a></li>
<li class="chapter" data-level="13.4" data-path="speed.html"><a href="speed.html#código-vectorizado-en-la-práctica"><i class="fa fa-check"></i><b>13.4</b> Código Vectorizado en la Práctica</a>
<ul>
<li class="chapter" data-level="13.4.1" data-path="speed.html"><a href="speed.html#bucles-vs-código-vectorizado"><i class="fa fa-check"></i><b>13.4.1</b> Bucles vs Código Vectorizado</a></li>
</ul></li>
<li class="chapter" data-level="13.5" data-path="speed.html"><a href="speed.html#resumen-9"><i class="fa fa-check"></i><b>13.5</b> Resumen</a></li>
<li class="chapter" data-level="13.6" data-path="speed.html"><a href="speed.html#resumen-del-proyecto-3"><i class="fa fa-check"></i><b>13.6</b> Resumen del Proyecto 3</a></li>
</ul></li>
<li class="appendix"><span><b>Apéndice</b></span></li>
<li class="chapter" data-level="A" data-path="starting.html"><a href="starting.html"><i class="fa fa-check"></i><b>A</b> Instalación de R y RStudio</a>
<ul>
<li class="chapter" data-level="A.1" data-path="starting.html"><a href="starting.html#cómo-descargar-e-instalar-r"><i class="fa fa-check"></i><b>A.1</b> Cómo descargar e instalar R</a>
<ul>
<li class="chapter" data-level="A.1.1" data-path="starting.html"><a href="starting.html#windows"><i class="fa fa-check"></i><b>A.1.1</b> Windows</a></li>
<li class="chapter" data-level="A.1.2" data-path="starting.html"><a href="starting.html#mac"><i class="fa fa-check"></i><b>A.1.2</b> Mac</a></li>
<li class="chapter" data-level="A.1.3" data-path="starting.html"><a href="starting.html#linux"><i class="fa fa-check"></i><b>A.1.3</b> Linux</a></li>
</ul></li>
<li class="chapter" data-level="A.2" data-path="starting.html"><a href="starting.html#usando-r"><i class="fa fa-check"></i><b>A.2</b> Usando R</a></li>
<li class="chapter" data-level="A.3" data-path="starting.html"><a href="starting.html#rstudio"><i class="fa fa-check"></i><b>A.3</b> RStudio</a></li>
<li class="chapter" data-level="A.4" data-path="starting.html"><a href="starting.html#abriendo-r"><i class="fa fa-check"></i><b>A.4</b> Abriendo R</a></li>
</ul></li>
<li class="chapter" data-level="B" data-path="packages2.html"><a href="packages2.html"><i class="fa fa-check"></i><b>B</b> Paquetes de R</a>
<ul>
<li class="chapter" data-level="B.1" data-path="packages2.html"><a href="packages2.html#instalando-paquetes"><i class="fa fa-check"></i><b>B.1</b> Instalando Paquetes</a></li>
<li class="chapter" data-level="B.2" data-path="packages2.html"><a href="packages2.html#cargando-paquetes"><i class="fa fa-check"></i><b>B.2</b> Cargando Paquetes</a></li>
</ul></li>
<li class="chapter" data-level="C" data-path="updating.html"><a href="updating.html"><i class="fa fa-check"></i><b>C</b> Actualizando R y sus Paquetes</a>
<ul>
<li class="chapter" data-level="C.1" data-path="updating.html"><a href="updating.html#paquetes-de-r"><i class="fa fa-check"></i><b>C.1</b> Paquetes de R</a></li>
</ul></li>
<li class="chapter" data-level="D" data-path="dataio.html"><a href="dataio.html"><i class="fa fa-check"></i><b>D</b> Cargar y Guardar Datos en R</a>
<ul>
<li class="chapter" data-level="D.1" data-path="dataio.html"><a href="dataio.html#conjuntos-de-datos-en-r-base"><i class="fa fa-check"></i><b>D.1</b> Conjuntos de Datos en R Base</a></li>
<li class="chapter" data-level="D.2" data-path="dataio.html"><a href="dataio.html#directorio-de-trabajo"><i class="fa fa-check"></i><b>D.2</b> Directorio de Trabajo</a></li>
<li class="chapter" data-level="D.3" data-path="dataio.html"><a href="dataio.html#archivos-de-texto-sin-formato"><i class="fa fa-check"></i><b>D.3</b> Archivos de Texto Sin Formato</a>
<ul>
<li class="chapter" data-level="D.3.1" data-path="dataio.html"><a href="dataio.html#read.table"><i class="fa fa-check"></i><b>D.3.1</b> read.table</a></li>
<li class="chapter" data-level="D.3.2" data-path="dataio.html"><a href="dataio.html#la-familia-read"><i class="fa fa-check"></i><b>D.3.2</b> La Familia read</a></li>
<li class="chapter" data-level="D.3.3" data-path="dataio.html"><a href="dataio.html#read.fwf"><i class="fa fa-check"></i><b>D.3.3</b> read.fwf</a></li>
<li class="chapter" data-level="D.3.4" data-path="dataio.html"><a href="dataio.html#links-html"><i class="fa fa-check"></i><b>D.3.4</b> Links HTML</a></li>
<li class="chapter" data-level="D.3.5" data-path="dataio.html"><a href="dataio.html#guardar-archivos-de-texto-sin-formato"><i class="fa fa-check"></i><b>D.3.5</b> Guardar Archivos de Texto Sin Formato</a></li>
<li class="chapter" data-level="D.3.6" data-path="dataio.html"><a href="dataio.html#comprimiendo-archivos"><i class="fa fa-check"></i><b>D.3.6</b> Comprimiendo Archivos</a></li>
</ul></li>
<li class="chapter" data-level="D.4" data-path="dataio.html"><a href="dataio.html#archivos-de-r"><i class="fa fa-check"></i><b>D.4</b> Archivos de R</a>
<ul>
<li class="chapter" data-level="D.4.1" data-path="dataio.html"><a href="dataio.html#guardar-archivos-de-r"><i class="fa fa-check"></i><b>D.4.1</b> Guardar archivos de R</a></li>
</ul></li>
<li class="chapter" data-level="D.5" data-path="dataio.html"><a href="dataio.html#hojas-de-cálculo-de-excel"><i class="fa fa-check"></i><b>D.5</b> Hojas de Cálculo de Excel</a>
<ul>
<li class="chapter" data-level="D.5.1" data-path="dataio.html"><a href="dataio.html#exportar-desde-excel"><i class="fa fa-check"></i><b>D.5.1</b> Exportar desde Excel</a></li>
<li class="chapter" data-level="D.5.2" data-path="dataio.html"><a href="dataio.html#copiar-y-pegar"><i class="fa fa-check"></i><b>D.5.2</b> Copiar y pegar</a></li>
<li class="chapter" data-level="D.5.3" data-path="dataio.html"><a href="dataio.html#xlconnect"><i class="fa fa-check"></i><b>D.5.3</b> XLConnect</a></li>
<li class="chapter" data-level="D.5.4" data-path="dataio.html"><a href="dataio.html#lectura-de-hojas-de-cálculo"><i class="fa fa-check"></i><b>D.5.4</b> Lectura de Hojas de Cálculo</a></li>
<li class="chapter" data-level="D.5.5" data-path="dataio.html"><a href="dataio.html#escribir-hojas-de-cálculo"><i class="fa fa-check"></i><b>D.5.5</b> Escribir Hojas de Cálculo</a></li>
</ul></li>
<li class="chapter" data-level="D.6" data-path="dataio.html"><a href="dataio.html#cargar-archivos-desde-otros-programas"><i class="fa fa-check"></i><b>D.6</b> Cargar Archivos desde Otros Programas</a>
<ul>
<li class="chapter" data-level="D.6.1" data-path="dataio.html"><a href="dataio.html#conexión-a-bases-de-datos"><i class="fa fa-check"></i><b>D.6.1</b> Conexión a bases de datos</a></li>
</ul></li>
<li class="chapter" data-level="D.7" data-path="dataio.html"><a href="dataio.html#actualización"><i class="fa fa-check"></i><b>D.7</b> Actualización</a></li>
</ul></li>
<li class="chapter" data-level="E" data-path="debug.html"><a href="debug.html"><i class="fa fa-check"></i><b>E</b> Depuración de Código de R</a>
<ul>
<li class="chapter" data-level="E.1" data-path="debug.html"><a href="debug.html#traceback"><i class="fa fa-check"></i><b>E.1</b> traceback</a></li>
<li class="chapter" data-level="E.2" data-path="debug.html"><a href="debug.html#browser"><i class="fa fa-check"></i><b>E.2</b> browser</a></li>
<li class="chapter" data-level="E.3" data-path="debug.html"><a href="debug.html#puntos-de-ruptura"><i class="fa fa-check"></i><b>E.3</b> Puntos de Ruptura</a></li>
<li class="chapter" data-level="E.4" data-path="debug.html"><a href="debug.html#debug-1"><i class="fa fa-check"></i><b>E.4</b> debug</a></li>
<li class="chapter" data-level="E.5" data-path="debug.html"><a href="debug.html#trace"><i class="fa fa-check"></i><b>E.5</b> trace</a></li>
<li class="chapter" data-level="E.6" data-path="debug.html"><a href="debug.html#recover"><i class="fa fa-check"></i><b>E.6</b> recover</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Programación práctica con R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="loops" class="section level1 hasAnchor" number="12">
<h1><span class="header-section-number">12</span> Bucles<a href="loops.html#loops" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Los bucles son el método de R para repetir una tarea, lo que los convierte en una herramienta útil para programar simulaciones. Este capítulo le enseñará cómo usar las herramientas de bucle de R.</p>
<p>Usemos la función <code>puntuacion</code> para resolver un problema del mundo real.</p>
<p>Su máquina tragamonedas está modelada a partir de máquinas reales que fueron acusadas de fraude. Las máquinas parecían pagar 40 centavos por dólar, pero el fabricante afirmó que pagaban 92 centavos por dólar. Puede calcular la tasa de pago exacta de su máquina con el programa <code>puntuacion</code>. La tasa de pago será el valor esperado del premio de la máquina tragamonedas.</p>
<div id="valores-esperados" class="section level2 hasAnchor" number="12.1">
<h2><span class="header-section-number">12.1</span> Valores Esperados<a href="loops.html#valores-esperados" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>El valor esperado de un evento aleatorio es un tipo de promedio ponderado; es la suma de cada resultado posible del evento, ponderada por la probabilidad de que ocurra cada resultado:</p>
<p><span class="math display">\[
E(x) = \sum_{i = 1}^{n}\left( x_{i} \cdot P(x_{i}) \right)
\]</span></p>
<p>Puede pensar en el valor esperado como el premio promedio que observaría si jugara en la máquina tragamonedas una cantidad infinita de veces. Usemos la fórmula para calcular algunos valores esperados simples. Luego aplicaremos la fórmula a su máquina tragamonedas.</p>
<p>¿Recuerdas el <code>dado</code> que creaste en <a href="dice.html#dice">Proyecto 1: Dados Ponderados</a>?</p>
<div class="sourceCode" id="cb344"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb344-1"><a href="loops.html#cb344-1" aria-hidden="true" tabindex="-1"></a>dado <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>)</span></code></pre></div>
<p>Cada vez que lanzas el dado, devuelve un valor seleccionado al azar (de uno a seis). Puedes encontrar el valor esperado de tirar el dado con la fórmula:</p>
<p><span class="math display">\[
E(\text{dado}) = \sum_{i = 1}^{n}\left( \text{dado}_{i} \cdot P(\text{dado}_{i}) \right)
\]</span></p>
<p>Los <span class="math inline">\(\text{dado}_{i}\)</span> son los posibles resultados de lanzar el dado: 1, 2, 3, 4, 5 y 6; y los <span class="math inline">\(P(\text{dado}_{i})\)</span> son las probabilidades asociadas con cada uno de los resultados. Si su dado es justo, cada resultado ocurrirá con la misma probabilidad: 1/6. Entonces nuestra ecuación se simplifica a:</p>
<p><span class="math display">\[
\begin{array}{rl}
E(\text{dado}) &amp; = \sum_{i = 1}^{n}\left( \text{dado}_{i} \cdot P(\text{dado}_{i}) \right)\\
&amp; = 1 \cdot \frac{1}{6} +  2 \cdot \frac{1}{6} + 3 \cdot \frac{1}{6} + 4 \cdot \frac{1}{6} + 5 \cdot \frac{1}{6} + 6 \cdot \frac{1}{6}\\
&amp; = 3.5\\
\end{array}
\]</span></p>
<p>Por lo tanto, el valor esperado de lanzar un dado justo es 3,5. Puede notar que este es también el valor promedio del dado. El valor esperado será igual al promedio si todos los resultados tienen la misma probabilidad de ocurrir.</p>
<p>Pero, ¿y si cada resultado tiene una probabilidad diferente de ocurrir? Por ejemplo, manipulamos nuestros dados en <a href="packages.html#packages">Paquetes y Páginas de Ayuda</a> para que cada dado arrojara 1, 2, 3, 4 y 5 con una probabilidad de 1/8 y 6 con una probabilidad de 3/8. Puede usar la misma fórmula para calcular el valor esperado en estas condiciones:</p>
<p><span class="math display">\[
\begin{array}{rl}
  E(dado) &amp; = 1 \cdot \frac{1}{8} +  2 \cdot \frac{1}{8} + 3 \cdot \frac{1}{8} + 4 \cdot \frac{1}{8} + 5 \cdot \frac{1}{8} + 6 \cdot \frac{3}{8}\\
  &amp; = 4.125\\
  \end{array}
\]</span></p>
<p>Por lo tanto, el valor esperado de un dado manipulado no es igual al valor promedio de un dado no manipulado. Si lanzaste un dado manipulado una cantidad infinita de veces, el resultado promedio sería 4.125, que es más alto de lo que esperarías de un dado justo.</p>
<p>Observe que hicimos las mismas tres cosas para calcular estos dos valores esperados. Tenemos:</p>
<ul>
<li>Enumeró todos los resultados posibles</li>
<li>Determinado el <em>valor</em> de cada resultado (aquí solo el valor del dado)</li>
<li>Calculó la probabilidad de que ocurriera cada resultado</li>
</ul>
<p>Entonces, el valor esperado era solo la suma de los valores en el paso 2 multiplicada por las probabilidades en el paso 3.</p>
<p>Puede utilizar estos pasos para calcular valores esperados más sofisticados. Por ejemplo, podría calcular el valor esperado de lanzar un par de dados ponderados. Hagamos esto paso a paso.</p>
<p>Primero, enumere todos los resultados posibles. Pueden aparecer un total de 36 resultados diferentes cuando lanzas dos dados. Por ejemplo, puede sacar (1, 1), que anota uno en el primer dado y uno en el segundo dado. O bien, puede tirar (1, 2), uno en el primer dado y dos en el segundo. Y así. Enumerar estas combinaciones puede ser tedioso, pero R tiene una función que puede ayudar.</p>
</div>
<div id="expand.grid" class="section level2 hasAnchor" number="12.2">
<h2><span class="header-section-number">12.2</span> expand.grid<a href="loops.html#expand.grid" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>La función <code>expand.grid</code> en R proporciona una forma rápida de escribir cada combinación de los elementos en <em>n</em> vectores. Por ejemplo, puede hacer una lista de todas las combinaciones de dos dados. Para hacerlo, ejecuta <code>expand.grid</code> en dos copias de <code>dado</code>:</p>
<div class="sourceCode" id="cb345"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb345-1"><a href="loops.html#cb345-1" aria-hidden="true" tabindex="-1"></a>tiradas <span class="ot">&lt;-</span> <span class="fu">expand.grid</span>(dado, dado)</span></code></pre></div>
<p><code>expand.grid</code> devolverá un data frame que contiene todas las formas de emparejar un elemento del primer vector <code>dado</code> con un elemento del segundo vector <code>dado</code>. Esto capturará las 36 posibles combinaciones de valores:</p>
<div class="sourceCode" id="cb346"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb346-1"><a href="loops.html#cb346-1" aria-hidden="true" tabindex="-1"></a>tiradas</span>
<span id="cb346-2"><a href="loops.html#cb346-2" aria-hidden="true" tabindex="-1"></a><span class="do">##    Var1 Var2</span></span>
<span id="cb346-3"><a href="loops.html#cb346-3" aria-hidden="true" tabindex="-1"></a><span class="do">## 1     1    1</span></span>
<span id="cb346-4"><a href="loops.html#cb346-4" aria-hidden="true" tabindex="-1"></a><span class="do">## 2     2    1</span></span>
<span id="cb346-5"><a href="loops.html#cb346-5" aria-hidden="true" tabindex="-1"></a><span class="do">## 3     3    1</span></span>
<span id="cb346-6"><a href="loops.html#cb346-6" aria-hidden="true" tabindex="-1"></a><span class="do">## ...</span></span>
<span id="cb346-7"><a href="loops.html#cb346-7" aria-hidden="true" tabindex="-1"></a><span class="do">## 34    4    6</span></span>
<span id="cb346-8"><a href="loops.html#cb346-8" aria-hidden="true" tabindex="-1"></a><span class="do">## 35    5    6</span></span>
<span id="cb346-9"><a href="loops.html#cb346-9" aria-hidden="true" tabindex="-1"></a><span class="do">## 36    6    6</span></span></code></pre></div>
<p>Puede usar <code>expand.grid</code> con más de dos vectores si lo desea. Por ejemplo, podría enumerar cada combinación de tirar tres dados con <code>expand.grid(dado, dado, dado)</code> y cada combinación de tirar cuatro dados con <code>expand.grid(dado, dado, dado, dado)</code>, y así en. <code>expand.grid</code> siempre devolverá un data frame que contiene cada combinación posible de <em>n</em> elementos de los <em>n</em> vectores. Cada combinación contendrá exactamente un elemento de cada vector.</p>
<p>Puedes determinar el valor de cada tirada una vez que hayas hecho tu lista de resultados. Esta será la suma de los dos dados, que puedes calcular usando la ejecución por elementos de R:</p>
<div class="sourceCode" id="cb347"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb347-1"><a href="loops.html#cb347-1" aria-hidden="true" tabindex="-1"></a>tiradas<span class="sc">$</span>valor <span class="ot">&lt;-</span> tiradas<span class="sc">$</span>Var1 <span class="sc">+</span> tiradas<span class="sc">$</span>Var2</span>
<span id="cb347-2"><a href="loops.html#cb347-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(tiradas, <span class="dv">3</span>)</span>
<span id="cb347-3"><a href="loops.html#cb347-3" aria-hidden="true" tabindex="-1"></a><span class="do">## Var1 Var2 valor</span></span>
<span id="cb347-4"><a href="loops.html#cb347-4" aria-hidden="true" tabindex="-1"></a><span class="do">##    1    1     2</span></span>
<span id="cb347-5"><a href="loops.html#cb347-5" aria-hidden="true" tabindex="-1"></a><span class="do">##    2    1     3</span></span>
<span id="cb347-6"><a href="loops.html#cb347-6" aria-hidden="true" tabindex="-1"></a><span class="do">##    3    1     4</span></span></code></pre></div>
<p>R emparejará los elementos en cada vector antes de agregarlos. Como resultado, cada elemento de <code>valor</code> se referirá a los elementos de <code>Var1</code> y <code>Var2</code> que aparecen en la misma fila.</p>
<p>A continuación, debes determinar la probabilidad de que aparezca cada combinación. Puedes calcular esto con una regla básica de probabilidad:</p>
<p><em>La probabilidad de que</em> n <em>eventos aleatorios independientes ocurran todos es igual al producto de las probabilidades de que ocurra cada evento aleatorio</em>.</p>
<p>O más sucintamente:</p>
<p><span class="math display">\[
P(A \&amp; B \&amp; C \&amp; ...) = P(A) \cdot P(B) \cdot P(C) \cdot ...
\]</span></p>
<p>Entonces, la probabilidad de que saquemos (1, 1) será igual a la probabilidad de que saquemos un uno en el primer dado, 1/8, multiplicada por la probabilidad de que saquemos un uno en el segundo dado, 1/8:</p>
<p><span class="math display">\[
\begin{array}{rl}
P(1 \&amp; 1) &amp; = P(1) \cdot P(1) \\
&amp; = \frac{1}{8} \cdot \frac{1}{8}\\
&amp; = \frac{1}{64}
\end{array}
\]</span></p>
<p>Y la probabilidad de que saquemos un (1, 2) será:</p>
<p><span class="math display">\[
\begin{array}{rl}
P(1 \&amp; 2) &amp; = P(1) \cdot P(2) \\
&amp; = \frac{1}{8} \cdot \frac{1}{8}\\
&amp; = \frac{1}{64}
\end{array}
\]</span></p>
<p>Y así sucesivamente.</p>
<p>Permítanme sugerir un proceso de tres pasos para calcular estas probabilidades en R. Primero, podemos buscar las probabilidades de rodar los valores en <code>Var1</code>. Haremos esto con la tabla de búsqueda que sigue:</p>
<div class="sourceCode" id="cb348"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb348-1"><a href="loops.html#cb348-1" aria-hidden="true" tabindex="-1"></a>prob <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;1&quot;</span> <span class="ot">=</span> <span class="dv">1</span><span class="sc">/</span><span class="dv">8</span>, <span class="st">&quot;2&quot;</span> <span class="ot">=</span> <span class="dv">1</span><span class="sc">/</span><span class="dv">8</span>, <span class="st">&quot;3&quot;</span> <span class="ot">=</span> <span class="dv">1</span><span class="sc">/</span><span class="dv">8</span>, <span class="st">&quot;4&quot;</span> <span class="ot">=</span> <span class="dv">1</span><span class="sc">/</span><span class="dv">8</span>, <span class="st">&quot;5&quot;</span> <span class="ot">=</span> <span class="dv">1</span><span class="sc">/</span><span class="dv">8</span>, <span class="st">&quot;6&quot;</span> <span class="ot">=</span> <span class="dv">3</span><span class="sc">/</span><span class="dv">8</span>)</span>
<span id="cb348-2"><a href="loops.html#cb348-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-3"><a href="loops.html#cb348-3" aria-hidden="true" tabindex="-1"></a>prob</span>
<span id="cb348-4"><a href="loops.html#cb348-4" aria-hidden="true" tabindex="-1"></a><span class="do">##     1     2     3     4     5     6 </span></span>
<span id="cb348-5"><a href="loops.html#cb348-5" aria-hidden="true" tabindex="-1"></a><span class="do">## 0.125 0.125 0.125 0.125 0.125 0.375 </span></span></code></pre></div>
<p>Si crea un subconjunto de esta tabla con <code>tiradas$Var1</code>, obtendrá un vector de probabilidades perfectamente relacionado con los valores de <code>Var1</code>:</p>
<div class="sourceCode" id="cb349"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb349-1"><a href="loops.html#cb349-1" aria-hidden="true" tabindex="-1"></a>tiradas<span class="sc">$</span>Var1</span>
<span id="cb349-2"><a href="loops.html#cb349-2" aria-hidden="true" tabindex="-1"></a><span class="do">## 1 2 3 4 5 6 1 2 3 4 5 6 1 2 3 4 5 6 1 2 3 4 5 6 1 2 3 4 5 6 1 2 3 4 5 6</span></span>
<span id="cb349-3"><a href="loops.html#cb349-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb349-4"><a href="loops.html#cb349-4" aria-hidden="true" tabindex="-1"></a>prob[tiradas<span class="sc">$</span>Var1]</span>
<span id="cb349-5"><a href="loops.html#cb349-5" aria-hidden="true" tabindex="-1"></a><span class="do">##     1     2     3     4     5     6     1     2     3     4     5     6 </span></span>
<span id="cb349-6"><a href="loops.html#cb349-6" aria-hidden="true" tabindex="-1"></a><span class="do">## 0.125 0.125 0.125 0.125 0.125 0.375 0.125 0.125 0.125 0.125 0.125 0.375 </span></span>
<span id="cb349-7"><a href="loops.html#cb349-7" aria-hidden="true" tabindex="-1"></a><span class="do">##     1     2     3     4     5     6     1     2     3     4     5     6 </span></span>
<span id="cb349-8"><a href="loops.html#cb349-8" aria-hidden="true" tabindex="-1"></a><span class="do">## 0.125 0.125 0.125 0.125 0.125 0.375 0.125 0.125 0.125 0.125 0.125 0.375 </span></span>
<span id="cb349-9"><a href="loops.html#cb349-9" aria-hidden="true" tabindex="-1"></a><span class="do">##     1     2     3     4     5     6     1     2     3     4     5     6 </span></span>
<span id="cb349-10"><a href="loops.html#cb349-10" aria-hidden="true" tabindex="-1"></a><span class="do">## 0.125 0.125 0.125 0.125 0.125 0.375 0.125 0.125 0.125 0.125 0.125 0.375 </span></span>
<span id="cb349-11"><a href="loops.html#cb349-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb349-12"><a href="loops.html#cb349-12" aria-hidden="true" tabindex="-1"></a>tiradas<span class="sc">$</span>prob1 <span class="ot">&lt;-</span> prob[tiradas<span class="sc">$</span>Var1]</span>
<span id="cb349-13"><a href="loops.html#cb349-13" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(tiradas, <span class="dv">3</span>)</span>
<span id="cb349-14"><a href="loops.html#cb349-14" aria-hidden="true" tabindex="-1"></a><span class="do">## Var1 Var2 valor prob1</span></span>
<span id="cb349-15"><a href="loops.html#cb349-15" aria-hidden="true" tabindex="-1"></a><span class="do">##    1    1     2 0.125</span></span>
<span id="cb349-16"><a href="loops.html#cb349-16" aria-hidden="true" tabindex="-1"></a><span class="do">##    2    1     3 0.125</span></span>
<span id="cb349-17"><a href="loops.html#cb349-17" aria-hidden="true" tabindex="-1"></a><span class="do">##    3    1     4 0.125</span></span></code></pre></div>
<p>Second, we can look up the probabilities of rolling the values in <code>Var2</code>:</p>
<div class="sourceCode" id="cb350"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb350-1"><a href="loops.html#cb350-1" aria-hidden="true" tabindex="-1"></a>tiradas<span class="sc">$</span>prob2 <span class="ot">&lt;-</span> prob[tiradas<span class="sc">$</span>Var2]</span>
<span id="cb350-2"><a href="loops.html#cb350-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb350-3"><a href="loops.html#cb350-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(tiradas, <span class="dv">3</span>)</span>
<span id="cb350-4"><a href="loops.html#cb350-4" aria-hidden="true" tabindex="-1"></a><span class="do">## Var1 Var2 valor prob1 prob2</span></span>
<span id="cb350-5"><a href="loops.html#cb350-5" aria-hidden="true" tabindex="-1"></a><span class="do">##    1    1     2 0.125 0.125</span></span>
<span id="cb350-6"><a href="loops.html#cb350-6" aria-hidden="true" tabindex="-1"></a><span class="do">##    2    1     3 0.125 0.125</span></span>
<span id="cb350-7"><a href="loops.html#cb350-7" aria-hidden="true" tabindex="-1"></a><span class="do">##    3    1     4 0.125 0.125</span></span></code></pre></div>
<p>Tercero, podemos calcular la probabilidad de obtener cada combinación multiplicando <code>prob1</code> por <code>prob2</code>:</p>
<div class="sourceCode" id="cb351"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb351-1"><a href="loops.html#cb351-1" aria-hidden="true" tabindex="-1"></a>tiradas<span class="sc">$</span>prob <span class="ot">&lt;-</span> tiradas<span class="sc">$</span>prob1 <span class="sc">*</span> tiradas<span class="sc">$</span>prob2</span>
<span id="cb351-2"><a href="loops.html#cb351-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb351-3"><a href="loops.html#cb351-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(tiradas, <span class="dv">3</span>)</span>
<span id="cb351-4"><a href="loops.html#cb351-4" aria-hidden="true" tabindex="-1"></a><span class="do">## Var1 Var2 valor prob1 prob2     prob</span></span>
<span id="cb351-5"><a href="loops.html#cb351-5" aria-hidden="true" tabindex="-1"></a><span class="do">##    1    1     2 0.125 0.125 0.015625</span></span>
<span id="cb351-6"><a href="loops.html#cb351-6" aria-hidden="true" tabindex="-1"></a><span class="do">##    2    1     3 0.125 0.125 0.015625</span></span>
<span id="cb351-7"><a href="loops.html#cb351-7" aria-hidden="true" tabindex="-1"></a><span class="do">##    3    1     4 0.125 0.125 0.015625</span></span></code></pre></div>
<p>Es fácil calcular el valor esperado ahora que tenemos cada resultado, el valor de cada resultado y la probabilidad de cada resultado. El valor esperado será la suma de los valores de los dados multiplicada por las probabilidades de los dados:</p>
<div class="sourceCode" id="cb352"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb352-1"><a href="loops.html#cb352-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(tiradas<span class="sc">$</span>valor <span class="sc">*</span> tiradas<span class="sc">$</span>prob)</span>
<span id="cb352-2"><a href="loops.html#cb352-2" aria-hidden="true" tabindex="-1"></a><span class="do">## 8.25</span></span></code></pre></div>
<p>Entonces, el valor esperado de lanzar dos dados cargados es 8.25. Si lanzaste un par de dados cargados un número infinito de veces, la suma promedio sería 8.25. (Si tiene curiosidad, el valor esperado de lanzar un par de dados justos es 7, lo que explica por qué 7 juega un papel tan importante en juegos de dados como los dados).</p>
<p>Ahora que se ha calentado, usemos nuestro método para calcular el valor esperado del premio de la máquina tragamonedas. Seguiremos los mismos pasos que acabamos de hacer:</p>
<ul>
<li>Enumeraremos todos los resultados posibles de jugar en la máquina. Esta será una lista de cada combinación de tres símbolos de tragamonedas.</li>
<li>Calcularemos la probabilidad de obtener cada combinación cuando juegues en la máquina.</li>
<li>Determinaremos el premio que ganaríamos por cada combinación.</li>
</ul>
<p>Cuando hayamos terminado, tendremos un conjunto de datos que se verá así:</p>
<div class="sourceCode" id="cb353"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb353-1"><a href="loops.html#cb353-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Var1 Var2 Var3 prob1 prob2 prob3     prob premio</span></span>
<span id="cb353-2"><a href="loops.html#cb353-2" aria-hidden="true" tabindex="-1"></a><span class="do">##   DD   DD   DD  0.03  0.03  0.03 0.000027    800</span></span>
<span id="cb353-3"><a href="loops.html#cb353-3" aria-hidden="true" tabindex="-1"></a><span class="do">##    7   DD   DD  0.03  0.03  0.03 0.000027      0</span></span>
<span id="cb353-4"><a href="loops.html#cb353-4" aria-hidden="true" tabindex="-1"></a><span class="do">##  BBB   DD   DD  0.06  0.03  0.03 0.000054      0</span></span>
<span id="cb353-5"><a href="loops.html#cb353-5" aria-hidden="true" tabindex="-1"></a><span class="do">## ... y así sucesivamente.</span></span></code></pre></div>
<p>El valor esperado será entonces la suma de los premios multiplicada por su probabilidad de ocurrencia:</p>
<p><span class="math display">\[
E(\text{premio}) = \sum_{i = 1}^{n}\left( \text{premio}_{i} \cdot P(\text{premio}_{i}) \right)
\]</span></p>
<p>¿Listo para comenzar?</p>
<p><strong>Ejercicio 12.1 (Liste las Combinaciones)</strong> Usa <code>expand.grid</code> para crear un data frame que contenga todas las combinaciones posibles de <em>tres</em> símbolos del vector <code>rueda</code>:</p>
<div class="sourceCode" id="cb354"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb354-1"><a href="loops.html#cb354-1" aria-hidden="true" tabindex="-1"></a>rueda <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;DD&quot;</span>, <span class="st">&quot;7&quot;</span>, <span class="st">&quot;BBB&quot;</span>, <span class="st">&quot;BB&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;C&quot;</span>, <span class="st">&quot;0&quot;</span>)</span></code></pre></div>
<p>Asegúrese de agregar el argumento <code>stringsAsFactors = FALSE</code> a su llamada <code>expand.grid</code>; de lo contrario, <code>expand.grid</code> guardará las combinaciones como factores, una elección desafortunada que interrumpirá la función <code>puntuacion</code></p>
<div class="solution">
<p><span id="unlabeled-div-27" class="solution"><em>Solution</em>. </span>Para crear un data frame de cada combinación de <em>tres</em> símbolos, debe ejecutar <code>expand.grid</code> y darle <em>tres</em> copias de <code>wheel</code>. El resultado será un data frame con 343 filas, una para cada combinación única de tres símbolos de ranura:</p>
</div>
<div class="sourceCode" id="cb355"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb355-1"><a href="loops.html#cb355-1" aria-hidden="true" tabindex="-1"></a>combos <span class="ot">&lt;-</span> <span class="fu">expand.grid</span>(rueda, rueda, rueda, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb355-2"><a href="loops.html#cb355-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb355-3"><a href="loops.html#cb355-3" aria-hidden="true" tabindex="-1"></a>combos</span>
<span id="cb355-4"><a href="loops.html#cb355-4" aria-hidden="true" tabindex="-1"></a><span class="do">##   Var1 Var2 Var3</span></span>
<span id="cb355-5"><a href="loops.html#cb355-5" aria-hidden="true" tabindex="-1"></a><span class="do">## 1   DD   DD   DD</span></span>
<span id="cb355-6"><a href="loops.html#cb355-6" aria-hidden="true" tabindex="-1"></a><span class="do">## 2    7   DD   DD</span></span>
<span id="cb355-7"><a href="loops.html#cb355-7" aria-hidden="true" tabindex="-1"></a><span class="do">## 3  BBB   DD   DD</span></span>
<span id="cb355-8"><a href="loops.html#cb355-8" aria-hidden="true" tabindex="-1"></a><span class="do">## 4   BB   DD   DD</span></span>
<span id="cb355-9"><a href="loops.html#cb355-9" aria-hidden="true" tabindex="-1"></a><span class="do">## 5    B   DD   DD</span></span>
<span id="cb355-10"><a href="loops.html#cb355-10" aria-hidden="true" tabindex="-1"></a><span class="do">## 6    C   DD   DD</span></span>
<span id="cb355-11"><a href="loops.html#cb355-11" aria-hidden="true" tabindex="-1"></a><span class="do">## ...</span></span>
<span id="cb355-12"><a href="loops.html#cb355-12" aria-hidden="true" tabindex="-1"></a><span class="do">## 341    B    0    0</span></span>
<span id="cb355-13"><a href="loops.html#cb355-13" aria-hidden="true" tabindex="-1"></a><span class="do">## 342    C    0    0</span></span>
<span id="cb355-14"><a href="loops.html#cb355-14" aria-hidden="true" tabindex="-1"></a><span class="do">## 343    0    0    0</span></span></code></pre></div>
<p>Ahora, calculemos la probabilidad de obtener cada combinación. Puedes usar las probabilidades contenidas en el argumento <code>prob</code> de <code>obt_simbolos</code> para hacer esto. Estas probabilidades determinan la frecuencia con la que se elige cada símbolo cuando su máquina tragamonedas genera símbolos. Se calcularon después de observar 345 jugadas de las terminales de video lotería de Manitoba. Los ceros tienen la mayor probabilidad de ser seleccionados (0,52) y las cerezas la menor (0,01):</p>
<div class="sourceCode" id="cb356"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb356-1"><a href="loops.html#cb356-1" aria-hidden="true" tabindex="-1"></a><span class="fu">obt_simbolos</span>() <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb356-2"><a href="loops.html#cb356-2" aria-hidden="true" tabindex="-1"></a>  rueda <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;DD&quot;</span>, <span class="st">&quot;7&quot;</span>, <span class="st">&quot;BBB&quot;</span>, <span class="st">&quot;BB&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;C&quot;</span>, <span class="st">&quot;0&quot;</span>)</span>
<span id="cb356-3"><a href="loops.html#cb356-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sample</span>(rueda, <span class="at">size =</span> <span class="dv">3</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>, </span>
<span id="cb356-4"><a href="loops.html#cb356-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">prob =</span> <span class="fu">c</span>(<span class="fl">0.03</span>, <span class="fl">0.03</span>, <span class="fl">0.06</span>, <span class="fl">0.1</span>, <span class="fl">0.25</span>, <span class="fl">0.01</span>, <span class="fl">0.52</span>))</span>
<span id="cb356-5"><a href="loops.html#cb356-5" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p><strong>Ejercicio 12.2 (Haz una Tabla de Búsqueda)</strong> Aísle las probabilidades anteriores en una tabla de búsqueda. ¿Qué nombres usarás en tu tabla?</p>
<div class="solution">
<p><span id="unlabeled-div-28" class="solution"><em>Solution</em>. </span>Sus nombres deben coincidir con la entrada que desea buscar. En este caso, la entrada serán las cadenas de caracteres que aparecen en <code>Var1</code>, <code>Var2</code> y <code>Var3</code>. Entonces su tabla de búsqueda debería verse así:</p>
</div>
<div class="sourceCode" id="cb357"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb357-1"><a href="loops.html#cb357-1" aria-hidden="true" tabindex="-1"></a>prob <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;DD&quot;</span> <span class="ot">=</span> <span class="fl">0.03</span>, <span class="st">&quot;7&quot;</span> <span class="ot">=</span> <span class="fl">0.03</span>, <span class="st">&quot;BBB&quot;</span> <span class="ot">=</span> <span class="fl">0.06</span>, </span>
<span id="cb357-2"><a href="loops.html#cb357-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;BB&quot;</span> <span class="ot">=</span> <span class="fl">0.1</span>, <span class="st">&quot;B&quot;</span> <span class="ot">=</span> <span class="fl">0.25</span>, <span class="st">&quot;C&quot;</span> <span class="ot">=</span> <span class="fl">0.01</span>, <span class="st">&quot;0&quot;</span> <span class="ot">=</span> <span class="fl">0.52</span>)</span></code></pre></div>
<p>Ahora busquemos nuestras probabilidades.</p>
<p><strong>Ejercicio 12.3 (Buscar las Probabilidades)</strong> Busque las probabilidades de obtener los valores en <code>Var1</code>. Luego agréguelos a <code>combos</code> como una columna llamada <code>prob1</code>. Luego haga lo mismo para <code>Var2</code> (<code>prob2</code>) y <code>Var3</code> (<code>prob3</code>).</p>
<div class="solution">
<p><span id="unlabeled-div-29" class="solution"><em>Solution</em>. </span>Recuerde que usa la notación de selección de R para buscar valores en una tabla de búsqueda. Los valores que resulten estarán relacionados con el índice que utilice:</p>
</div>
<div class="sourceCode" id="cb358"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb358-1"><a href="loops.html#cb358-1" aria-hidden="true" tabindex="-1"></a>combos<span class="sc">$</span>prob1 <span class="ot">&lt;-</span> prob[combos<span class="sc">$</span>Var1]</span>
<span id="cb358-2"><a href="loops.html#cb358-2" aria-hidden="true" tabindex="-1"></a>combos<span class="sc">$</span>prob2 <span class="ot">&lt;-</span> prob[combos<span class="sc">$</span>Var2]</span>
<span id="cb358-3"><a href="loops.html#cb358-3" aria-hidden="true" tabindex="-1"></a>combos<span class="sc">$</span>prob3 <span class="ot">&lt;-</span> prob[combos<span class="sc">$</span>Var3]</span>
<span id="cb358-4"><a href="loops.html#cb358-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb358-5"><a href="loops.html#cb358-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(combos, <span class="dv">3</span>)</span>
<span id="cb358-6"><a href="loops.html#cb358-6" aria-hidden="true" tabindex="-1"></a><span class="do">## Var1 Var2 Var3 prob1 prob2 prob3</span></span>
<span id="cb358-7"><a href="loops.html#cb358-7" aria-hidden="true" tabindex="-1"></a><span class="do">##   DD   DD   DD  0.03  0.03  0.03</span></span>
<span id="cb358-8"><a href="loops.html#cb358-8" aria-hidden="true" tabindex="-1"></a><span class="do">##    7   DD   DD  0.03  0.03  0.03</span></span>
<span id="cb358-9"><a href="loops.html#cb358-9" aria-hidden="true" tabindex="-1"></a><span class="do">##  BBB   DD   DD  0.06  0.03  0.03</span></span></code></pre></div>
<p>Ahora, ¿cómo debemos calcular la probabilidad total de cada combinación? Nuestros tres símbolos de tragamonedas se eligen de forma independiente, lo que significa que la misma regla que gobernó nuestras probabilidades de dados gobierna nuestras probabilidades de símbolos:</p>
<p><span class="math display">\[
P(A \&amp; B \&amp; C \&amp; ...) = P(A) \cdot P(B) \cdot P(C) \cdot ...
\]</span></p>
<p><strong>Ejercicio 12.4 (Calcular las Probabilidades de Cada Combinación)</strong> Calcule las probabilidades generales para cada combinación. Guárdelos como una columna llamada <code>prob</code> en <code>combos</code>, luego verifique su trabajo.</p>
<p>Puedes comprobar que las matemáticas funcionaron sumando las probabilidades. Las probabilidades deben sumar uno, porque una de las combinaciones <em>debe</em> aparecer cuando juegas en la máquina tragamonedas. En otras palabras, aparecerá una combinación, con probabilidad de uno.</p>
<p>Puede calcular las probabilidades de cada combinación posible de una sola vez con alguna ejecución de elementos:</p>
<div class="sourceCode" id="cb359"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb359-1"><a href="loops.html#cb359-1" aria-hidden="true" tabindex="-1"></a>combos<span class="sc">$</span>prob <span class="ot">&lt;-</span> combos<span class="sc">$</span>prob1 <span class="sc">*</span> combos<span class="sc">$</span>prob2 <span class="sc">*</span> combos<span class="sc">$</span>prob3</span>
<span id="cb359-2"><a href="loops.html#cb359-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb359-3"><a href="loops.html#cb359-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(combos, <span class="dv">3</span>)</span>
<span id="cb359-4"><a href="loops.html#cb359-4" aria-hidden="true" tabindex="-1"></a><span class="do">## Var1 Var2 Var3 prob1 prob2 prob3     prob</span></span>
<span id="cb359-5"><a href="loops.html#cb359-5" aria-hidden="true" tabindex="-1"></a><span class="do">##   DD   DD   DD  0.03  0.03  0.03 0.000027</span></span>
<span id="cb359-6"><a href="loops.html#cb359-6" aria-hidden="true" tabindex="-1"></a><span class="do">##    7   DD   DD  0.03  0.03  0.03 0.000027</span></span>
<span id="cb359-7"><a href="loops.html#cb359-7" aria-hidden="true" tabindex="-1"></a><span class="do">##  BBB   DD   DD  0.06  0.03  0.03 0.000054</span></span></code></pre></div>
<p>La suma de las probabilidades es uno, lo que sugiere que nuestra matemática es correcta:</p>
<div class="sourceCode" id="cb360"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb360-1"><a href="loops.html#cb360-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(combos<span class="sc">$</span>prob)</span>
<span id="cb360-2"><a href="loops.html#cb360-2" aria-hidden="true" tabindex="-1"></a><span class="do">## 1</span></span></code></pre></div>
<p>Solo necesita hacer una cosa más antes de poder calcular el valor esperado: debe determinar el premio para cada combinación en <code>combos</code>. Puedes calcular el premio con <code>puntuacion</code>. Por ejemplo, podemos calcular el premio de la primera fila de <code>combos</code> así:</p>
<div class="sourceCode" id="cb361"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb361-1"><a href="loops.html#cb361-1" aria-hidden="true" tabindex="-1"></a>simbolos <span class="ot">&lt;-</span> <span class="fu">c</span>(combos[<span class="dv">1</span>, <span class="dv">1</span>], combos[<span class="dv">1</span>, <span class="dv">2</span>], combos[<span class="dv">1</span>, <span class="dv">3</span>])</span>
<span id="cb361-2"><a href="loops.html#cb361-2" aria-hidden="true" tabindex="-1"></a><span class="do">## &quot;DD&quot; &quot;DD&quot; &quot;DD&quot;</span></span>
<span id="cb361-3"><a href="loops.html#cb361-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb361-4"><a href="loops.html#cb361-4" aria-hidden="true" tabindex="-1"></a><span class="fu">puntuacion</span>(simbolos)</span>
<span id="cb361-5"><a href="loops.html#cb361-5" aria-hidden="true" tabindex="-1"></a><span class="do">## 800</span></span></code></pre></div>
<p>Sin embargo, hay 343 filas, lo que hace que el trabajo sea tedioso si planea calcular las puntuaciones manualmente. Será más rápido automatizar esta tarea y hacer que R lo haga por usted, lo que puede hacer con un bucle <code>for</code>.</p>
</div>
<div id="bucles-for" class="section level2 hasAnchor" number="12.3">
<h2><span class="header-section-number">12.3</span> Bucles for<a href="loops.html#bucles-for" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Un bucle <code>for</code> repite un trozo de código muchas veces, una vez para cada elemento en un conjunto de entrada. Los bucles <code>for</code> proporcionan una manera de decirle a R: “Haz esto para cada valor de aquello”. En sintaxis R, esto se ve así:</p>
<div class="sourceCode" id="cb362"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb362-1"><a href="loops.html#cb362-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (valor <span class="cf">in</span> aquello) {</span>
<span id="cb362-2"><a href="loops.html#cb362-2" aria-hidden="true" tabindex="-1"></a>  esto</span>
<span id="cb362-3"><a href="loops.html#cb362-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>El objeto <code>aquello</code> debe ser un conjunto de objetos (a menudo un vector de números o cadenas de caracteres). El bucle for ejecutará el código que aparece entre llaves una vez para cada miembro de <code>aquello</code>. Por ejemplo, el bucle for siguiente ejecuta <code>print("una ejecución")</code> una vez para cada elemento en un vector de cadenas de caracteres:</p>
<div class="sourceCode" id="cb363"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb363-1"><a href="loops.html#cb363-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (valor <span class="cf">in</span> <span class="fu">c</span>(<span class="st">&quot;Mi&quot;</span>, <span class="st">&quot;primer&quot;</span>, <span class="st">&quot;bucle&quot;</span>, <span class="st">&quot;foe&quot;</span>)) {</span>
<span id="cb363-2"><a href="loops.html#cb363-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">&quot;una ejecución&quot;</span>)</span>
<span id="cb363-3"><a href="loops.html#cb363-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb363-4"><a href="loops.html#cb363-4" aria-hidden="true" tabindex="-1"></a><span class="do">## &quot;una ejecución&quot;</span></span>
<span id="cb363-5"><a href="loops.html#cb363-5" aria-hidden="true" tabindex="-1"></a><span class="do">## &quot;una ejecución&quot;</span></span>
<span id="cb363-6"><a href="loops.html#cb363-6" aria-hidden="true" tabindex="-1"></a><span class="do">## &quot;una ejecución&quot;</span></span>
<span id="cb363-7"><a href="loops.html#cb363-7" aria-hidden="true" tabindex="-1"></a><span class="do">## &quot;una ejecución&quot;</span></span></code></pre></div>
<p>El símbolo <code>valor</code> en un bucle for actúa como un argumento en una función. El bucle for creará un objeto llamado <code>valor</code> y le asignará un nuevo valor en cada ejecución del bucle. El código en su bucle puede acceder a este valor llamando al objeto <code>valor</code>.</p>
<p>¿Qué valores asignará el bucle for a <code>valor</code>? Utilizará los elementos del conjunto en el que ejecuta el ciclo. <code>for</code> comienza con el primer elemento y luego asigna un elemento diferente a <code>valor</code> en cada ejecución del ciclo for, hasta que todos los elementos han sido asignados a <code>valor</code>. Por ejemplo, el bucle for de abajo ejecutará <code>print(valor)</code> cuatro veces e imprimirá un elemento de <code>c("Mi", "segundo", "bucle", "for")</code> cada vez:</p>
<div class="sourceCode" id="cb364"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb364-1"><a href="loops.html#cb364-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (valor <span class="cf">in</span> <span class="fu">c</span>(<span class="st">&quot;Mi&quot;</span>, <span class="st">&quot;segundo&quot;</span>, <span class="st">&quot;bucle&quot;</span>, <span class="st">&quot;for&quot;</span>)) {</span>
<span id="cb364-2"><a href="loops.html#cb364-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(valor)</span>
<span id="cb364-3"><a href="loops.html#cb364-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb364-4"><a href="loops.html#cb364-4" aria-hidden="true" tabindex="-1"></a><span class="do">## &quot;Mi&quot;</span></span>
<span id="cb364-5"><a href="loops.html#cb364-5" aria-hidden="true" tabindex="-1"></a><span class="do">## &quot;segundo&quot;</span></span>
<span id="cb364-6"><a href="loops.html#cb364-6" aria-hidden="true" tabindex="-1"></a><span class="do">## &quot;bucle&quot;</span></span>
<span id="cb364-7"><a href="loops.html#cb364-7" aria-hidden="true" tabindex="-1"></a><span class="do">## &quot;for&quot;</span></span></code></pre></div>
<p>En la primera ejecución, el ciclo for sustituyó <code>"My"</code> por <code>valor</code> en <code>print(valor)</code>. En la segunda ejecución, sustituyó <code>"segundo"</code>, y así sucesivamente hasta que <code>for</code> ejecutó <code>print(valor)</code> una vez con cada elemento del conjunto:</p>
<p>Si mira <code>valor</code> después de que se ejecuta el bucle, verá que todavía contiene el valor del último elemento del conjunto:</p>
<div class="sourceCode" id="cb365"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb365-1"><a href="loops.html#cb365-1" aria-hidden="true" tabindex="-1"></a>valor</span>
<span id="cb365-2"><a href="loops.html#cb365-2" aria-hidden="true" tabindex="-1"></a><span class="do">## &quot;for&quot;</span></span></code></pre></div>
<p>He estado usando el símbolo <code>valor</code> en mis bucles for, pero no tiene nada de especial. Puede usar cualquier símbolo que desee en su bucle para hacer lo mismo siempre que el símbolo aparezca antes de <code>in</code> en los paréntesis que siguen a <code>for</code>. Por ejemplo, podría reescribir el bucle anterior con cualquiera de los siguientes:</p>
<div class="sourceCode" id="cb366"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb366-1"><a href="loops.html#cb366-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (palabra <span class="cf">in</span> <span class="fu">c</span>(<span class="st">&quot;Mi&quot;</span>, <span class="st">&quot;segundo&quot;</span>, <span class="st">&quot;bucle&quot;</span>, <span class="st">&quot;for&quot;</span>)) {</span>
<span id="cb366-2"><a href="loops.html#cb366-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(palabra)</span>
<span id="cb366-3"><a href="loops.html#cb366-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb366-4"><a href="loops.html#cb366-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (texto <span class="cf">in</span> <span class="fu">c</span>(<span class="st">&quot;Mi&quot;</span>, <span class="st">&quot;segundo&quot;</span>, <span class="st">&quot;bucle&quot;</span>, <span class="st">&quot;for&quot;</span>)) {</span>
<span id="cb366-5"><a href="loops.html#cb366-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(texto)</span>
<span id="cb366-6"><a href="loops.html#cb366-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb366-7"><a href="loops.html#cb366-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">c</span>(<span class="st">&quot;Mi&quot;</span>, <span class="st">&quot;segundo&quot;</span>, <span class="st">&quot;bucle&quot;</span>, <span class="st">&quot;for&quot;</span>)) {</span>
<span id="cb366-8"><a href="loops.html#cb366-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(i)</span>
<span id="cb366-9"><a href="loops.html#cb366-9" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>

<div class="rmdwarning">
<p><strong>Elige tus símbolos con cuidado</strong></p>
R ejecutará su ciclo en cualquier entorno desde el que lo llame. Estas son malas noticias si su bucle usa nombres de objetos que ya existen en el entorno. Su bucle sobrescribirá los objetos existentes con los objetos que crea. Esto también se aplica al símbolo de valor.
</div>

<div class="rmdtip">
<p><strong>Los bucles for se ejecutan en conjuntos</strong></p>
<p>En muchos lenguajes de programación, los bucles <code>for</code> están diseñados para funcionar con números enteros, no con conjuntos. Le da al bucle un valor inicial y un valor final, así como un incremento para avanzar el valor entre bucles. El bucle <code>for</code> se ejecuta hasta que el valor del bucle supera el valor final.</p>
Puede recrear este efecto en R haciendo que un bucle <code>for</code> se ejecute en un conjunto de enteros, pero no pierda de vista el hecho de que los bucles <code>for</code> de R se ejecutan en miembros de un conjunto, no en secuencias de enteros.
</div>
<p>Los bucles <code>for</code> son muy útiles en la programación porque te ayudan a conectar un fragmento de código con cada elemento de un conjunto. Por ejemplo, podríamos usar un ciclo <code>for</code> para ejecutar <code>puntuacion</code> una vez por cada fila en <code>combos</code>. Sin embargo, los bucles <code>for</code> de R tienen un defecto que querrá conocer antes de empezar a usarlos: los bucles <code>for</code> no devuelven salida.</p>
<p>Los bucles <code>for</code> son como Las Vegas: lo que sucede en un bucle <code>for</code> permanece en un bucle <code>for</code>. Si desea utilizar los productos de un bucle <code>for</code>, debe escribir el bucle <code>for</code> para que guarde su propia salida a medida que avanza.</p>
<p>Nuestros ejemplos anteriores parecían devolver la salida, pero esto era engañoso. Los ejemplos funcionaron porque llamamos <code>print</code>, que siempre imprime sus argumentos en la consola (incluso si se llama desde una función, un bucle <code>for</code> o cualquier otra cosa). Nuestros bucles <code>for</code> no devolverán nada si eliminas la llamada <code>print</code>:</p>
<div class="sourceCode" id="cb367"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb367-1"><a href="loops.html#cb367-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (valor <span class="cf">in</span> <span class="fu">c</span>(<span class="st">&quot;Mi&quot;</span>, <span class="st">&quot;tercer&quot;</span>, <span class="st">&quot;bucle&quot;</span>, <span class="st">&quot;for&quot;</span>)) {</span>
<span id="cb367-2"><a href="loops.html#cb367-2" aria-hidden="true" tabindex="-1"></a>  valor</span>
<span id="cb367-3"><a href="loops.html#cb367-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb367-4"><a href="loops.html#cb367-4" aria-hidden="true" tabindex="-1"></a><span class="do">##</span></span></code></pre></div>
<p>Para guardar la salida de un bucle <code>for</code>, debe escribir el bucle para que guarde su propia salida mientras se ejecuta. Puede hacer esto creando un vector vacío o una lista antes de ejecutar el bucle <code>for</code>. Luego use el bucle <code>for</code> para llenar el vector o la lista. Cuando finalice el bucle <code>for</code>, podrá acceder al vector o lista, que ahora tendrá todos sus resultados.</p>
<p>Veamos esto en acción. El siguiente código crea un vector vacío de longitud 4:</p>
<div class="sourceCode" id="cb368"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb368-1"><a href="loops.html#cb368-1" aria-hidden="true" tabindex="-1"></a>caracteres <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="at">length =</span> <span class="dv">4</span>)</span></code></pre></div>
<p>El siguiente ciclo lo llenará con cadenas de texto:</p>
<div class="sourceCode" id="cb369"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb369-1"><a href="loops.html#cb369-1" aria-hidden="true" tabindex="-1"></a>palabras <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Mi&quot;</span>, <span class="st">&quot;cuarto&quot;</span>, <span class="st">&quot;bucle&quot;</span>, <span class="st">&quot;for&quot;</span>)</span>
<span id="cb369-2"><a href="loops.html#cb369-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb369-3"><a href="loops.html#cb369-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>) {</span>
<span id="cb369-4"><a href="loops.html#cb369-4" aria-hidden="true" tabindex="-1"></a>  caracteres[i] <span class="ot">&lt;-</span> palabras[i]</span>
<span id="cb369-5"><a href="loops.html#cb369-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb369-6"><a href="loops.html#cb369-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb369-7"><a href="loops.html#cb369-7" aria-hidden="true" tabindex="-1"></a>caracteres</span>
<span id="cb369-8"><a href="loops.html#cb369-8" aria-hidden="true" tabindex="-1"></a><span class="do">## &quot;Mi&quot;    &quot;cuarto&quot; &quot;bucle&quot;   &quot;for&quot;</span></span></code></pre></div>
<p>Este enfoque generalmente requerirá que cambie los conjuntos en los que ejecuta su bucle <code>for</code>. En lugar de ejecutar en un conjunto de objetos, ejecute en un conjunto de enteros que puede usar para indexar tanto su objeto como su vector de almacenamiento. Este enfoque es muy común en R. Encontrará en la práctica que usa bucles <code>for</code> no tanto para ejecutar código, sino para llenar vectores y listas con los resultados del código.</p>
<p>Usemos un bucle <code>for</code> para calcular el premio de cada fila en <code>combos</code>. Para comenzar, cree una nueva columna en <code>combos</code> para almacenar los resultados del bucle <code>for</code>:</p>
<div class="sourceCode" id="cb370"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb370-1"><a href="loops.html#cb370-1" aria-hidden="true" tabindex="-1"></a>combos<span class="sc">$</span>premio <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb370-2"><a href="loops.html#cb370-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb370-3"><a href="loops.html#cb370-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(combos, <span class="dv">3</span>)</span>
<span id="cb370-4"><a href="loops.html#cb370-4" aria-hidden="true" tabindex="-1"></a><span class="do">##  Var1 Var2 Var3 prob1 prob2 prob3     prob premio</span></span>
<span id="cb370-5"><a href="loops.html#cb370-5" aria-hidden="true" tabindex="-1"></a><span class="do">##    DD   DD   DD  0.03  0.03  0.03 0.000027     NA</span></span>
<span id="cb370-6"><a href="loops.html#cb370-6" aria-hidden="true" tabindex="-1"></a><span class="do">##     7   DD   DD  0.03  0.03  0.03 0.000027     NA</span></span>
<span id="cb370-7"><a href="loops.html#cb370-7" aria-hidden="true" tabindex="-1"></a><span class="do">##   BBB   DD   DD  0.06  0.03  0.03 0.000054     NA</span></span></code></pre></div>
<p>El código crea una nueva columna llamada premio y la llena con <code>NA</code>. R usa sus reglas de reciclaje para completar cada valor de la columna con <code>NA</code>.</p>
<p><strong>Ejercicio 12.5 (Construye un Bucle)</strong> Construya un bucle <code>for</code> que ejecutará <code>puntuacion</code> en las 343 filas de <code>combos</code>. El ciclo debe ejecutar <code>puntuacion</code> en las primeras tres entradas de la _i_ésima fila de <code>combos</code> y debe almacenar los resultados en la _i_ésima entrada de <code>combos$premio</code>.</p>
<div class="solution">
<p><span id="unlabeled-div-30" class="solution"><em>Solution</em>. </span>Puedes puntuar las filas en <code>combos</code> con:</p>
</div>
<div class="sourceCode" id="cb371"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb371-1"><a href="loops.html#cb371-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(combos)) {</span>
<span id="cb371-2"><a href="loops.html#cb371-2" aria-hidden="true" tabindex="-1"></a>  simbolos <span class="ot">&lt;-</span> <span class="fu">c</span>(combos[i, <span class="dv">1</span>], combos[i, <span class="dv">2</span>], combos[i, <span class="dv">3</span>])</span>
<span id="cb371-3"><a href="loops.html#cb371-3" aria-hidden="true" tabindex="-1"></a>  combos<span class="sc">$</span>premio[i] <span class="ot">&lt;-</span> <span class="fu">puntuacion</span>(simbolos)</span>
<span id="cb371-4"><a href="loops.html#cb371-4" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Después de ejecutar el ciclo for, <code>combos$premio</code> contendrá el premio correcto para cada fila. Este ejercicio también prueba la función <code>puntuacion</code>; <code>puntuacion</code> parece funcionar correctamente para todas las combinaciones posibles de tragamonedas:</p>
<div class="sourceCode" id="cb372"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb372-1"><a href="loops.html#cb372-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(combos, <span class="dv">3</span>)</span>
<span id="cb372-2"><a href="loops.html#cb372-2" aria-hidden="true" tabindex="-1"></a><span class="do">## Var1 Var2 Var3 prob1 prob2 prob3     prob premio</span></span>
<span id="cb372-3"><a href="loops.html#cb372-3" aria-hidden="true" tabindex="-1"></a><span class="do">##   DD   DD   DD  0.03  0.03  0.03 0.000027    800</span></span>
<span id="cb372-4"><a href="loops.html#cb372-4" aria-hidden="true" tabindex="-1"></a><span class="do">##    7   DD   DD  0.03  0.03  0.03 0.000027      0</span></span>
<span id="cb372-5"><a href="loops.html#cb372-5" aria-hidden="true" tabindex="-1"></a><span class="do">##  BBB   DD   DD  0.06  0.03  0.03 0.000054      0</span></span></code></pre></div>
<p>Ahora estamos listos para calcular el valor esperado del premio. El valor esperado es la suma de <code>combos$premio</code> ponderada por <code>combos$prob</code>. Esta es también la tasa de pago de la máquina tragamonedas:</p>
<div class="sourceCode" id="cb373"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb373-1"><a href="loops.html#cb373-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(combos<span class="sc">$</span>premio <span class="sc">*</span> combos<span class="sc">$</span>prob)</span>
<span id="cb373-2"><a href="loops.html#cb373-2" aria-hidden="true" tabindex="-1"></a><span class="do">## 0.538014</span></span></code></pre></div>
<p>Oh oh. El premio esperado es de aproximadamente 0,54, lo que significa que nuestra máquina tragamonedas solo paga 54 centavos por dólar a largo plazo. ¿Significa esto que el fabricante de las máquinas tragamonedas de Manitoba <em>estaba</em> mintiendo?</p>
<p>No, porque ignoramos una característica importante de la máquina tragamonedas cuando escribimos <code>puntuacion</code>: un diamante es un comodín. Puede tratar un <code>DD</code> como cualquier otro símbolo si aumenta su premio, con una excepción. No puede convertir un <code>DD</code> en una <code>C</code> a menos que ya tenga otra <code>C</code> en sus símbolos (sería demasiado fácil si cada <code>DD</code> le otorgara automáticamente $2).</p>
<p>Lo mejor de los <code>DD</code>s es que sus efectos son acumulativos. Por ejemplo, considere la combinación <code>B</code>, <code>DD</code>, <code>B</code>. El <code>DD</code> no solo cuenta como <code>B</code>, que ganaría un premio de $10; el <code>DD</code> también duplica el premio a $20.</p>
<p>Agregar este comportamiento a nuestro código es un poco más difícil que lo que hemos hecho hasta ahora, pero involucra todos los mismos principios. Puede decidir que su máquina tragamonedas no use comodines y conservar el código que tenemos. En ese caso, su máquina tragamonedas tendrá una tasa de pago de alrededor del 54 por ciento. O bien, podría reescribir su código para usar comodines. Si lo hace, encontrará que su máquina tragamonedas tiene una tasa de pago del 93 por ciento, un uno por ciento más alta que la afirmación del fabricante. Puedes calcular esta tasa con el mismo método que usamos en esta sección.</p>
<p><strong>Ejercicio 12.6 (Desafío)</strong> Hay muchas formas de modificar <code>puntuacion</code> que contarían <code>DD</code> como comodines. Si desea probar su habilidad como programador de R, intente escribir su propia versión de <code>puntuacion</code> que maneje correctamente los diamantes.</p>
<p>Si desea un desafío más modesto, estudie el siguiente código de <code>puntuacion</code>. Da cuenta de los diamantes salvajes de una manera que me parece elegante y sucinta. Vea si puede entender cada paso en el código y cómo logra su resultado.</p>
<div class="solution">
<p><span id="unlabeled-div-31" class="solution"><em>Solution</em>. </span>Aquí hay una versión de puntuacion que maneja diamantes salvajes:</p>
</div>
<div class="sourceCode" id="cb374"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb374-1"><a href="loops.html#cb374-1" aria-hidden="true" tabindex="-1"></a>puntuacion <span class="ot">&lt;-</span> <span class="cf">function</span>(simbolos) {</span>
<span id="cb374-2"><a href="loops.html#cb374-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb374-3"><a href="loops.html#cb374-3" aria-hidden="true" tabindex="-1"></a>  diamantez <span class="ot">&lt;-</span> <span class="fu">sum</span>(simbolos <span class="sc">==</span> <span class="st">&quot;DD&quot;</span>)</span>
<span id="cb374-4"><a href="loops.html#cb374-4" aria-hidden="true" tabindex="-1"></a>  cerezas <span class="ot">&lt;-</span> <span class="fu">sum</span>(simbolos <span class="sc">==</span> <span class="st">&quot;C&quot;</span>)</span>
<span id="cb374-5"><a href="loops.html#cb374-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb374-6"><a href="loops.html#cb374-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># identificar caso</span></span>
<span id="cb374-7"><a href="loops.html#cb374-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># dado que los diamante son salvajes, solo</span></span>
<span id="cb374-8"><a href="loops.html#cb374-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># importan los no diamantes para tres de un </span></span>
<span id="cb374-9"><a href="loops.html#cb374-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># tipo y para todos barras</span></span>
<span id="cb374-10"><a href="loops.html#cb374-10" aria-hidden="true" tabindex="-1"></a>  tragamonedas <span class="ot">&lt;-</span> simbolos[simbolos <span class="sc">!=</span> <span class="st">&quot;DD&quot;</span>]</span>
<span id="cb374-11"><a href="loops.html#cb374-11" aria-hidden="true" tabindex="-1"></a>  iguales <span class="ot">&lt;-</span> <span class="fu">length</span>(<span class="fu">unique</span>(tragamonedas)) <span class="sc">==</span> <span class="dv">1</span></span>
<span id="cb374-12"><a href="loops.html#cb374-12" aria-hidden="true" tabindex="-1"></a>  barras <span class="ot">&lt;-</span> tragamonedas <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;B&quot;</span>, <span class="st">&quot;BB&quot;</span>, <span class="st">&quot;BBB&quot;</span>)</span>
<span id="cb374-13"><a href="loops.html#cb374-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb374-14"><a href="loops.html#cb374-14" aria-hidden="true" tabindex="-1"></a>  <span class="co"># asignar premio</span></span>
<span id="cb374-15"><a href="loops.html#cb374-15" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (diamantes <span class="sc">==</span> <span class="dv">3</span>) {</span>
<span id="cb374-16"><a href="loops.html#cb374-16" aria-hidden="true" tabindex="-1"></a>    premio <span class="ot">&lt;-</span> <span class="dv">100</span></span>
<span id="cb374-17"><a href="loops.html#cb374-17" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (iguales) {</span>
<span id="cb374-18"><a href="loops.html#cb374-18" aria-hidden="true" tabindex="-1"></a>    pagos <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;7&quot;</span> <span class="ot">=</span> <span class="dv">80</span>, <span class="st">&quot;BBB&quot;</span> <span class="ot">=</span> <span class="dv">40</span>, <span class="st">&quot;BB&quot;</span> <span class="ot">=</span> <span class="dv">25</span>,</span>
<span id="cb374-19"><a href="loops.html#cb374-19" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;B&quot;</span> <span class="ot">=</span> <span class="dv">10</span>, <span class="st">&quot;C&quot;</span> <span class="ot">=</span> <span class="dv">10</span>, <span class="st">&quot;0&quot;</span> <span class="ot">=</span> <span class="dv">0</span>)</span>
<span id="cb374-20"><a href="loops.html#cb374-20" aria-hidden="true" tabindex="-1"></a>    premio <span class="ot">&lt;-</span> <span class="fu">unname</span>(pagos[tragamonedas[<span class="dv">1</span>]])</span>
<span id="cb374-21"><a href="loops.html#cb374-21" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (<span class="fu">all</span>(barras)) {</span>
<span id="cb374-22"><a href="loops.html#cb374-22" aria-hidden="true" tabindex="-1"></a>    premio <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb374-23"><a href="loops.html#cb374-23" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (cerezas <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb374-24"><a href="loops.html#cb374-24" aria-hidden="true" tabindex="-1"></a>    <span class="co"># diamantes cuentan como cerezas</span></span>
<span id="cb374-25"><a href="loops.html#cb374-25" aria-hidden="true" tabindex="-1"></a>    <span class="co"># siempre y cuando haya una cereza real</span></span>
<span id="cb374-26"><a href="loops.html#cb374-26" aria-hidden="true" tabindex="-1"></a>    premio <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">2</span>, <span class="dv">5</span>)[cerezas <span class="sc">+</span> diamantes <span class="sc">+</span> <span class="dv">1</span>]</span>
<span id="cb374-27"><a href="loops.html#cb374-27" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb374-28"><a href="loops.html#cb374-28" aria-hidden="true" tabindex="-1"></a>    premio <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb374-29"><a href="loops.html#cb374-29" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb374-30"><a href="loops.html#cb374-30" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb374-31"><a href="loops.html#cb374-31" aria-hidden="true" tabindex="-1"></a>  <span class="co"># duplicar por cada diamante</span></span>
<span id="cb374-32"><a href="loops.html#cb374-32" aria-hidden="true" tabindex="-1"></a>  premio <span class="sc">*</span> <span class="dv">2</span><span class="sc">^</span>diamantes</span>
<span id="cb374-33"><a href="loops.html#cb374-33" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p><strong>Ejercicio 12.7 (Calcular el Valor Esperado)</strong> Calcule el valor esperado de la máquina tragamonedas cuando usa la nueva función <code>puntuacion</code>. Puede usar el data frame <code>combos</code> existente, pero necesitará crear un bucle <code>for</code> para recalcular <code>combos$premio</code>.</p>
<p>Para actualizar el valor esperado, simplemente actualice <code>combos$premio</code>:</p>
<div class="sourceCode" id="cb375"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb375-1"><a href="loops.html#cb375-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(combos)) {</span>
<span id="cb375-2"><a href="loops.html#cb375-2" aria-hidden="true" tabindex="-1"></a>  simbolos <span class="ot">&lt;-</span> <span class="fu">c</span>(combos[i, <span class="dv">1</span>], combos[i, <span class="dv">2</span>], combos[i, <span class="dv">3</span>])</span>
<span id="cb375-3"><a href="loops.html#cb375-3" aria-hidden="true" tabindex="-1"></a>  combos<span class="sc">$</span>premio[i] <span class="ot">&lt;-</span> <span class="fu">puntuacion</span>(simbolos)</span>
<span id="cb375-4"><a href="loops.html#cb375-4" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Luego vuelva a calcular el valor esperado:</p>
<div class="sourceCode" id="cb376"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb376-1"><a href="loops.html#cb376-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(combos<span class="sc">$</span>premio <span class="sc">*</span> combos<span class="sc">$</span>prob)</span>
<span id="cb376-2"><a href="loops.html#cb376-2" aria-hidden="true" tabindex="-1"></a><span class="do">## 0.934356</span></span></code></pre></div>
<p>Este resultado justifica la afirmación del fabricante. En todo caso, las máquinas tragamonedas parecen más generosas de lo que dijo el fabricante.</p>
</div>
<div id="bucles-while" class="section level2 hasAnchor" number="12.4">
<h2><span class="header-section-number">12.4</span> Bucles while<a href="loops.html#bucles-while" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>R tiene dos compañeros del bucle <code>for</code>: el bucle <code>while</code> y el bucle <code>repeat</code>. Un bucle <code>while</code> vuelve a ejecutar un fragmento <em>mientras</em> una determinada condición permanece <code>TRUE</code>. Para crear un bucle <code>while</code>, siga <code>while</code> por una condición y un fragmento de código, como este:</p>
<div class="sourceCode" id="cb377"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb377-1"><a href="loops.html#cb377-1" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> (condición) {</span>
<span id="cb377-2"><a href="loops.html#cb377-2" aria-hidden="true" tabindex="-1"></a>  código</span>
<span id="cb377-3"><a href="loops.html#cb377-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p><code>while</code> volverá a ejecutar <code>condición</code>, que debería ser una prueba lógica, al comienzo de cada ciclo. Si <code>condición</code> se evalúa como <code>TRUE</code>, <code>while</code> ejecutará el código entre sus llaves. Si <code>condición</code> se evalúa como <code>FALSE</code>, <code>while</code> finalizará el ciclo.</p>
<p>¿Por qué la <code>condición</code> podría cambiar de <code>TRUE</code> a <code>FALSE</code>? Presumiblemente porque el código dentro de su ciclo ha cambiado si la condición sigue siendo <code>TRUE</code>. Si el código no tiene relación con la condición, se ejecutará un ciclo <code>while</code> hasta que lo detenga. Así que ten cuidado. Puede detener un bucle <code>while</code> pulsando Escape o haciendo clic en el icono de señal de alto en la parte superior del panel de la consola de RStudio. El icono aparecerá una vez que el ciclo comience a ejecutarse.</p>
<p>Al igual que los bucles <code>for</code>, los bucles <code>while</code> no devuelven un resultado, por lo que debe pensar en lo que quiere que devuelva el bucle y guardarlo en un objeto durante el bucle.</p>
<p>Puede usar bucles <code>while</code> para hacer cosas que requieran un número variable de iteraciones, como calcular cuánto tiempo se tarda en ir a la quiebra jugando tragamonedas (como se indica a continuación). Sin embargo, en la práctica, los bucles <code>while</code> son mucho menos comunes que los bucles <code>for</code> en R:</p>
<div class="sourceCode" id="cb378"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb378-1"><a href="loops.html#cb378-1" aria-hidden="true" tabindex="-1"></a>jugadas_hasta_quiebra <span class="ot">&lt;-</span> <span class="cf">function</span>(empezar_con) {</span>
<span id="cb378-2"><a href="loops.html#cb378-2" aria-hidden="true" tabindex="-1"></a>  efectivo <span class="ot">&lt;-</span> empezar_con</span>
<span id="cb378-3"><a href="loops.html#cb378-3" aria-hidden="true" tabindex="-1"></a>  n <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb378-4"><a href="loops.html#cb378-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">while</span> (efectivo <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb378-5"><a href="loops.html#cb378-5" aria-hidden="true" tabindex="-1"></a>    efectivo <span class="ot">&lt;-</span> efectivo <span class="sc">-</span> <span class="dv">1</span> <span class="sc">+</span> <span class="fu">play</span>()</span>
<span id="cb378-6"><a href="loops.html#cb378-6" aria-hidden="true" tabindex="-1"></a>    n <span class="ot">&lt;-</span> n <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb378-7"><a href="loops.html#cb378-7" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb378-8"><a href="loops.html#cb378-8" aria-hidden="true" tabindex="-1"></a>  n</span>
<span id="cb378-9"><a href="loops.html#cb378-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb378-10"><a href="loops.html#cb378-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb378-11"><a href="loops.html#cb378-11" aria-hidden="true" tabindex="-1"></a><span class="fu">jugadas_hasta_quiebra</span>(<span class="dv">100</span>)</span>
<span id="cb378-12"><a href="loops.html#cb378-12" aria-hidden="true" tabindex="-1"></a><span class="do">## 260</span></span></code></pre></div>
</div>
<div id="bucles-repeat" class="section level2 hasAnchor" number="12.5">
<h2><span class="header-section-number">12.5</span> Bucles repeat<a href="loops.html#bucles-repeat" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Los bucles <code>repeat</code> son incluso más básicos que los bucles <code>while</code>. Repetirán un fragmento de código hasta que les digas que se detengan (pulsando Escape) o hasta que encuentren el comando <code>break</code>, que detendrá el ciclo.</p>
<p>Puedes usar un bucle <code>repeat</code> para recrear <code>jugadas_hasta_quiebra</code>, mi función que simula cuánto tiempo lleva perder dinero mientras juegas tragamonedas:</p>
<div class="sourceCode" id="cb379"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb379-1"><a href="loops.html#cb379-1" aria-hidden="true" tabindex="-1"></a>jugadas_hasta_quiebra <span class="ot">&lt;-</span> <span class="cf">function</span>(empezar_con) {</span>
<span id="cb379-2"><a href="loops.html#cb379-2" aria-hidden="true" tabindex="-1"></a>  efectivo <span class="ot">&lt;-</span> empezar_con</span>
<span id="cb379-3"><a href="loops.html#cb379-3" aria-hidden="true" tabindex="-1"></a>  n <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb379-4"><a href="loops.html#cb379-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">repeat</span> {</span>
<span id="cb379-5"><a href="loops.html#cb379-5" aria-hidden="true" tabindex="-1"></a>    efectivo <span class="ot">&lt;-</span> efectivo <span class="sc">-</span> <span class="dv">1</span> <span class="sc">+</span> <span class="fu">play</span>()</span>
<span id="cb379-6"><a href="loops.html#cb379-6" aria-hidden="true" tabindex="-1"></a>    n <span class="ot">&lt;-</span> n <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb379-7"><a href="loops.html#cb379-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (efectivo <span class="sc">&lt;=</span> <span class="dv">0</span>) {</span>
<span id="cb379-8"><a href="loops.html#cb379-8" aria-hidden="true" tabindex="-1"></a>      <span class="cf">break</span></span>
<span id="cb379-9"><a href="loops.html#cb379-9" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb379-10"><a href="loops.html#cb379-10" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb379-11"><a href="loops.html#cb379-11" aria-hidden="true" tabindex="-1"></a>  n</span>
<span id="cb379-12"><a href="loops.html#cb379-12" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb379-13"><a href="loops.html#cb379-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb379-14"><a href="loops.html#cb379-14" aria-hidden="true" tabindex="-1"></a><span class="fu">jugadas_hasta_quiebra</span>(<span class="dv">100</span>)</span>
<span id="cb379-15"><a href="loops.html#cb379-15" aria-hidden="true" tabindex="-1"></a><span class="do">## 237</span></span></code></pre></div>
</div>
<div id="resumen-8" class="section level2 hasAnchor" number="12.6">
<h2><span class="header-section-number">12.6</span> Resumen<a href="loops.html#resumen-8" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Puede repetir tareas en R con bucles <code>for</code>, <code>while</code> y <code>repeat</code>. Para usar <code>for</code>, dale un fragmento de código para ejecutar y un conjunto de objetos para recorrer. <code>for</code> ejecutará el fragmento de código una vez para cada objeto. Si desea guardar la salida de su bucle, puede asignarlo a un objeto que existe fuera del bucle.</p>
<p>La repetición juega un papel importante en la ciencia de datos. Es la base para la simulación, así como para las estimaciones de varianza y probabilidad. Los bucles no son la única forma de crear repeticiones en R (considere <code>replicate</code> por ejemplo), pero son una de las formas más populares.</p>
<p>Desafortunadamente, los bucles en R a veces pueden ser más lentos que los bucles en otros idiomas. Como resultado, los bucles de R tienen mala reputación. Esta reputación no es del todo merecida, pero resalta un tema importante. La velocidad es esencial para el análisis de datos. Cuando su código se ejecuta rápido, puede trabajar con datos más grandes y hacer más antes de que se le acabe el tiempo o la potencia computacional. <a href="speed.html#speed">Velocidad</a> te enseñará cómo escribir bucles <code>for</code> rápidos y código rápido en general con R. Allí, aprenderás a escribir código vectorizado, un estilo de código ultrarrápido que aprovecha todas las fortalezas de R.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="s3.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="speed.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/davidrsch/hopres/edit/main/loops.rmd",
"text": "Editar"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
