<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>11 S3 | Programación práctica con R</title>
  <meta name="description" content="Este libro le enseñará cómo programar en R, con ejemplos prácticos. Lo escribí para personas que no son programadores para proporcionar una introducción amigable al lenguaje R. Aprenderá a cargar datos, ensamblar y desensamblar objetos de datos, navegar por el sistema de entorno de R, escribir sus propias funciones y utilizar todas las herramientas de programación de R. A lo largo del libro, utilizará sus nuevas habilidades para resolver problemas prácticos de ciencia de datos." />
  <meta name="generator" content="bookdown 0.31 and GitBook 2.6.7" />

  <meta property="og:title" content="11 S3 | Programación práctica con R" />
  <meta property="og:type" content="book" />
  <meta property="og:image" content="https://github.com/davidrsch/hopres/cover.png" />
  <meta property="og:description" content="Este libro le enseñará cómo programar en R, con ejemplos prácticos. Lo escribí para personas que no son programadores para proporcionar una introducción amigable al lenguaje R. Aprenderá a cargar datos, ensamblar y desensamblar objetos de datos, navegar por el sistema de entorno de R, escribir sus propias funciones y utilizar todas las herramientas de programación de R. A lo largo del libro, utilizará sus nuevas habilidades para resolver problemas prácticos de ciencia de datos." />
  <meta name="github-repo" content="davidrsch/hopres" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="11 S3 | Programación práctica con R" />
  
  <meta name="twitter:description" content="Este libro le enseñará cómo programar en R, con ejemplos prácticos. Lo escribí para personas que no son programadores para proporcionar una introducción amigable al lenguaje R. Aprenderá a cargar datos, ensamblar y desensamblar objetos de datos, navegar por el sistema de entorno de R, escribir sus propias funciones y utilizar todas las herramientas de programación de R. A lo largo del libro, utilizará sus nuevas habilidades para resolver problemas prácticos de ciencia de datos." />
  <meta name="twitter:image" content="https://github.com/davidrsch/hopres/cover.png" />

<meta name="author" content="Garrett Grolemund" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="programs.html"/>
<link rel="next" href="loops.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="hopr.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><strong><a href="./">Programación práctica con R</a></strong></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Bienvenido</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#sobre-la-traducción"><i class="fa fa-check"></i>Sobre la traducción</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#sobre-la-versión-original-en-inglés"><i class="fa fa-check"></i>Sobre la versión original en inglés</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="prefacio.html"><a href="prefacio.html"><i class="fa fa-check"></i>Prefacio</a>
<ul>
<li class="chapter" data-level="" data-path="prefacio.html"><a href="prefacio.html#convenciones-usadas-en-este-libro"><i class="fa fa-check"></i>Convenciones Usadas en Este Libro</a></li>
<li class="chapter" data-level="" data-path="prefacio.html"><a href="prefacio.html#reconocimientos"><i class="fa fa-check"></i>Reconocimientos</a></li>
</ul></li>
<li class="part"><span><b>I Parte 1</b></span></li>
<li class="chapter" data-level="1" data-path="dice.html"><a href="dice.html"><i class="fa fa-check"></i><b>1</b> Proyecto 1: Dados Ponderados</a></li>
<li class="chapter" data-level="2" data-path="Básico.html"><a href="Básico.html"><i class="fa fa-check"></i><b>2</b> Lo Más Básico</a>
<ul>
<li class="chapter" data-level="2.1" data-path="Básico.html"><a href="Básico.html#la-interfaz-de-usuario-de-r"><i class="fa fa-check"></i><b>2.1</b> La Interfaz de Usuario de R</a></li>
<li class="chapter" data-level="2.2" data-path="Básico.html"><a href="Básico.html#objetos"><i class="fa fa-check"></i><b>2.2</b> Objetos</a></li>
<li class="chapter" data-level="2.3" data-path="Básico.html"><a href="Básico.html#funciones"><i class="fa fa-check"></i><b>2.3</b> Funciones</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="Básico.html"><a href="Básico.html#muestra-con-reemplazo"><i class="fa fa-check"></i><b>2.3.1</b> Muestra con reemplazo</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="Básico.html"><a href="Básico.html#Escribir-funciones"><i class="fa fa-check"></i><b>2.4</b> Escribiendo Sus Propias Funciones</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="Básico.html"><a href="Básico.html#el-constructor-de-funciones"><i class="fa fa-check"></i><b>2.4.1</b> El Constructor de Funciones</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="Básico.html"><a href="Básico.html#argumentos"><i class="fa fa-check"></i><b>2.5</b> Argumentos</a></li>
<li class="chapter" data-level="2.6" data-path="Básico.html"><a href="Básico.html#scripts"><i class="fa fa-check"></i><b>2.6</b> Scripts</a></li>
<li class="chapter" data-level="2.7" data-path="Básico.html"><a href="Básico.html#resumen"><i class="fa fa-check"></i><b>2.7</b> Resumen</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="packages.html"><a href="packages.html"><i class="fa fa-check"></i><b>3</b> Paquetes y páginas de ayuda</a>
<ul>
<li class="chapter" data-level="3.1" data-path="packages.html"><a href="packages.html#paquetes"><i class="fa fa-check"></i><b>3.1</b> Paquetes</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="packages.html"><a href="packages.html#install.packages"><i class="fa fa-check"></i><b>3.1.1</b> install.packages</a></li>
<li class="chapter" data-level="3.1.2" data-path="packages.html"><a href="packages.html#library"><i class="fa fa-check"></i><b>3.1.2</b> library</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="packages.html"><a href="packages.html#obteniendo-ayuda-con-las-páginas-de-ayuda"><i class="fa fa-check"></i><b>3.2</b> Obteniendo Ayuda con las Páginas de Ayuda</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="packages.html"><a href="packages.html#partes-de-una-página-de-ayuda"><i class="fa fa-check"></i><b>3.2.1</b> Partes de una Página de Ayuda</a></li>
<li class="chapter" data-level="3.2.2" data-path="packages.html"><a href="packages.html#obteniendo-más-ayuda"><i class="fa fa-check"></i><b>3.2.2</b> Obteniendo Más Ayuda</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="packages.html"><a href="packages.html#resumen-1"><i class="fa fa-check"></i><b>3.3</b> Resumen</a></li>
<li class="chapter" data-level="3.4" data-path="packages.html"><a href="packages.html#resumen-del-proyecto-1"><i class="fa fa-check"></i><b>3.4</b> Resumen del Proyecto 1</a></li>
</ul></li>
<li class="part"><span><b>II Parte 2</b></span></li>
<li class="chapter" data-level="4" data-path="cards.html"><a href="cards.html"><i class="fa fa-check"></i><b>4</b> Proyecto 2: Baraja de Cartas</a></li>
<li class="chapter" data-level="5" data-path="objects.html"><a href="objects.html"><i class="fa fa-check"></i><b>5</b> Objectos de R</a>
<ul>
<li class="chapter" data-level="5.1" data-path="objects.html"><a href="objects.html#vectores-atómicos"><i class="fa fa-check"></i><b>5.1</b> Vectores Atómicos</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="objects.html"><a href="objects.html#dobles"><i class="fa fa-check"></i><b>5.1.1</b> Dobles</a></li>
<li class="chapter" data-level="5.1.2" data-path="objects.html"><a href="objects.html#enteros"><i class="fa fa-check"></i><b>5.1.2</b> Enteros</a></li>
<li class="chapter" data-level="5.1.3" data-path="objects.html"><a href="objects.html#caracteres"><i class="fa fa-check"></i><b>5.1.3</b> Caracteres</a></li>
<li class="chapter" data-level="5.1.4" data-path="objects.html"><a href="objects.html#lógicos"><i class="fa fa-check"></i><b>5.1.4</b> Lógicos</a></li>
<li class="chapter" data-level="5.1.5" data-path="objects.html"><a href="objects.html#complejo-y-sin-procesar"><i class="fa fa-check"></i><b>5.1.5</b> Complejo y Sin Procesar</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="objects.html"><a href="objects.html#attributes"><i class="fa fa-check"></i><b>5.2</b> Atributos</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="objects.html"><a href="objects.html#names"><i class="fa fa-check"></i><b>5.2.1</b> Nombres</a></li>
<li class="chapter" data-level="5.2.2" data-path="objects.html"><a href="objects.html#dimensiones"><i class="fa fa-check"></i><b>5.2.2</b> Dimensiones</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="objects.html"><a href="objects.html#matrices"><i class="fa fa-check"></i><b>5.3</b> Matrices</a></li>
<li class="chapter" data-level="5.4" data-path="objects.html"><a href="objects.html#arreglos"><i class="fa fa-check"></i><b>5.4</b> Arreglos</a></li>
<li class="chapter" data-level="5.5" data-path="objects.html"><a href="objects.html#clases"><i class="fa fa-check"></i><b>5.5</b> Clases</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="objects.html"><a href="objects.html#fechas-y-horarios"><i class="fa fa-check"></i><b>5.5.1</b> Fechas y Horarios</a></li>
<li class="chapter" data-level="5.5.2" data-path="objects.html"><a href="objects.html#factores"><i class="fa fa-check"></i><b>5.5.2</b> Factores</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="objects.html"><a href="objects.html#coerción"><i class="fa fa-check"></i><b>5.6</b> Coerción</a></li>
<li class="chapter" data-level="5.7" data-path="objects.html"><a href="objects.html#listas"><i class="fa fa-check"></i><b>5.7</b> Listas</a></li>
<li class="chapter" data-level="5.8" data-path="objects.html"><a href="objects.html#data-frames"><i class="fa fa-check"></i><b>5.8</b> Data Frames</a></li>
<li class="chapter" data-level="5.9" data-path="objects.html"><a href="objects.html#loading"><i class="fa fa-check"></i><b>5.9</b> Cargar Datos</a></li>
<li class="chapter" data-level="5.10" data-path="objects.html"><a href="objects.html#guardar-datos"><i class="fa fa-check"></i><b>5.10</b> Guardar Datos</a></li>
<li class="chapter" data-level="5.11" data-path="objects.html"><a href="objects.html#resumen-2"><i class="fa fa-check"></i><b>5.11</b> Resumen</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="notation.html"><a href="notation.html"><i class="fa fa-check"></i><b>6</b> Notación de R</a>
<ul>
<li class="chapter" data-level="6.1" data-path="notation.html"><a href="notation.html#selección-de-valores"><i class="fa fa-check"></i><b>6.1</b> Selección de Valores</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="notation.html"><a href="notation.html#números-enteros-positivos"><i class="fa fa-check"></i><b>6.1.1</b> Números Enteros Positivos</a></li>
<li class="chapter" data-level="6.1.2" data-path="notation.html"><a href="notation.html#números-enteros-negativos"><i class="fa fa-check"></i><b>6.1.2</b> Números Enteros Negativos</a></li>
<li class="chapter" data-level="6.1.3" data-path="notation.html"><a href="notation.html#cero"><i class="fa fa-check"></i><b>6.1.3</b> Cero</a></li>
<li class="chapter" data-level="6.1.4" data-path="notation.html"><a href="notation.html#espacios-en-blanco"><i class="fa fa-check"></i><b>6.1.4</b> Espacios en Blanco</a></li>
<li class="chapter" data-level="6.1.5" data-path="notation.html"><a href="notation.html#logic"><i class="fa fa-check"></i><b>6.1.5</b> Valores Lógicos</a></li>
<li class="chapter" data-level="6.1.6" data-path="notation.html"><a href="notation.html#nombres"><i class="fa fa-check"></i><b>6.1.6</b> Nombres</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="notation.html"><a href="notation.html#repartir-una-carta"><i class="fa fa-check"></i><b>6.2</b> Repartir una Carta</a></li>
<li class="chapter" data-level="6.3" data-path="notation.html"><a href="notation.html#barajar-el-mazo"><i class="fa fa-check"></i><b>6.3</b> Barajar el Mazo</a></li>
<li class="chapter" data-level="6.4" data-path="notation.html"><a href="notation.html#signos-de-dólar-y-corchetes-dobles"><i class="fa fa-check"></i><b>6.4</b> Signos de Dólar y Corchetes Dobles</a></li>
<li class="chapter" data-level="6.5" data-path="notation.html"><a href="notation.html#resumen-3"><i class="fa fa-check"></i><b>6.5</b> Resumen</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="modify.html"><a href="modify.html"><i class="fa fa-check"></i><b>7</b> Modificación de Valores</a>
<ul>
<li class="chapter" data-level="7.0.1" data-path="modify.html"><a href="modify.html#cambio-de-valores-en-el-lugar"><i class="fa fa-check"></i><b>7.0.1</b> Cambio de Valores en el Lugar</a></li>
<li class="chapter" data-level="7.0.2" data-path="modify.html"><a href="modify.html#subconjunto-lógico"><i class="fa fa-check"></i><b>7.0.2</b> Subconjunto Lógico</a></li>
<li class="chapter" data-level="7.0.3" data-path="modify.html"><a href="modify.html#missing"><i class="fa fa-check"></i><b>7.0.3</b> Información Faltante</a></li>
<li class="chapter" data-level="7.0.4" data-path="modify.html"><a href="modify.html#resumen-4"><i class="fa fa-check"></i><b>7.0.4</b> Resumen</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="environment.html"><a href="environment.html"><i class="fa fa-check"></i><b>8</b> Entornos</a>
<ul>
<li class="chapter" data-level="8.1" data-path="environment.html"><a href="environment.html#entornos"><i class="fa fa-check"></i><b>8.1</b> Entornos</a></li>
<li class="chapter" data-level="8.2" data-path="environment.html"><a href="environment.html#trabajar-con-entornos"><i class="fa fa-check"></i><b>8.2</b> Trabajar con Entornos</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="environment.html"><a href="environment.html#el-entorno-activo"><i class="fa fa-check"></i><b>8.2.1</b> El Entorno Activo</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="environment.html"><a href="environment.html#reglas-de-alcance"><i class="fa fa-check"></i><b>8.3</b> Reglas de Alcance</a></li>
<li class="chapter" data-level="8.4" data-path="environment.html"><a href="environment.html#asignación"><i class="fa fa-check"></i><b>8.4</b> Asignación</a></li>
<li class="chapter" data-level="8.5" data-path="environment.html"><a href="environment.html#evaluación"><i class="fa fa-check"></i><b>8.5</b> Evaluación</a></li>
<li class="chapter" data-level="8.6" data-path="environment.html"><a href="environment.html#cierres"><i class="fa fa-check"></i><b>8.6</b> Cierres</a></li>
<li class="chapter" data-level="8.7" data-path="environment.html"><a href="environment.html#resumen-5"><i class="fa fa-check"></i><b>8.7</b> Resumen</a></li>
<li class="chapter" data-level="8.8" data-path="environment.html"><a href="environment.html#resumen-del-proyecto-2"><i class="fa fa-check"></i><b>8.8</b> Resumen del Proyecto 2</a></li>
</ul></li>
<li class="part"><span><b>III Parte 3</b></span></li>
<li class="chapter" data-level="9" data-path="slots.html"><a href="slots.html"><i class="fa fa-check"></i><b>9</b> Proyecto 3: Máquina Tragamonedas</a></li>
<li class="chapter" data-level="10" data-path="programs.html"><a href="programs.html"><i class="fa fa-check"></i><b>10</b> Programas</a>
<ul>
<li class="chapter" data-level="10.1" data-path="programs.html"><a href="programs.html#estrategia"><i class="fa fa-check"></i><b>10.1</b> Estrategia</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="programs.html"><a href="programs.html#pasos-secuenciales"><i class="fa fa-check"></i><b>10.1.1</b> Pasos Secuenciales</a></li>
<li class="chapter" data-level="10.1.2" data-path="programs.html"><a href="programs.html#casos-paralelos"><i class="fa fa-check"></i><b>10.1.2</b> Casos Paralelos</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="programs.html"><a href="programs.html#declaraciones-if"><i class="fa fa-check"></i><b>10.2</b> Declaraciones if</a></li>
<li class="chapter" data-level="10.3" data-path="programs.html"><a href="programs.html#declaraciones-else"><i class="fa fa-check"></i><b>10.3</b> Declaraciones else</a></li>
<li class="chapter" data-level="10.4" data-path="programs.html"><a href="programs.html#tablas-de-búsqueda"><i class="fa fa-check"></i><b>10.4</b> Tablas de Búsqueda</a></li>
<li class="chapter" data-level="10.5" data-path="programs.html"><a href="programs.html#comentarios-de-código"><i class="fa fa-check"></i><b>10.5</b> Comentarios de Código</a></li>
<li class="chapter" data-level="10.6" data-path="programs.html"><a href="programs.html#resumen-6"><i class="fa fa-check"></i><b>10.6</b> Resumen</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="s3.html"><a href="s3.html"><i class="fa fa-check"></i><b>11</b> S3</a>
<ul>
<li class="chapter" data-level="11.1" data-path="s3.html"><a href="s3.html#el-sistema-s3"><i class="fa fa-check"></i><b>11.1</b> El Sistema S3</a></li>
<li class="chapter" data-level="11.2" data-path="s3.html"><a href="s3.html#atributos"><i class="fa fa-check"></i><b>11.2</b> Atributos</a></li>
<li class="chapter" data-level="11.3" data-path="s3.html"><a href="s3.html#funciones-genéricas"><i class="fa fa-check"></i><b>11.3</b> Funciones Genéricas</a></li>
<li class="chapter" data-level="11.4" data-path="s3.html"><a href="s3.html#métodos"><i class="fa fa-check"></i><b>11.4</b> Métodos</a>
<ul>
<li class="chapter" data-level="11.4.1" data-path="s3.html"><a href="s3.html#selección-de-método"><i class="fa fa-check"></i><b>11.4.1</b> Selección de Método</a></li>
</ul></li>
<li class="chapter" data-level="11.5" data-path="s3.html"><a href="s3.html#clases-1"><i class="fa fa-check"></i><b>11.5</b> Clases</a></li>
<li class="chapter" data-level="11.6" data-path="s3.html"><a href="s3.html#s3-y-depuración"><i class="fa fa-check"></i><b>11.6</b> S3 y Depuración</a></li>
<li class="chapter" data-level="11.7" data-path="s3.html"><a href="s3.html#s4-y-r5"><i class="fa fa-check"></i><b>11.7</b> S4 y R5</a></li>
<li class="chapter" data-level="11.8" data-path="s3.html"><a href="s3.html#resumen-7"><i class="fa fa-check"></i><b>11.8</b> Resumen</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="loops.html"><a href="loops.html"><i class="fa fa-check"></i><b>12</b> Bucles</a>
<ul>
<li class="chapter" data-level="12.1" data-path="loops.html"><a href="loops.html#valores-esperados"><i class="fa fa-check"></i><b>12.1</b> Valores Esperados</a></li>
<li class="chapter" data-level="12.2" data-path="loops.html"><a href="loops.html#expand.grid"><i class="fa fa-check"></i><b>12.2</b> expand.grid</a></li>
<li class="chapter" data-level="12.3" data-path="loops.html"><a href="loops.html#bucles-for"><i class="fa fa-check"></i><b>12.3</b> Bucles for</a></li>
<li class="chapter" data-level="12.4" data-path="loops.html"><a href="loops.html#bucles-while"><i class="fa fa-check"></i><b>12.4</b> Bucles while</a></li>
<li class="chapter" data-level="12.5" data-path="loops.html"><a href="loops.html#bucles-repeat"><i class="fa fa-check"></i><b>12.5</b> Bucles repeat</a></li>
<li class="chapter" data-level="12.6" data-path="loops.html"><a href="loops.html#resumen-8"><i class="fa fa-check"></i><b>12.6</b> Resumen</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="speed.html"><a href="speed.html"><i class="fa fa-check"></i><b>13</b> Velocidad</a>
<ul>
<li class="chapter" data-level="13.1" data-path="speed.html"><a href="speed.html#código-vectorizado"><i class="fa fa-check"></i><b>13.1</b> Código Vectorizado</a></li>
<li class="chapter" data-level="13.2" data-path="speed.html"><a href="speed.html#cómo-escribir-código-vectorizado"><i class="fa fa-check"></i><b>13.2</b> Cómo Escribir Código Vectorizado</a></li>
<li class="chapter" data-level="13.3" data-path="speed.html"><a href="speed.html#cómo-escribir-bucles-for-rápidos-en-r"><i class="fa fa-check"></i><b>13.3</b> Cómo Escribir Bucles for Rápidos en R</a></li>
<li class="chapter" data-level="13.4" data-path="speed.html"><a href="speed.html#código-vectorizado-en-la-práctica"><i class="fa fa-check"></i><b>13.4</b> Código Vectorizado en la Práctica</a>
<ul>
<li class="chapter" data-level="13.4.1" data-path="speed.html"><a href="speed.html#bucles-vs-código-vectorizado"><i class="fa fa-check"></i><b>13.4.1</b> Bucles vs Código Vectorizado</a></li>
</ul></li>
<li class="chapter" data-level="13.5" data-path="speed.html"><a href="speed.html#resumen-9"><i class="fa fa-check"></i><b>13.5</b> Resumen</a></li>
<li class="chapter" data-level="13.6" data-path="speed.html"><a href="speed.html#resumen-del-proyecto-3"><i class="fa fa-check"></i><b>13.6</b> Resumen del Proyecto 3</a></li>
</ul></li>
<li class="appendix"><span><b>Apéndice</b></span></li>
<li class="chapter" data-level="A" data-path="starting.html"><a href="starting.html"><i class="fa fa-check"></i><b>A</b> Instalación de R y RStudio</a>
<ul>
<li class="chapter" data-level="A.1" data-path="starting.html"><a href="starting.html#cómo-descargar-e-instalar-r"><i class="fa fa-check"></i><b>A.1</b> Cómo descargar e instalar R</a>
<ul>
<li class="chapter" data-level="A.1.1" data-path="starting.html"><a href="starting.html#windows"><i class="fa fa-check"></i><b>A.1.1</b> Windows</a></li>
<li class="chapter" data-level="A.1.2" data-path="starting.html"><a href="starting.html#mac"><i class="fa fa-check"></i><b>A.1.2</b> Mac</a></li>
<li class="chapter" data-level="A.1.3" data-path="starting.html"><a href="starting.html#linux"><i class="fa fa-check"></i><b>A.1.3</b> Linux</a></li>
</ul></li>
<li class="chapter" data-level="A.2" data-path="starting.html"><a href="starting.html#usando-r"><i class="fa fa-check"></i><b>A.2</b> Usando R</a></li>
<li class="chapter" data-level="A.3" data-path="starting.html"><a href="starting.html#rstudio"><i class="fa fa-check"></i><b>A.3</b> RStudio</a></li>
<li class="chapter" data-level="A.4" data-path="starting.html"><a href="starting.html#abriendo-r"><i class="fa fa-check"></i><b>A.4</b> Abriendo R</a></li>
</ul></li>
<li class="chapter" data-level="B" data-path="packages2.html"><a href="packages2.html"><i class="fa fa-check"></i><b>B</b> Paquetes de R</a>
<ul>
<li class="chapter" data-level="B.1" data-path="packages2.html"><a href="packages2.html#instalando-paquetes"><i class="fa fa-check"></i><b>B.1</b> Instalando Paquetes</a></li>
<li class="chapter" data-level="B.2" data-path="packages2.html"><a href="packages2.html#cargando-paquetes"><i class="fa fa-check"></i><b>B.2</b> Cargando Paquetes</a></li>
</ul></li>
<li class="chapter" data-level="C" data-path="updating.html"><a href="updating.html"><i class="fa fa-check"></i><b>C</b> Actualizando R y sus Paquetes</a>
<ul>
<li class="chapter" data-level="C.1" data-path="updating.html"><a href="updating.html#paquetes-de-r"><i class="fa fa-check"></i><b>C.1</b> Paquetes de R</a></li>
</ul></li>
<li class="chapter" data-level="D" data-path="dataio.html"><a href="dataio.html"><i class="fa fa-check"></i><b>D</b> Cargar y Guardar Datos en R</a>
<ul>
<li class="chapter" data-level="D.1" data-path="dataio.html"><a href="dataio.html#conjuntos-de-datos-en-r-base"><i class="fa fa-check"></i><b>D.1</b> Conjuntos de Datos en R Base</a></li>
<li class="chapter" data-level="D.2" data-path="dataio.html"><a href="dataio.html#directorio-de-trabajo"><i class="fa fa-check"></i><b>D.2</b> Directorio de Trabajo</a></li>
<li class="chapter" data-level="D.3" data-path="dataio.html"><a href="dataio.html#archivos-de-texto-sin-formato"><i class="fa fa-check"></i><b>D.3</b> Archivos de Texto Sin Formato</a>
<ul>
<li class="chapter" data-level="D.3.1" data-path="dataio.html"><a href="dataio.html#read.table"><i class="fa fa-check"></i><b>D.3.1</b> read.table</a></li>
<li class="chapter" data-level="D.3.2" data-path="dataio.html"><a href="dataio.html#la-familia-read"><i class="fa fa-check"></i><b>D.3.2</b> La Familia read</a></li>
<li class="chapter" data-level="D.3.3" data-path="dataio.html"><a href="dataio.html#read.fwf"><i class="fa fa-check"></i><b>D.3.3</b> read.fwf</a></li>
<li class="chapter" data-level="D.3.4" data-path="dataio.html"><a href="dataio.html#links-html"><i class="fa fa-check"></i><b>D.3.4</b> Links HTML</a></li>
<li class="chapter" data-level="D.3.5" data-path="dataio.html"><a href="dataio.html#guardar-archivos-de-texto-sin-formato"><i class="fa fa-check"></i><b>D.3.5</b> Guardar Archivos de Texto Sin Formato</a></li>
<li class="chapter" data-level="D.3.6" data-path="dataio.html"><a href="dataio.html#comprimiendo-archivos"><i class="fa fa-check"></i><b>D.3.6</b> Comprimiendo Archivos</a></li>
</ul></li>
<li class="chapter" data-level="D.4" data-path="dataio.html"><a href="dataio.html#archivos-de-r"><i class="fa fa-check"></i><b>D.4</b> Archivos de R</a>
<ul>
<li class="chapter" data-level="D.4.1" data-path="dataio.html"><a href="dataio.html#guardar-archivos-de-r"><i class="fa fa-check"></i><b>D.4.1</b> Guardar archivos de R</a></li>
</ul></li>
<li class="chapter" data-level="D.5" data-path="dataio.html"><a href="dataio.html#hojas-de-cálculo-de-excel"><i class="fa fa-check"></i><b>D.5</b> Hojas de Cálculo de Excel</a>
<ul>
<li class="chapter" data-level="D.5.1" data-path="dataio.html"><a href="dataio.html#exportar-desde-excel"><i class="fa fa-check"></i><b>D.5.1</b> Exportar desde Excel</a></li>
<li class="chapter" data-level="D.5.2" data-path="dataio.html"><a href="dataio.html#copiar-y-pegar"><i class="fa fa-check"></i><b>D.5.2</b> Copiar y pegar</a></li>
<li class="chapter" data-level="D.5.3" data-path="dataio.html"><a href="dataio.html#xlconnect"><i class="fa fa-check"></i><b>D.5.3</b> XLConnect</a></li>
<li class="chapter" data-level="D.5.4" data-path="dataio.html"><a href="dataio.html#lectura-de-hojas-de-cálculo"><i class="fa fa-check"></i><b>D.5.4</b> Lectura de Hojas de Cálculo</a></li>
<li class="chapter" data-level="D.5.5" data-path="dataio.html"><a href="dataio.html#escribir-hojas-de-cálculo"><i class="fa fa-check"></i><b>D.5.5</b> Escribir Hojas de Cálculo</a></li>
</ul></li>
<li class="chapter" data-level="D.6" data-path="dataio.html"><a href="dataio.html#cargar-archivos-desde-otros-programas"><i class="fa fa-check"></i><b>D.6</b> Cargar Archivos desde Otros Programas</a>
<ul>
<li class="chapter" data-level="D.6.1" data-path="dataio.html"><a href="dataio.html#conexión-a-bases-de-datos"><i class="fa fa-check"></i><b>D.6.1</b> Conexión a bases de datos</a></li>
</ul></li>
<li class="chapter" data-level="D.7" data-path="dataio.html"><a href="dataio.html#actualización"><i class="fa fa-check"></i><b>D.7</b> Actualización</a></li>
</ul></li>
<li class="chapter" data-level="E" data-path="debug.html"><a href="debug.html"><i class="fa fa-check"></i><b>E</b> Depuración de Código de R</a>
<ul>
<li class="chapter" data-level="E.1" data-path="debug.html"><a href="debug.html#traceback"><i class="fa fa-check"></i><b>E.1</b> traceback</a></li>
<li class="chapter" data-level="E.2" data-path="debug.html"><a href="debug.html#browser"><i class="fa fa-check"></i><b>E.2</b> browser</a></li>
<li class="chapter" data-level="E.3" data-path="debug.html"><a href="debug.html#puntos-de-ruptura"><i class="fa fa-check"></i><b>E.3</b> Puntos de Ruptura</a></li>
<li class="chapter" data-level="E.4" data-path="debug.html"><a href="debug.html#debug-1"><i class="fa fa-check"></i><b>E.4</b> debug</a></li>
<li class="chapter" data-level="E.5" data-path="debug.html"><a href="debug.html#trace"><i class="fa fa-check"></i><b>E.5</b> trace</a></li>
<li class="chapter" data-level="E.6" data-path="debug.html"><a href="debug.html#recover"><i class="fa fa-check"></i><b>E.6</b> recover</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Programación práctica con R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="s3" class="section level1 hasAnchor" number="11">
<h1><span class="header-section-number">11</span> S3<a href="s3.html#s3" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Es posible que haya notado que los resultados de su máquina tragamonedas no se ven como prometí. Sugerí que la máquina tragamonedas mostraría sus resultados así:</p>
<div class="sourceCode" id="cb300"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb300-1"><a href="s3.html#cb300-1" aria-hidden="true" tabindex="-1"></a><span class="fu">play</span>()</span>
<span id="cb300-2"><a href="s3.html#cb300-2" aria-hidden="true" tabindex="-1"></a><span class="do">## 0 0 DD</span></span>
<span id="cb300-3"><a href="s3.html#cb300-3" aria-hidden="true" tabindex="-1"></a><span class="do">## $0</span></span></code></pre></div>
<p>Pero la máquina actual muestra sus resultados en un formato menos bonito:</p>
<div class="sourceCode" id="cb301"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb301-1"><a href="s3.html#cb301-1" aria-hidden="true" tabindex="-1"></a><span class="fu">play</span>()</span>
<span id="cb301-2"><a href="s3.html#cb301-2" aria-hidden="true" tabindex="-1"></a><span class="do">## &quot;0&quot;  &quot;0&quot; &quot;DD&quot; </span></span>
<span id="cb301-3"><a href="s3.html#cb301-3" aria-hidden="true" tabindex="-1"></a><span class="do">## 0</span></span></code></pre></div>
<p>Además, la máquina tragamonedas usa un truco para mostrar símbolos (llamamos <code>print</code> desde dentro de <code>play</code>). Como resultado, los símbolos no siguen la salida de su premio si lo guarda:</p>
<div class="sourceCode" id="cb302"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb302-1"><a href="s3.html#cb302-1" aria-hidden="true" tabindex="-1"></a>a_play <span class="ot">&lt;-</span> <span class="fu">play</span>()</span>
<span id="cb302-2"><a href="s3.html#cb302-2" aria-hidden="true" tabindex="-1"></a><span class="do">## &quot;B&quot; &quot;0&quot; &quot;B&quot; </span></span>
<span id="cb302-3"><a href="s3.html#cb302-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb302-4"><a href="s3.html#cb302-4" aria-hidden="true" tabindex="-1"></a>a_play</span>
<span id="cb302-5"><a href="s3.html#cb302-5" aria-hidden="true" tabindex="-1"></a><span class="do">## 0</span></span></code></pre></div>
<p>Puede solucionar ambos problemas con el sistema S3 de R.</p>
<div id="el-sistema-s3" class="section level2 hasAnchor" number="11.1">
<h2><span class="header-section-number">11.1</span> El Sistema S3<a href="s3.html#el-sistema-s3" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>S3 se refiere a un sistema de clases integrado en R. El sistema rige cómo R maneja objetos de diferentes clases. Ciertas funciones de R buscarán la clase S3 de un objeto y luego se comportarán de manera diferente en respuesta.</p>
<p>La función <code>print</code> es así. Cuando imprime un vector numérico, <code>print</code> mostrará un número:</p>
<div class="sourceCode" id="cb303"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb303-1"><a href="s3.html#cb303-1" aria-hidden="true" tabindex="-1"></a>num <span class="ot">&lt;-</span> <span class="dv">1000000000</span></span>
<span id="cb303-2"><a href="s3.html#cb303-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(num)</span>
<span id="cb303-3"><a href="s3.html#cb303-3" aria-hidden="true" tabindex="-1"></a><span class="do">## 1000000000</span></span></code></pre></div>
<p>Pero si le da ese número a la clase S3 <code>POSIXct</code> seguida de <code>POSIXt</code>, <code>print</code> mostrará una hora:</p>
<div class="sourceCode" id="cb304"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb304-1"><a href="s3.html#cb304-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(num) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;POSIXct&quot;</span>, <span class="st">&quot;POSIXt&quot;</span>)</span>
<span id="cb304-2"><a href="s3.html#cb304-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(num)</span>
<span id="cb304-3"><a href="s3.html#cb304-3" aria-hidden="true" tabindex="-1"></a><span class="do">## &quot;2001-09-08 19:46:40 CST&quot;</span></span></code></pre></div>
<p>Si usa objetos con clases, y lo hace, se encontrará con el sistema S3 de R. El comportamiento de S3 puede parecer extraño al principio, pero es fácil de predecir una vez que se familiariza con él.</p>
<p>El sistema S3 de R se basa en tres componentes: atributos (especialmente el atributo <code>class</code>), funciones genéricas y métodos.</p>
</div>
<div id="atributos" class="section level2 hasAnchor" number="11.2">
<h2><span class="header-section-number">11.2</span> Atributos<a href="s3.html#atributos" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>En <a href="objects.html#attributes">Atributos</a>, aprendió que muchos objetos de R vienen con atributos, piezas de información adicional a las que se les da un nombre y se agregan al objeto. Los atributos no afectan los valores del objeto, pero se adhieren al objeto como un tipo de metadatos que R puede usar para manejar el objeto. Por ejemplo, un data frame almacena sus nombres de fila y columna como atributos. Los data frame también almacenan su clase, <code>"data.frame"</code>, como un atributo.</p>
<p>Puede ver los atributos de un objeto con <code>attribute</code>. Si ejecuta <code>attribute</code> en el data frame <code>mazo</code> que creó en <a href="cards.html#cards">Proyecto 2: Baraja de Cartas</a>, verá:</p>
<div class="sourceCode" id="cb305"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb305-1"><a href="s3.html#cb305-1" aria-hidden="true" tabindex="-1"></a><span class="fu">attributes</span>(mazo)</span>
<span id="cb305-2"><a href="s3.html#cb305-2" aria-hidden="true" tabindex="-1"></a><span class="do">## $names</span></span>
<span id="cb305-3"><a href="s3.html#cb305-3" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &quot;cara&quot;  &quot;palo&quot;  &quot;valor&quot;</span></span>
<span id="cb305-4"><a href="s3.html#cb305-4" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb305-5"><a href="s3.html#cb305-5" aria-hidden="true" tabindex="-1"></a><span class="do">## $class</span></span>
<span id="cb305-6"><a href="s3.html#cb305-6" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &quot;data.frame&quot;</span></span>
<span id="cb305-7"><a href="s3.html#cb305-7" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb305-8"><a href="s3.html#cb305-8" aria-hidden="true" tabindex="-1"></a><span class="do">## $row.names</span></span>
<span id="cb305-9"><a href="s3.html#cb305-9" aria-hidden="true" tabindex="-1"></a><span class="do">##  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 </span></span>
<span id="cb305-10"><a href="s3.html#cb305-10" aria-hidden="true" tabindex="-1"></a><span class="do">## [20] 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36</span></span>
<span id="cb305-11"><a href="s3.html#cb305-11" aria-hidden="true" tabindex="-1"></a><span class="do">## [37] 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52</span></span></code></pre></div>
<p>R viene con muchas funciones auxiliares que le permiten establecer y acceder a los atributos más comunes utilizados en R. Ya conoce las funciones <code>names</code>, <code>dim</code> y <code>class</code>, cada una de las cuales funciona con un atributo con nombre homónimo. Sin embargo, R también tiene <code>row.names</code>, <code>levels</code> y muchas otras funciones auxiliares basadas en atributos. Puede utilizar cualquiera de estas funciones para recuperar el valor de un atributo:</p>
<div class="sourceCode" id="cb306"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb306-1"><a href="s3.html#cb306-1" aria-hidden="true" tabindex="-1"></a><span class="fu">row.names</span>(mazo)</span>
<span id="cb306-2"><a href="s3.html#cb306-2" aria-hidden="true" tabindex="-1"></a><span class="do">##  [1] &quot;1&quot;  &quot;2&quot;  &quot;3&quot;  &quot;4&quot;  &quot;5&quot;  &quot;6&quot;  &quot;7&quot;  &quot;8&quot;  &quot;9&quot;  &quot;10&quot; &quot;11&quot; &quot;12&quot; &quot;13&quot;</span></span>
<span id="cb306-3"><a href="s3.html#cb306-3" aria-hidden="true" tabindex="-1"></a><span class="do">## [14] &quot;14&quot; &quot;15&quot; &quot;16&quot; &quot;17&quot; &quot;18&quot; &quot;19&quot; &quot;20&quot; &quot;21&quot; &quot;22&quot; &quot;23&quot; &quot;24&quot; &quot;25&quot; &quot;26&quot;</span></span>
<span id="cb306-4"><a href="s3.html#cb306-4" aria-hidden="true" tabindex="-1"></a><span class="do">## [27] &quot;27&quot; &quot;28&quot; &quot;29&quot; &quot;30&quot; &quot;31&quot; &quot;32&quot; &quot;33&quot; &quot;34&quot; &quot;35&quot; &quot;36&quot; &quot;37&quot; &quot;38&quot; &quot;39&quot;</span></span>
<span id="cb306-5"><a href="s3.html#cb306-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [40] &quot;40&quot; &quot;41&quot; &quot;42&quot; &quot;43&quot; &quot;44&quot; &quot;45&quot; &quot;46&quot; &quot;47&quot; &quot;48&quot; &quot;49&quot; &quot;50&quot; &quot;51&quot; &quot;52&quot;</span></span></code></pre></div>
<p>o para cambiar el valor de un atributo:</p>
<div class="sourceCode" id="cb307"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb307-1"><a href="s3.html#cb307-1" aria-hidden="true" tabindex="-1"></a><span class="fu">row.names</span>(mazo) <span class="ot">&lt;-</span> <span class="dv">101</span><span class="sc">:</span><span class="dv">152</span></span></code></pre></div>
<p>o para dar a un objeto un atributo completamente nuevo:</p>
<div class="sourceCode" id="cb308"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb308-1"><a href="s3.html#cb308-1" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(mazo) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;level 1&quot;</span>, <span class="st">&quot;level 2&quot;</span>, <span class="st">&quot;level 3&quot;</span>)</span>
<span id="cb308-2"><a href="s3.html#cb308-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb308-3"><a href="s3.html#cb308-3" aria-hidden="true" tabindex="-1"></a><span class="fu">attributes</span>(mazo)</span>
<span id="cb308-4"><a href="s3.html#cb308-4" aria-hidden="true" tabindex="-1"></a><span class="do">## $names</span></span>
<span id="cb308-5"><a href="s3.html#cb308-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &quot;cara&quot;  &quot;palo&quot;  &quot;valor&quot;</span></span>
<span id="cb308-6"><a href="s3.html#cb308-6" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb308-7"><a href="s3.html#cb308-7" aria-hidden="true" tabindex="-1"></a><span class="do">## $class</span></span>
<span id="cb308-8"><a href="s3.html#cb308-8" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &quot;data.frame&quot;</span></span>
<span id="cb308-9"><a href="s3.html#cb308-9" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb308-10"><a href="s3.html#cb308-10" aria-hidden="true" tabindex="-1"></a><span class="do">## $row.names</span></span>
<span id="cb308-11"><a href="s3.html#cb308-11" aria-hidden="true" tabindex="-1"></a><span class="do">##  [1] 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117</span></span>
<span id="cb308-12"><a href="s3.html#cb308-12" aria-hidden="true" tabindex="-1"></a><span class="do">## [18] 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134</span></span>
<span id="cb308-13"><a href="s3.html#cb308-13" aria-hidden="true" tabindex="-1"></a><span class="do">## [35] 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151</span></span>
<span id="cb308-14"><a href="s3.html#cb308-14" aria-hidden="true" tabindex="-1"></a><span class="do">## [52] 152</span></span>
<span id="cb308-15"><a href="s3.html#cb308-15" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb308-16"><a href="s3.html#cb308-16" aria-hidden="true" tabindex="-1"></a><span class="do">## $levels</span></span>
<span id="cb308-17"><a href="s3.html#cb308-17" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &quot;level 1&quot; &quot;level 2&quot; &quot;level 3&quot;</span></span></code></pre></div>
<p>R es muy libre cuando se trata de atributos. Le permitirá agregar cualquier atributo que desee a un objeto (y luego generalmente los ignorará). La única vez que R se quejará es cuando una función necesita encontrar un atributo y no está allí.</p>
<p>Puede agregar cualquier atributo general a un objeto con <code>attr</code>; también puede usar <code>attr</code> para buscar el valor de cualquier atributo de un objeto. Veamos cómo funciona esto con <code>a_play</code>, el resultado de jugar nuestra máquina tragamonedas una vez:</p>
<div class="sourceCode" id="cb309"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb309-1"><a href="s3.html#cb309-1" aria-hidden="true" tabindex="-1"></a>a_play <span class="ot">&lt;-</span> <span class="fu">play</span>()</span>
<span id="cb309-2"><a href="s3.html#cb309-2" aria-hidden="true" tabindex="-1"></a>a_play</span>
<span id="cb309-3"><a href="s3.html#cb309-3" aria-hidden="true" tabindex="-1"></a><span class="do">## 0</span></span>
<span id="cb309-4"><a href="s3.html#cb309-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb309-5"><a href="s3.html#cb309-5" aria-hidden="true" tabindex="-1"></a><span class="fu">attributes</span>(a_play)</span>
<span id="cb309-6"><a href="s3.html#cb309-6" aria-hidden="true" tabindex="-1"></a><span class="do">## NULL</span></span></code></pre></div>
<p><code>attr</code> toma dos argumentos: un objeto de R y el nombre de un atributo (como una cadena de caracteres). Para darle al objeto de R un atributo del nombre especificado, guarde un valor en la salida de <code>attr</code>. Démosle a <code>a_play</code> un atributo llamado <code>simbolos</code> que contiene un vector de cadenas de caracteres:</p>
<div class="sourceCode" id="cb310"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb310-1"><a href="s3.html#cb310-1" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(a_play, <span class="st">&quot;simbolos&quot;</span>) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;B&quot;</span>, <span class="st">&quot;0&quot;</span>, <span class="st">&quot;B&quot;</span>)</span>
<span id="cb310-2"><a href="s3.html#cb310-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb310-3"><a href="s3.html#cb310-3" aria-hidden="true" tabindex="-1"></a><span class="fu">attributes</span>(a_play)</span>
<span id="cb310-4"><a href="s3.html#cb310-4" aria-hidden="true" tabindex="-1"></a><span class="do">## $simbolos</span></span>
<span id="cb310-5"><a href="s3.html#cb310-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &quot;B&quot; &quot;0&quot; &quot;B&quot;</span></span></code></pre></div>
<p>Para buscar el valor de cualquier atributo, dale a <code>attr</code> un objeto R y el nombre del atributo que te gustaría buscar:</p>
<div class="sourceCode" id="cb311"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb311-1"><a href="s3.html#cb311-1" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(a_play, <span class="st">&quot;simbolos&quot;</span>)</span>
<span id="cb311-2"><a href="s3.html#cb311-2" aria-hidden="true" tabindex="-1"></a><span class="do">## &quot;B&quot; &quot;0&quot; &quot;B&quot;</span></span></code></pre></div>
<p>Si asigna un atributo a un vector atómico, como <code>a_play</code>, R generalmente mostrará el atributo debajo de los valores del vector. Sin embargo, si el atributo cambia la clase del vector, R puede mostrar toda la información en el vector de una nueva forma (como vimos con los objetos <code>POSIXct</code>):</p>
<div class="sourceCode" id="cb312"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb312-1"><a href="s3.html#cb312-1" aria-hidden="true" tabindex="-1"></a>a_play</span>
<span id="cb312-2"><a href="s3.html#cb312-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 0</span></span>
<span id="cb312-3"><a href="s3.html#cb312-3" aria-hidden="true" tabindex="-1"></a><span class="do">## attr(,&quot;simbolos&quot;)</span></span>
<span id="cb312-4"><a href="s3.html#cb312-4" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &quot;B&quot; &quot;0&quot; &quot;B&quot;</span></span></code></pre></div>
<p>R generalmente ignorará los atributos de un objeto a menos que le des un nombre que busca una función de R, como <code>names</code> o <code>class</code>. Por ejemplo, R ignorará el atributo <code>simbolos</code> de <code>a_play</code> mientras manipulas <code>a_play</code>:</p>
<div class="sourceCode" id="cb313"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb313-1"><a href="s3.html#cb313-1" aria-hidden="true" tabindex="-1"></a>a_play <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb313-2"><a href="s3.html#cb313-2" aria-hidden="true" tabindex="-1"></a><span class="do">##  1</span></span>
<span id="cb313-3"><a href="s3.html#cb313-3" aria-hidden="true" tabindex="-1"></a><span class="do">## attr(,&quot;simbolos&quot;)</span></span>
<span id="cb313-4"><a href="s3.html#cb313-4" aria-hidden="true" tabindex="-1"></a><span class="do">##  &quot;B&quot; &quot;0&quot; &quot;B&quot;</span></span></code></pre></div>
<p><strong>Ejercicio 11.1 (Añade un Atributo)</strong> Modifique <code>play</code> para devolver un premio que contenga los símbolos asociados a él como un atributo denominado <code>simbolos</code>. Elimine la llamada redundante a <code>print(simbolos)</code>:</p>
<div class="sourceCode" id="cb314"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb314-1"><a href="s3.html#cb314-1" aria-hidden="true" tabindex="-1"></a>play <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb314-2"><a href="s3.html#cb314-2" aria-hidden="true" tabindex="-1"></a>  simbolos <span class="ot">&lt;-</span> <span class="fu">obt_simbolos</span>()</span>
<span id="cb314-3"><a href="s3.html#cb314-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(simbolos)</span>
<span id="cb314-4"><a href="s3.html#cb314-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">puntuacion</span>(simbolos)</span>
<span id="cb314-5"><a href="s3.html#cb314-5" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<div class="solution">
<p><span id="unlabeled-div-24" class="solution"><em>Solution</em>. </span>Puede crear una nueva versión de <code>play</code> capturando la salida de <code>puntuacion(simbolos)</code> y asignándole un atributo. <code>play</code> puede devolver la versión mejorada de la salida:</p>
</div>
<div class="sourceCode" id="cb315"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb315-1"><a href="s3.html#cb315-1" aria-hidden="true" tabindex="-1"></a>play <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb315-2"><a href="s3.html#cb315-2" aria-hidden="true" tabindex="-1"></a>  simbolos <span class="ot">&lt;-</span> <span class="fu">obt_simbolos</span>()</span>
<span id="cb315-3"><a href="s3.html#cb315-3" aria-hidden="true" tabindex="-1"></a>  premio <span class="ot">&lt;-</span> <span class="fu">puntuacion</span>(simbolos)</span>
<span id="cb315-4"><a href="s3.html#cb315-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">attr</span>(premio, <span class="st">&quot;simbolos&quot;</span>) <span class="ot">&lt;-</span> simbolos</span>
<span id="cb315-5"><a href="s3.html#cb315-5" aria-hidden="true" tabindex="-1"></a>  premio</span>
<span id="cb315-6"><a href="s3.html#cb315-6" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Ahora <code>play</code> devuelve tanto el premio como los símbolos asociados con el premio. Puede que los resultados no se vean bonitos, pero los símbolos se quedan con el premio cuando lo copiamos a un nuevo objeto. Podemos trabajar en ordenar la pantalla en un minuto:</p>
<div class="sourceCode" id="cb316"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb316-1"><a href="s3.html#cb316-1" aria-hidden="true" tabindex="-1"></a><span class="fu">play</span>()</span>
<span id="cb316-2"><a href="s3.html#cb316-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 0</span></span>
<span id="cb316-3"><a href="s3.html#cb316-3" aria-hidden="true" tabindex="-1"></a><span class="do">## attr(,&quot;simbolos&quot;)</span></span>
<span id="cb316-4"><a href="s3.html#cb316-4" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &quot;B&quot;  &quot;BB&quot; &quot;0&quot; </span></span>
<span id="cb316-5"><a href="s3.html#cb316-5" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb316-6"><a href="s3.html#cb316-6" aria-hidden="true" tabindex="-1"></a>b_play <span class="ot">&lt;-</span> <span class="fu">play</span>()</span>
<span id="cb316-7"><a href="s3.html#cb316-7" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb316-8"><a href="s3.html#cb316-8" aria-hidden="true" tabindex="-1"></a>b_play</span>
<span id="cb316-9"><a href="s3.html#cb316-9" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 0</span></span>
<span id="cb316-10"><a href="s3.html#cb316-10" aria-hidden="true" tabindex="-1"></a><span class="do">## attr(,&quot;simbolos&quot;)</span></span>
<span id="cb316-11"><a href="s3.html#cb316-11" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &quot;0&quot; &quot;B&quot; &quot;0&quot;</span></span></code></pre></div>
<p>También puede generar un premio y establecer sus atributos en un solo paso con la función <code>structure</code>. <code>structure</code> crea un objeto con un conjunto de atributos. El primer argumento de <code>structure</code> debe ser un objeto de R o un conjunto de valores, y los argumentos restantes deben ser atributos con nombre para que <code>structure</code> se agregue al objeto. Puede dar a estos argumentos cualquier nombre de argumento que desee. <code>structure</code> agregará los atributos al objeto bajo los nombres que proporcione como nombres de argumento:</p>
<div class="sourceCode" id="cb317"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb317-1"><a href="s3.html#cb317-1" aria-hidden="true" tabindex="-1"></a>play <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb317-2"><a href="s3.html#cb317-2" aria-hidden="true" tabindex="-1"></a>  simbolos <span class="ot">&lt;-</span> <span class="fu">get_simbolos</span>()</span>
<span id="cb317-3"><a href="s3.html#cb317-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">structure</span>(<span class="fu">puntuacion</span>(simbolos), <span class="at">simbolos =</span> simbolos)</span>
<span id="cb317-4"><a href="s3.html#cb317-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb317-5"><a href="s3.html#cb317-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-6"><a href="s3.html#cb317-6" aria-hidden="true" tabindex="-1"></a>c_play <span class="ot">&lt;-</span> <span class="fu">play</span>()</span>
<span id="cb317-7"><a href="s3.html#cb317-7" aria-hidden="true" tabindex="-1"></a>c_play</span>
<span id="cb317-8"><a href="s3.html#cb317-8" aria-hidden="true" tabindex="-1"></a><span class="do">##  0</span></span>
<span id="cb317-9"><a href="s3.html#cb317-9" aria-hidden="true" tabindex="-1"></a><span class="do">##  attr(,&quot;simbolos&quot;)</span></span>
<span id="cb317-10"><a href="s3.html#cb317-10" aria-hidden="true" tabindex="-1"></a><span class="do">##  &quot;0&quot;  &quot;BB&quot; &quot;B&quot; </span></span></code></pre></div>
<p>Ahora que su salida <code>play</code> contiene un atributo <code>simbolos</code>, ¿qué puede hacer con él? Puede escribir sus propias funciones que busquen y usen el atributo. Por ejemplo, la siguiente función buscará el atributo <code>simbolos</code> de <code>a_play</code> y lo usará para mostrar <code>a_play</code> de una manera bonita. Usaremos esta función para mostrar los resultados de nuestra tragamonedas, así que tomemos un momento para estudiar lo que hace:</p>
<div class="sourceCode" id="cb318"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb318-1"><a href="s3.html#cb318-1" aria-hidden="true" tabindex="-1"></a>mostrat_tragamoneda <span class="ot">&lt;-</span> <span class="cf">function</span>(premio){</span>
<span id="cb318-2"><a href="s3.html#cb318-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb318-3"><a href="s3.html#cb318-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># extraer simbolos</span></span>
<span id="cb318-4"><a href="s3.html#cb318-4" aria-hidden="true" tabindex="-1"></a>  simbolos <span class="ot">&lt;-</span> <span class="fu">attr</span>(premio, <span class="st">&quot;simbolos&quot;</span>)</span>
<span id="cb318-5"><a href="s3.html#cb318-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb318-6"><a href="s3.html#cb318-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># colapsar símbolos en una sola cadena de caracteres</span></span>
<span id="cb318-7"><a href="s3.html#cb318-7" aria-hidden="true" tabindex="-1"></a>  simbolos <span class="ot">&lt;-</span> <span class="fu">paste</span>(simbolos, <span class="at">collapse =</span> <span class="st">&quot; &quot;</span>)</span>
<span id="cb318-8"><a href="s3.html#cb318-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb318-9"><a href="s3.html#cb318-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># combinar símbolo con premio como una cadena de caracteres</span></span>
<span id="cb318-10"><a href="s3.html#cb318-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># \n es una secuencia de escape especial para una nueva línea (i.e. return or enter)</span></span>
<span id="cb318-11"><a href="s3.html#cb318-11" aria-hidden="true" tabindex="-1"></a>  texto <span class="ot">&lt;-</span> <span class="fu">paste</span>(simbolos, premio, <span class="at">sep =</span> <span class="st">&quot;</span><span class="sc">\n</span><span class="st">$&quot;</span>)</span>
<span id="cb318-12"><a href="s3.html#cb318-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb318-13"><a href="s3.html#cb318-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># mostrar cadena de caracteres en la consola sin comillas</span></span>
<span id="cb318-14"><a href="s3.html#cb318-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(texto)</span>
<span id="cb318-15"><a href="s3.html#cb318-15" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb318-16"><a href="s3.html#cb318-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb318-17"><a href="s3.html#cb318-17" aria-hidden="true" tabindex="-1"></a><span class="fu">mostrat_tragamoneda</span>(a_play)</span>
<span id="cb318-18"><a href="s3.html#cb318-18" aria-hidden="true" tabindex="-1"></a><span class="do">## B 0 B</span></span>
<span id="cb318-19"><a href="s3.html#cb318-19" aria-hidden="true" tabindex="-1"></a><span class="do">## $0</span></span></code></pre></div>
<p>La función espera un objeto como <code>a_play</code> que tiene tanto un valor numérico como un atributo de <code>simbolos</code>. La primera línea de la función buscará el valor del atributo <code>simbolos</code> y lo guardará como un objeto llamado <code>simbolos</code>. Hagamos un objeto <code>simbolos</code> de ejemplo para que podamos ver lo que hace el resto de la función. Podemos usar el atributo <code>simbolos</code> de <code>a_play</code> para hacer el trabajo. <code>simbolos</code> será un vector de cadenas de tres caracteres:</p>
<div class="sourceCode" id="cb319"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb319-1"><a href="s3.html#cb319-1" aria-hidden="true" tabindex="-1"></a>simbolos <span class="ot">&lt;-</span> <span class="fu">attr</span>(a_play, <span class="st">&quot;simbolos&quot;</span>)</span>
<span id="cb319-2"><a href="s3.html#cb319-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb319-3"><a href="s3.html#cb319-3" aria-hidden="true" tabindex="-1"></a>simbolos</span>
<span id="cb319-4"><a href="s3.html#cb319-4" aria-hidden="true" tabindex="-1"></a><span class="do">## &quot;B&quot; &quot;0&quot; &quot;B&quot;</span></span></code></pre></div>
<p>A continuación, <code>mostrat_tragamoneda</code> usa <code>paste</code> para colapsar las tres cadenas en <code>simbolos</code> en una cadena de un solo carácter. <code>paste</code> colapsa un vector de cadenas de caracteres en una sola cadena cuando le das el argumento <code>collapse</code>. <code>paste</code> usará el valor de <code>collapse</code> para separar las cadenas anteriormente distintas. Por lo tanto, <code>simbolos</code> se convierte en <code>B 0 B</code> las tres cadenas separadas por un espacio:</p>
<div class="sourceCode" id="cb320"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb320-1"><a href="s3.html#cb320-1" aria-hidden="true" tabindex="-1"></a>simbolos <span class="ot">&lt;-</span> <span class="fu">paste</span>(simbolos, <span class="at">collapse =</span> <span class="st">&quot; &quot;</span>)</span>
<span id="cb320-2"><a href="s3.html#cb320-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb320-3"><a href="s3.html#cb320-3" aria-hidden="true" tabindex="-1"></a>simbolos</span>
<span id="cb320-4"><a href="s3.html#cb320-4" aria-hidden="true" tabindex="-1"></a><span class="do">## &quot;B 0 B&quot;</span></span></code></pre></div>
<p>Nuestra función luego usa <code>paste</code> de una nueva forma para combinar <code>simbolos</code> con el valor de <code>premio</code>. <code>paste</code> combina objetos separados en una cadena de caracteres cuando le das un argumento <code>sep</code>. Por ejemplo, aquí <code>paste</code> combinará la cadena en <code>simbolos</code>, <code>B 0 B</code>, con el número en <code>premio</code>, 0. <code>paste</code> usará el valor del argumento <code>sep</code> para separar las entradas en el cadena nueva. Aquí, ese valor es <code>\n$</code>, por lo que nuestro resultado se verá como <code>"B 0 B\n$0"</code>:</p>
<div class="sourceCode" id="cb321"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb321-1"><a href="s3.html#cb321-1" aria-hidden="true" tabindex="-1"></a>premio <span class="ot">&lt;-</span> a_play</span>
<span id="cb321-2"><a href="s3.html#cb321-2" aria-hidden="true" tabindex="-1"></a>texto <span class="ot">&lt;-</span> <span class="fu">paste</span>(simbolos, premio, <span class="at">sep =</span> <span class="st">&quot;</span><span class="sc">\n</span><span class="st">$&quot;</span>)</span>
<span id="cb321-3"><a href="s3.html#cb321-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb321-4"><a href="s3.html#cb321-4" aria-hidden="true" tabindex="-1"></a>texto</span>
<span id="cb321-5"><a href="s3.html#cb321-5" aria-hidden="true" tabindex="-1"></a><span class="do">## &quot;B 0 B\n$0&quot;</span></span></code></pre></div>
<p>La última línea de <code>mostrat_tragamoneda</code> llama a <code>cat</code> en la nueva cadena. <code>cat</code> es como <code>print</code>; muestra su entrada en la línea de comando. Sin embargo, <code>cat</code> no encierra su salida entre comillas. <code>cat</code> también reemplaza cada <code>\n</code> con una nueva línea o salto de línea. El resultado es lo que vemos. Tenga en cuenta que se ve exactamente como sugerí que nuestra salida <code>play</code> debería verse en <a href="programs.html#programs">Programas</a>:</p>
<div class="sourceCode" id="cb322"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb322-1"><a href="s3.html#cb322-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(texto)</span>
<span id="cb322-2"><a href="s3.html#cb322-2" aria-hidden="true" tabindex="-1"></a><span class="do">## B 0 B</span></span>
<span id="cb322-3"><a href="s3.html#cb322-3" aria-hidden="true" tabindex="-1"></a><span class="do">## $0</span></span></code></pre></div>
<p>Puedes usar <code>mostrat_tragamoneda</code> para limpiar manualmente la salida de <code>play</code>:</p>
<div class="sourceCode" id="cb323"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb323-1"><a href="s3.html#cb323-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mostrat_tragamoneda</span>(<span class="fu">play</span>())</span>
<span id="cb323-2"><a href="s3.html#cb323-2" aria-hidden="true" tabindex="-1"></a><span class="do">## C B 0</span></span>
<span id="cb323-3"><a href="s3.html#cb323-3" aria-hidden="true" tabindex="-1"></a><span class="do">## $2</span></span>
<span id="cb323-4"><a href="s3.html#cb323-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb323-5"><a href="s3.html#cb323-5" aria-hidden="true" tabindex="-1"></a><span class="fu">mostrat_tragamoneda</span>(<span class="fu">play</span>())</span>
<span id="cb323-6"><a href="s3.html#cb323-6" aria-hidden="true" tabindex="-1"></a><span class="do">## 7 0 BB</span></span>
<span id="cb323-7"><a href="s3.html#cb323-7" aria-hidden="true" tabindex="-1"></a><span class="do">## $0</span></span></code></pre></div>
<p>Este método de limpieza de la salida requiere que intervengas manualmente en tu sesión de R (para llamar a <code>mostrat_tragamoneda</code>). Hay una función que puede usar para limpiar automáticamente la salida de <code>play</code> cada vez que se muestra. Esta función es <code>print</code>, y es una <em>función genérica</em>.</p>
</div>
<div id="funciones-genéricas" class="section level2 hasAnchor" number="11.3">
<h2><span class="header-section-number">11.3</span> Funciones Genéricas<a href="s3.html#funciones-genéricas" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>R usa <code>print</code> con más frecuencia de lo que piensas; R llama a <code>print</code> cada vez que muestra un resultado en la ventana de su consola. Esta llamada ocurre en segundo plano, por lo que no la nota; pero la llamada explica cómo la salida llega a la ventana de la consola (recuerde que <code>print</code> siempre imprime su argumento en la ventana de la consola). Esta llamada <code>print</code> también explica por qué la salida de <code>print</code> siempre coincide con lo que ve cuando muestra un objeto en la línea de comando:</p>
<div class="sourceCode" id="cb324"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb324-1"><a href="s3.html#cb324-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(pi)</span>
<span id="cb324-2"><a href="s3.html#cb324-2" aria-hidden="true" tabindex="-1"></a><span class="do">## 3.141593</span></span>
<span id="cb324-3"><a href="s3.html#cb324-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb324-4"><a href="s3.html#cb324-4" aria-hidden="true" tabindex="-1"></a>pi</span>
<span id="cb324-5"><a href="s3.html#cb324-5" aria-hidden="true" tabindex="-1"></a><span class="do">## 3.141593</span></span>
<span id="cb324-6"><a href="s3.html#cb324-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb324-7"><a href="s3.html#cb324-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb324-8"><a href="s3.html#cb324-8" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">head</span>(mazo))</span>
<span id="cb324-9"><a href="s3.html#cb324-9" aria-hidden="true" tabindex="-1"></a><span class="do">##  cara  palo valor</span></span>
<span id="cb324-10"><a href="s3.html#cb324-10" aria-hidden="true" tabindex="-1"></a><span class="do">##   rey picas    13</span></span>
<span id="cb324-11"><a href="s3.html#cb324-11" aria-hidden="true" tabindex="-1"></a><span class="do">## reina picas    12</span></span>
<span id="cb324-12"><a href="s3.html#cb324-12" aria-hidden="true" tabindex="-1"></a><span class="do">##  jota picas    11</span></span>
<span id="cb324-13"><a href="s3.html#cb324-13" aria-hidden="true" tabindex="-1"></a><span class="do">##  diez picas    10</span></span>
<span id="cb324-14"><a href="s3.html#cb324-14" aria-hidden="true" tabindex="-1"></a><span class="do">## nueve picas     9</span></span>
<span id="cb324-15"><a href="s3.html#cb324-15" aria-hidden="true" tabindex="-1"></a><span class="do">##  ocho picas     8</span></span>
<span id="cb324-16"><a href="s3.html#cb324-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb324-17"><a href="s3.html#cb324-17" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(mazo)</span>
<span id="cb324-18"><a href="s3.html#cb324-18" aria-hidden="true" tabindex="-1"></a><span class="do">##  cara  palo valor</span></span>
<span id="cb324-19"><a href="s3.html#cb324-19" aria-hidden="true" tabindex="-1"></a><span class="do">##   rey picas    13</span></span>
<span id="cb324-20"><a href="s3.html#cb324-20" aria-hidden="true" tabindex="-1"></a><span class="do">## reina picas    12</span></span>
<span id="cb324-21"><a href="s3.html#cb324-21" aria-hidden="true" tabindex="-1"></a><span class="do">##  jota picas    11</span></span>
<span id="cb324-22"><a href="s3.html#cb324-22" aria-hidden="true" tabindex="-1"></a><span class="do">##  diez picas    10</span></span>
<span id="cb324-23"><a href="s3.html#cb324-23" aria-hidden="true" tabindex="-1"></a><span class="do">## nueve picas     9</span></span>
<span id="cb324-24"><a href="s3.html#cb324-24" aria-hidden="true" tabindex="-1"></a><span class="do">##  ocho picas     8</span></span>
<span id="cb324-25"><a href="s3.html#cb324-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb324-26"><a href="s3.html#cb324-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb324-27"><a href="s3.html#cb324-27" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">play</span>())</span>
<span id="cb324-28"><a href="s3.html#cb324-28" aria-hidden="true" tabindex="-1"></a><span class="do">##  5</span></span>
<span id="cb324-29"><a href="s3.html#cb324-29" aria-hidden="true" tabindex="-1"></a><span class="do">## attr(,&quot;simbolos&quot;)</span></span>
<span id="cb324-30"><a href="s3.html#cb324-30" aria-hidden="true" tabindex="-1"></a><span class="do">##  &quot;B&quot;  &quot;BB&quot; &quot;B&quot; </span></span>
<span id="cb324-31"><a href="s3.html#cb324-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb324-32"><a href="s3.html#cb324-32" aria-hidden="true" tabindex="-1"></a><span class="fu">play</span>()</span>
<span id="cb324-33"><a href="s3.html#cb324-33" aria-hidden="true" tabindex="-1"></a><span class="do">##  5</span></span>
<span id="cb324-34"><a href="s3.html#cb324-34" aria-hidden="true" tabindex="-1"></a><span class="do">## attr(,&quot;simbolos&quot;)</span></span>
<span id="cb324-35"><a href="s3.html#cb324-35" aria-hidden="true" tabindex="-1"></a><span class="do">##  &quot;B&quot;  &quot;BB&quot; &quot;B&quot; </span></span></code></pre></div>
<p>Puede cambiar la forma en que R muestra la salida de su maquina tragamonedas reescribiendo <code>print</code> para que se vea como <code>mostrat_tragamoneda</code>. Entonces R mostraría la salida en el formato que hemos creado. Sin embargo, este método tendría efectos secundarios negativos. No desea que R llame a <code>mostrat_tragamoneda</code> cuando muestre un data frame, un vector numérico o cualquier otro objeto.</p>
<p>Afortunadamente, <code>print</code> no es una función normal; es una función <em>genérica</em>. Esto significa que <code>print</code> está escrito de una manera que le permite hacer cosas diferentes en casos diferentes. Ya has visto este comportamiento en acción (aunque es posible que no te hayas dado cuenta). <code>print</code> hizo una cosa cuando miramos la versión sin clase de <code>num</code>:</p>
<div class="sourceCode" id="cb325"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb325-1"><a href="s3.html#cb325-1" aria-hidden="true" tabindex="-1"></a>num <span class="ot">&lt;-</span> <span class="dv">1000000000</span></span>
<span id="cb325-2"><a href="s3.html#cb325-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(num)</span>
<span id="cb325-3"><a href="s3.html#cb325-3" aria-hidden="true" tabindex="-1"></a><span class="do">## 1000000000</span></span></code></pre></div>
<p>y una cosa diferente cuando le dimos a <code>num</code> una clase:</p>
<div class="sourceCode" id="cb326"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb326-1"><a href="s3.html#cb326-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(num) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;POSIXct&quot;</span>, <span class="st">&quot;POSIXt&quot;</span>)</span>
<span id="cb326-2"><a href="s3.html#cb326-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(num)</span>
<span id="cb326-3"><a href="s3.html#cb326-3" aria-hidden="true" tabindex="-1"></a><span class="do">## &quot;2001-09-08 19:46:40 CST&quot;</span></span></code></pre></div>
<p>Eche un vistazo al código dentro de <code>print</code> para ver cómo lo hace. Puede imaginar que print busca el atributo de clase de su entrada y luego usa un árbol +if+ para elegir qué salida mostrar. Si esto te ocurrió, ¡buen trabajo! <code>print</code> hace algo muy similar, pero mucho más simple.</p>
</div>
<div id="métodos" class="section level2 hasAnchor" number="11.4">
<h2><span class="header-section-number">11.4</span> Métodos<a href="s3.html#métodos" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Cuando llamas a <code>print</code>, <code>print</code> llama a una función especial, <code>UseMethod</code>:</p>
<div class="sourceCode" id="cb327"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb327-1"><a href="s3.html#cb327-1" aria-hidden="true" tabindex="-1"></a>print</span>
<span id="cb327-2"><a href="s3.html#cb327-2" aria-hidden="true" tabindex="-1"></a><span class="do">## function (x, ...) </span></span>
<span id="cb327-3"><a href="s3.html#cb327-3" aria-hidden="true" tabindex="-1"></a><span class="do">## UseMethod(&quot;print&quot;)</span></span>
<span id="cb327-4"><a href="s3.html#cb327-4" aria-hidden="true" tabindex="-1"></a><span class="do">## &lt;bytecode: 0x7ffee4c62f80&gt;</span></span>
<span id="cb327-5"><a href="s3.html#cb327-5" aria-hidden="true" tabindex="-1"></a><span class="do">## &lt;environment: namespace:base&gt;</span></span></code></pre></div>
<p><code>UseMethod</code> examina la clase de la entrada que proporcionas para el primer argumento de <code>print</code> y luego pasa todos tus argumentos a una nueva función diseñada para manejar esa clase de entrada. Por ejemplo, cuando le das a <code>print</code> un objeto POSIXct, <code>UseMethod</code> pasará todos los argumentos de <code>print</code> a <code>print.POSIXct</code>. R luego ejecutará <code>print.POSIXct</code> y devolverá los resultados:</p>
<div class="sourceCode" id="cb328"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb328-1"><a href="s3.html#cb328-1" aria-hidden="true" tabindex="-1"></a>print.POSIXct</span>
<span id="cb328-2"><a href="s3.html#cb328-2" aria-hidden="true" tabindex="-1"></a><span class="do">## function (x, ...) </span></span>
<span id="cb328-3"><a href="s3.html#cb328-3" aria-hidden="true" tabindex="-1"></a><span class="do">## {</span></span>
<span id="cb328-4"><a href="s3.html#cb328-4" aria-hidden="true" tabindex="-1"></a><span class="do">##     max.print &lt;- getOption(&quot;max.print&quot;, 9999L)</span></span>
<span id="cb328-5"><a href="s3.html#cb328-5" aria-hidden="true" tabindex="-1"></a><span class="do">##     if (max.print &lt; length(x)) {</span></span>
<span id="cb328-6"><a href="s3.html#cb328-6" aria-hidden="true" tabindex="-1"></a><span class="do">##         print(format(x[seq_len(max.print)], usetz = TRUE), ...)</span></span>
<span id="cb328-7"><a href="s3.html#cb328-7" aria-hidden="true" tabindex="-1"></a><span class="do">##         cat(&quot; [ reached getOption(\&quot;max.print\&quot;) -- omitted&quot;, </span></span>
<span id="cb328-8"><a href="s3.html#cb328-8" aria-hidden="true" tabindex="-1"></a><span class="do">##             length(x) - max.print, &quot;entries ]\n&quot;)</span></span>
<span id="cb328-9"><a href="s3.html#cb328-9" aria-hidden="true" tabindex="-1"></a><span class="do">##     }</span></span>
<span id="cb328-10"><a href="s3.html#cb328-10" aria-hidden="true" tabindex="-1"></a><span class="do">##     else print(format(x, usetz = TRUE), ...)</span></span>
<span id="cb328-11"><a href="s3.html#cb328-11" aria-hidden="true" tabindex="-1"></a><span class="do">##     invisible(x)</span></span>
<span id="cb328-12"><a href="s3.html#cb328-12" aria-hidden="true" tabindex="-1"></a><span class="do">## }</span></span>
<span id="cb328-13"><a href="s3.html#cb328-13" aria-hidden="true" tabindex="-1"></a><span class="do">## &lt;bytecode: 0x7fa948f3d008&gt;</span></span>
<span id="cb328-14"><a href="s3.html#cb328-14" aria-hidden="true" tabindex="-1"></a><span class="do">## &lt;environment: namespace:base&gt;</span></span></code></pre></div>
<p>Si le das a <code>print</code> un objeto de factor, <code>UseMethod</code> pasará todos los argumentos de <code>print</code> a <code>print.factor</code>. R luego ejecutará <code>print.factor</code> y devolverá los resultados:</p>
<div class="sourceCode" id="cb329"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb329-1"><a href="s3.html#cb329-1" aria-hidden="true" tabindex="-1"></a>print.factor</span>
<span id="cb329-2"><a href="s3.html#cb329-2" aria-hidden="true" tabindex="-1"></a><span class="do">## function (x, quote = FALSE, max.levels = NULL, width = getOption(&quot;width&quot;), </span></span>
<span id="cb329-3"><a href="s3.html#cb329-3" aria-hidden="true" tabindex="-1"></a><span class="do">##     ...) </span></span>
<span id="cb329-4"><a href="s3.html#cb329-4" aria-hidden="true" tabindex="-1"></a><span class="do">## {</span></span>
<span id="cb329-5"><a href="s3.html#cb329-5" aria-hidden="true" tabindex="-1"></a><span class="do">##     ord &lt;- is.ordered(x)</span></span>
<span id="cb329-6"><a href="s3.html#cb329-6" aria-hidden="true" tabindex="-1"></a><span class="do">##     if (length(x) == 0L) </span></span>
<span id="cb329-7"><a href="s3.html#cb329-7" aria-hidden="true" tabindex="-1"></a><span class="do">##         cat(if (ord) </span></span>
<span id="cb329-8"><a href="s3.html#cb329-8" aria-hidden="true" tabindex="-1"></a><span class="do">##             &quot;ordered&quot;</span></span>
<span id="cb329-9"><a href="s3.html#cb329-9" aria-hidden="true" tabindex="-1"></a><span class="do">## ...</span></span>
<span id="cb329-10"><a href="s3.html#cb329-10" aria-hidden="true" tabindex="-1"></a><span class="do">##         drop &lt;- n &gt; maxl</span></span>
<span id="cb329-11"><a href="s3.html#cb329-11" aria-hidden="true" tabindex="-1"></a><span class="do">##         cat(if (drop) </span></span>
<span id="cb329-12"><a href="s3.html#cb329-12" aria-hidden="true" tabindex="-1"></a><span class="do">##             paste(format(n), &quot;&quot;), T0, paste(if (drop) </span></span>
<span id="cb329-13"><a href="s3.html#cb329-13" aria-hidden="true" tabindex="-1"></a><span class="do">##             c(lev[1L:max(1, maxl - 1)], &quot;...&quot;, if (maxl &gt; 1) lev[n])</span></span>
<span id="cb329-14"><a href="s3.html#cb329-14" aria-hidden="true" tabindex="-1"></a><span class="do">##         else lev, collapse = colsep), &quot;\n&quot;, sep = &quot;&quot;)</span></span>
<span id="cb329-15"><a href="s3.html#cb329-15" aria-hidden="true" tabindex="-1"></a><span class="do">##     }</span></span>
<span id="cb329-16"><a href="s3.html#cb329-16" aria-hidden="true" tabindex="-1"></a><span class="do">##     invisible(x)</span></span>
<span id="cb329-17"><a href="s3.html#cb329-17" aria-hidden="true" tabindex="-1"></a><span class="do">## }</span></span>
<span id="cb329-18"><a href="s3.html#cb329-18" aria-hidden="true" tabindex="-1"></a><span class="do">## &lt;bytecode: 0x7fa94a64d470&gt;</span></span>
<span id="cb329-19"><a href="s3.html#cb329-19" aria-hidden="true" tabindex="-1"></a><span class="do">## &lt;environment: namespace:base&gt;</span></span></code></pre></div>
<p><code>print.POSIXct</code> y <code>print.factor</code> se denominan <em>métodos</em> de <code>print</code>. Por sí mismos, <code>print.POSIXct</code> y <code>print.factor</code> funcionan como funciones regulares de R. Sin embargo, cada uno fue escrito específicamente para que ‘UseMethod’ pudiera llamarlo para manejar una clase específica de entrada de <code>print</code>.</p>
<p>Tenga en cuenta que <code>print.POSIXct</code> y <code>print.factor</code> hacen dos cosas diferentes (también tenga en cuenta que compendié la mitad de <code>print.factor</code>: es una función larga). Así es como <code>print</code> se las arregla para hacer diferentes cosas en diferentes casos. <code>print</code> llama a <code>UseMethod</code>, que llama a un método especializado basado en la clase del primer argumento de <code>print</code>.</p>
<p>Puede ver qué métodos existen para una función genérica llamando a <code>methods</code> en la función. Por ejemplo, <code>print</code> tiene casi 200 métodos (lo que le da una idea de cuántas clases existen en R):</p>
<div class="sourceCode" id="cb330"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb330-1"><a href="s3.html#cb330-1" aria-hidden="true" tabindex="-1"></a><span class="fu">methods</span>(print)</span>
<span id="cb330-2"><a href="s3.html#cb330-2" aria-hidden="true" tabindex="-1"></a><span class="do">##   [1] print.acf*                                   </span></span>
<span id="cb330-3"><a href="s3.html#cb330-3" aria-hidden="true" tabindex="-1"></a><span class="do">##   [2] print.anova                                  </span></span>
<span id="cb330-4"><a href="s3.html#cb330-4" aria-hidden="true" tabindex="-1"></a><span class="do">##   [3] print.aov*                                   </span></span>
<span id="cb330-5"><a href="s3.html#cb330-5" aria-hidden="true" tabindex="-1"></a><span class="do">##  ...                      </span></span>
<span id="cb330-6"><a href="s3.html#cb330-6" aria-hidden="true" tabindex="-1"></a><span class="do">## [176] print.xgettext*                              </span></span>
<span id="cb330-7"><a href="s3.html#cb330-7" aria-hidden="true" tabindex="-1"></a><span class="do">## [177] print.xngettext*                             </span></span>
<span id="cb330-8"><a href="s3.html#cb330-8" aria-hidden="true" tabindex="-1"></a><span class="do">## [178] print.xtabs*</span></span>
<span id="cb330-9"><a href="s3.html#cb330-9" aria-hidden="true" tabindex="-1"></a><span class="do">##</span></span>
<span id="cb330-10"><a href="s3.html#cb330-10" aria-hidden="true" tabindex="-1"></a><span class="do">##  Nonvisible functions are asterisked</span></span></code></pre></div>
<p>Este sistema de funciones genéricas, métodos y despacho basado en clases se conoce como S3 porque se originó en la tercera versión de S, el lenguaje de programación que se convertiría en S-PLUS y R. Muchas funciones comunes de R son genéricas de S3 que funcionan con un conjunto de métodos de clase. Por ejemplo, <code>summary</code> y <code>head</code> también llaman a <code>UseMethod</code>. Las funciones más básicas, como <code>c</code>, <code>+</code>, <code>-</code>, <code>&lt;</code> y otras también se comportan como funciones genéricas, aunque llaman a <code>.primitive</code> en lugar de <code>UseMethod</code>.</p>
<p>El sistema S3 permite que las funciones de R se comporten de diferentes maneras para diferentes clases. Puede usar S3 para formatear la salida de su tragamonedas. Primero, dé a su salida su propia clase. Luego escriba un método de impresión para esa clase. Para hacer esto de manera eficiente, necesitará saber un poco acerca de cómo <code>UseMethod</code> selecciona una función de método para usar.</p>
<div id="selección-de-método" class="section level3 hasAnchor" number="11.4.1">
<h3><span class="header-section-number">11.4.1</span> Selección de Método<a href="s3.html#selección-de-método" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>UseMethod</code> utiliza un sistema muy simple para emparejar métodos con funciones.</p>
<p>Cada método S3 tiene un nombre de dos partes. La primera parte del nombre se referirá a la función con la que trabaja el método. La segunda parte se referirá a la clase. Estas dos partes estarán separadas por un punto. Entonces, por ejemplo, el método de <code>print</code> que funciona con funciones se llamará <code>print.function</code>. El método de <code>summary</code> que trabaja con matrices se llamará <code>summary.matrix</code>. Y así sucesivamente.</p>
<p>Cuando <code>UseMethod</code> necesita llamar a un método, busca una función de R con el nombre de estilo S3 correcto. La función no tiene que ser especial de ninguna manera; solo necesita tener el nombre correcto.</p>
<p>Puede participar en este sistema escribiendo su propia función y dándole un nombre de estilo S3 válido. Por ejemplo, demos a <code>a_play</code> una clase propia. No importa cómo llames a la clase; R almacenará cualquier cadena de caracteres en el atributo de clase:</p>
<div class="sourceCode" id="cb331"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb331-1"><a href="s3.html#cb331-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(a_play) <span class="ot">&lt;-</span> <span class="st">&quot;tragamonedas&quot;</span></span></code></pre></div>
<p>Ahora escribamos un método de impresión S3 para la clase +tragamonedas+. El método no necesita hacer nada especial, ni siquiera necesita imprimir <code>a_play</code>. Pero <em>sí</em> necesita llamarse <code>print.tragamonedas</code>; de lo contrario, <code>UseMethod</code> no lo encontrará. El método también debería tomar los mismos argumentos que <code>print</code>; de lo contrario, R dará un error cuando intente pasar los argumentos a <code>print.tragamonedas</code>:</p>
<div class="sourceCode" id="cb332"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb332-1"><a href="s3.html#cb332-1" aria-hidden="true" tabindex="-1"></a><span class="fu">args</span>(print)</span>
<span id="cb332-2"><a href="s3.html#cb332-2" aria-hidden="true" tabindex="-1"></a><span class="do">## function (x, ...) </span></span>
<span id="cb332-3"><a href="s3.html#cb332-3" aria-hidden="true" tabindex="-1"></a><span class="do">## NULL</span></span>
<span id="cb332-4"><a href="s3.html#cb332-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb332-5"><a href="s3.html#cb332-5" aria-hidden="true" tabindex="-1"></a>print.tragamonedas <span class="ot">&lt;-</span> <span class="cf">function</span>(x, ...) {</span>
<span id="cb332-6"><a href="s3.html#cb332-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;Estoy usando el método print.tragamonedas&quot;</span>)</span>
<span id="cb332-7"><a href="s3.html#cb332-7" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>¿Funciona nuestro método? Sí, y no solo eso; R usa el método de impresión para mostrar el contenido de <code>a_play</code>. Este método no es muy útil, así que voy a eliminarlo. Tendrás la oportunidad de escribir uno mejor en un minuto:</p>
<div class="sourceCode" id="cb333"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb333-1"><a href="s3.html#cb333-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(a_play)</span>
<span id="cb333-2"><a href="s3.html#cb333-2" aria-hidden="true" tabindex="-1"></a><span class="do">## Estoy usando el método print.tragamonedas</span></span>
<span id="cb333-3"><a href="s3.html#cb333-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb333-4"><a href="s3.html#cb333-4" aria-hidden="true" tabindex="-1"></a>a_play</span>
<span id="cb333-5"><a href="s3.html#cb333-5" aria-hidden="true" tabindex="-1"></a><span class="do">## Estoy usando el método print.tragamonedas</span></span>
<span id="cb333-6"><a href="s3.html#cb333-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb333-7"><a href="s3.html#cb333-7" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(print.tragamonedas)</span></code></pre></div>
<p>Algunos objetos de R tienen múltiples clases. Por ejemplo, la salida de <code>Sys.time</code> tiene dos clases. ¿Qué clase usará <code>UseMethod</code> para encontrar un método de impresión?</p>
<div class="sourceCode" id="cb334"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb334-1"><a href="s3.html#cb334-1" aria-hidden="true" tabindex="-1"></a>ahora <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>()</span>
<span id="cb334-2"><a href="s3.html#cb334-2" aria-hidden="true" tabindex="-1"></a><span class="fu">attributes</span>(ahora)</span>
<span id="cb334-3"><a href="s3.html#cb334-3" aria-hidden="true" tabindex="-1"></a><span class="do">## $class</span></span>
<span id="cb334-4"><a href="s3.html#cb334-4" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &quot;POSIXct&quot; &quot;POSIXt&quot; </span></span></code></pre></div>
<p><code>UseMethod</code> primero buscará un método que coincida con la primera clase listada en el vector de clase del objeto. Si <code>UseMethod</code> no puede encontrar uno, buscará el método que coincida con la segunda clase (y así sucesivamente si hay más clases en el vector de clase de un objeto).</p>
<p>Si le das a <code>print</code> un objeto cuya clase o clases no tienen un método de impresión, <code>UseMethod</code> llamará a <code>print.default</code>, un método especial escrito para manejar casos generales.</p>
<p>Usemos este sistema para escribir un mejor método de impresión para la salida de la máquina tragamonedas.</p>
<p>Ejercicio 11.2 (Hacer un Método de print) Escriba un nuevo método de print para la clase de tragamonedas. El método debería llamar a <code>mostrat_tragamoneda</code> para devolver una salida de máquina tragamonedas bien formateada.</p>
<p>¿Qué nombre debe usar para este método?</p>
<div class="solution">
<p><span id="unlabeled-div-25" class="solution"><em>Solution</em>. </span>Es sorprendentemente fácil escribir un buen método <code>print.tragamonedas</code> porque ya hicimos todo el trabajo duro cuando escribimos <code>mostrat_tragamoneda</code>. Por ejemplo, el siguiente método funcionará. Solo asegúrese de que el método se llame <code>print.tragamonedas</code> para que <code>UseMethod</code> pueda encontrarlo, y asegúrese de que toma los mismos argumentos que <code>print</code> para que <code>UseMethod</code> pueda pasar esos argumentos a <code>print.tragamonedas</code> sin ningún problema:</p>
</div>
<div class="sourceCode" id="cb335"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb335-1"><a href="s3.html#cb335-1" aria-hidden="true" tabindex="-1"></a>print.tragamonedas <span class="ot">&lt;-</span> <span class="cf">function</span>(x, ...) {</span>
<span id="cb335-2"><a href="s3.html#cb335-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mostrat_tragamoneda</span>(x)</span>
<span id="cb335-3"><a href="s3.html#cb335-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Ahora R usará automáticamente <code>mostrat_tragamoneda</code> para mostrar objetos de clase +tragamonedas+ (y solo objetos de clase “tragamonedas”):</p>
<div class="sourceCode" id="cb336"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb336-1"><a href="s3.html#cb336-1" aria-hidden="true" tabindex="-1"></a>a_play</span>
<span id="cb336-2"><a href="s3.html#cb336-2" aria-hidden="true" tabindex="-1"></a><span class="do">## B 0 B</span></span>
<span id="cb336-3"><a href="s3.html#cb336-3" aria-hidden="true" tabindex="-1"></a><span class="do">## $0</span></span></code></pre></div>
<p>Asegurémonos de que cada salida de la máquina tragamonedas tenga la clase <code>tragamonedas</code>.</p>
<p><strong>Ejercicio 11.3 (Añadir una Clase)</strong> Modifique la función <code>play</code> para que asigne <code>tragamonedas</code> al atributo <code>class</code> de su salida:</p>
<div class="sourceCode" id="cb337"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb337-1"><a href="s3.html#cb337-1" aria-hidden="true" tabindex="-1"></a>play <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb337-2"><a href="s3.html#cb337-2" aria-hidden="true" tabindex="-1"></a>  simbolos <span class="ot">&lt;-</span> <span class="fu">get_simbolos</span>()</span>
<span id="cb337-3"><a href="s3.html#cb337-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">structure</span>(<span class="fu">puntuacion</span>(simbolos), <span class="at">simbolos =</span> simbolos)</span>
<span id="cb337-4"><a href="s3.html#cb337-4" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<div class="solution">
<p><span id="unlabeled-div-26" class="solution"><em>Solution</em>. </span>Puede establecer el atributo <code>class</code> de la salida al mismo tiempo que establece el atributo +simbolos+. Simplemente agregue <code>class = "tragamonedas"</code> a la llamada <code>structure</code>:</p>
</div>
<div class="sourceCode" id="cb338"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb338-1"><a href="s3.html#cb338-1" aria-hidden="true" tabindex="-1"></a>play <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb338-2"><a href="s3.html#cb338-2" aria-hidden="true" tabindex="-1"></a>  simbolos <span class="ot">&lt;-</span> <span class="fu">get_simbolos</span>()</span>
<span id="cb338-3"><a href="s3.html#cb338-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">structure</span>(<span class="fu">puntuacion</span>(simbolos), <span class="at">simbolos =</span> simbolos, <span class="at">class =</span> <span class="st">&quot;tragamonedas&quot;</span>)</span>
<span id="cb338-4"><a href="s3.html#cb338-4" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Ahora cada uno de nuestras salidas de <code>play</code> tendrá la clase <code>tragamonedas</code>:</p>
<div class="sourceCode" id="cb339"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb339-1"><a href="s3.html#cb339-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(<span class="fu">play</span>())</span>
<span id="cb339-2"><a href="s3.html#cb339-2" aria-hidden="true" tabindex="-1"></a><span class="do">## &quot;tragamonedas&quot;</span></span></code></pre></div>
<p>Como resultado, R los mostrará en el formato de máquina tragamonedas correcto:</p>
<div class="sourceCode" id="cb340"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb340-1"><a href="s3.html#cb340-1" aria-hidden="true" tabindex="-1"></a><span class="fu">play</span>()</span>
<span id="cb340-2"><a href="s3.html#cb340-2" aria-hidden="true" tabindex="-1"></a><span class="do">## BB BB BBB</span></span>
<span id="cb340-3"><a href="s3.html#cb340-3" aria-hidden="true" tabindex="-1"></a><span class="do">## $5</span></span>
<span id="cb340-4"><a href="s3.html#cb340-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb340-5"><a href="s3.html#cb340-5" aria-hidden="true" tabindex="-1"></a><span class="fu">play</span>()</span>
<span id="cb340-6"><a href="s3.html#cb340-6" aria-hidden="true" tabindex="-1"></a><span class="do">## BB 0 0</span></span>
<span id="cb340-7"><a href="s3.html#cb340-7" aria-hidden="true" tabindex="-1"></a><span class="do">## $0</span></span></code></pre></div>
</div>
</div>
<div id="clases-1" class="section level2 hasAnchor" number="11.5">
<h2><span class="header-section-number">11.5</span> Clases<a href="s3.html#clases-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Puede usar el sistema S3 para crear una nueva clase sólida de objetos en R. Luego, R tratará los objetos de su clase de manera consistente y sensata. Para hacer una clase:</p>
<ul>
<li>Elija un nombre para su clase.</li>
<li>Asigne a cada instancia de su clase un atributo +class+.</li>
<li>Escriba métodos de clase para cualquier función genérica que pueda usar objetos de su clase.</li>
</ul>
<p>Muchos paquetes de R se basan en clases que se han creado de manera similar. Si bien este trabajo es simple, puede que no sea fácil. Por ejemplo, considere cuántos métodos existen para clases predefinidas.</p>
<p>Puede llamar a <code>methods</code> en una clase con el argumento <code>class</code>, que toma una cadena de caracteres. <code>methods</code> devolverá todos los métodos escritos para la clase. Tenga en cuenta que <code>methods</code> no podrá mostrarle los métodos que vienen en un paquete R descargado:</p>
<div class="sourceCode" id="cb341"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb341-1"><a href="s3.html#cb341-1" aria-hidden="true" tabindex="-1"></a><span class="fu">methods</span>(<span class="at">class =</span> <span class="st">&quot;factor&quot;</span>)</span>
<span id="cb341-2"><a href="s3.html#cb341-2" aria-hidden="true" tabindex="-1"></a><span class="do">##  [1] [.factor             [[.factor           </span></span>
<span id="cb341-3"><a href="s3.html#cb341-3" aria-hidden="true" tabindex="-1"></a><span class="do">##  [3] [[&lt;-.factor          [&lt;-.factor          </span></span>
<span id="cb341-4"><a href="s3.html#cb341-4" aria-hidden="true" tabindex="-1"></a><span class="do">##  [5] all.equal.factor     as.character.factor </span></span>
<span id="cb341-5"><a href="s3.html#cb341-5" aria-hidden="true" tabindex="-1"></a><span class="do">##  [7] as.data.frame.factor as.Date.factor      </span></span>
<span id="cb341-6"><a href="s3.html#cb341-6" aria-hidden="true" tabindex="-1"></a><span class="do">##  [9] as.list.factor       as.logical.factor   </span></span>
<span id="cb341-7"><a href="s3.html#cb341-7" aria-hidden="true" tabindex="-1"></a><span class="do">## [11] as.POSIXlt.factor    as.vector.factor    </span></span>
<span id="cb341-8"><a href="s3.html#cb341-8" aria-hidden="true" tabindex="-1"></a><span class="do">## [13] droplevels.factor    format.factor       </span></span>
<span id="cb341-9"><a href="s3.html#cb341-9" aria-hidden="true" tabindex="-1"></a><span class="do">## [15] is.na&lt;-.factor       length&lt;-.factor     </span></span>
<span id="cb341-10"><a href="s3.html#cb341-10" aria-hidden="true" tabindex="-1"></a><span class="do">## [17] levels&lt;-.factor      Math.factor         </span></span>
<span id="cb341-11"><a href="s3.html#cb341-11" aria-hidden="true" tabindex="-1"></a><span class="do">## [19] Ops.factor           plot.factor*        </span></span>
<span id="cb341-12"><a href="s3.html#cb341-12" aria-hidden="true" tabindex="-1"></a><span class="do">## [21] print.factor         relevel.factor*     </span></span>
<span id="cb341-13"><a href="s3.html#cb341-13" aria-hidden="true" tabindex="-1"></a><span class="do">## [23] relist.factor*       rep.factor          </span></span>
<span id="cb341-14"><a href="s3.html#cb341-14" aria-hidden="true" tabindex="-1"></a><span class="do">## [25] summary.factor       Summary.factor      </span></span>
<span id="cb341-15"><a href="s3.html#cb341-15" aria-hidden="true" tabindex="-1"></a><span class="do">## [27] xtfrm.factor        </span></span>
<span id="cb341-16"><a href="s3.html#cb341-16" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb341-17"><a href="s3.html#cb341-17" aria-hidden="true" tabindex="-1"></a><span class="do">##    Nonvisible functions are asterisked</span></span></code></pre></div>
<p>Esta salida indica cuánto trabajo se requiere para crear una clase robusta y de buen comportamiento. Por lo general, necesitará escribir un método de <code>class</code> para cada operación básica de R.</p>
<p>Considere dos desafíos que enfrentará de inmediato. Primero, R descarta atributos (como <code>class</code>) cuando combina objetos en un vector:</p>
<div class="sourceCode" id="cb342"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb342-1"><a href="s3.html#cb342-1" aria-hidden="true" tabindex="-1"></a>play1 <span class="ot">&lt;-</span> <span class="fu">play</span>()</span>
<span id="cb342-2"><a href="s3.html#cb342-2" aria-hidden="true" tabindex="-1"></a>play1</span>
<span id="cb342-3"><a href="s3.html#cb342-3" aria-hidden="true" tabindex="-1"></a><span class="do">## B BBB BBB</span></span>
<span id="cb342-4"><a href="s3.html#cb342-4" aria-hidden="true" tabindex="-1"></a><span class="do">## $5</span></span>
<span id="cb342-5"><a href="s3.html#cb342-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb342-6"><a href="s3.html#cb342-6" aria-hidden="true" tabindex="-1"></a>play2 <span class="ot">&lt;-</span> <span class="fu">play</span>()</span>
<span id="cb342-7"><a href="s3.html#cb342-7" aria-hidden="true" tabindex="-1"></a>play2</span>
<span id="cb342-8"><a href="s3.html#cb342-8" aria-hidden="true" tabindex="-1"></a><span class="do">## 0 B 0</span></span>
<span id="cb342-9"><a href="s3.html#cb342-9" aria-hidden="true" tabindex="-1"></a><span class="do">## $0</span></span>
<span id="cb342-10"><a href="s3.html#cb342-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb342-11"><a href="s3.html#cb342-11" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(play1, play2)</span>
<span id="cb342-12"><a href="s3.html#cb342-12" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 5 0</span></span></code></pre></div>
<p>Aquí, R deja de usar <code>print.tragamonedas</code> para mostrar el vector porque el vector <code>c(play1, play2)</code> ya no tiene un atributo +class+ “tragamonedas”.</p>
<p>A continuación, R eliminará los atributos de un objeto (como <code>class</code>) cuando subjunte el objeto:</p>
<div class="sourceCode" id="cb343"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb343-1"><a href="s3.html#cb343-1" aria-hidden="true" tabindex="-1"></a>play1[<span class="dv">1</span>]</span>
<span id="cb343-2"><a href="s3.html#cb343-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 5</span></span></code></pre></div>
<p>Puede evitar este comportamiento escribiendo un método <code>c.tragamonedas</code> y un método <code>[.tragamonedas</code>, pero luego se acumularán dificultades rápidamente. ¿Cómo combinaría los atributos de <code>simbolos</code> de múltiples jugadas en un vector de atributos de símbolos? ¿Cómo cambiarías <code>print.tragamonedas</code> para manejar vectores de salidas? Estos desafíos están abiertos para que los explores. Sin embargo, normalmente no tendrá que intentar este tipo de programación a gran escala como científico de datos.</p>
<p>En nuestro caso, es muy útil dejar que los objetos <code>tragamonedas</code> vuelvan a tener valores de premios únicos cuando combinamos grupos de ellos en un vector.</p>
</div>
<div id="s3-y-depuración" class="section level2 hasAnchor" number="11.6">
<h2><span class="header-section-number">11.6</span> S3 y Depuración<a href="s3.html#s3-y-depuración" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>S3 puede ser molesto si está tratando de comprender las funciones de R. Es difícil saber qué hace una función si su cuerpo de código contiene una llamada a <code>UseMethod</code>. Ahora que sabe que <code>UseMethod</code> llama a un método específico de clase, puede buscar y examinar el método directamente. Será una función cuyo nombre siga la sintaxis <code>&lt;function.class&gt;</code>, o posiblemente <code>&lt;function.default&gt;</code>. También puede usar la función <code>methods</code> para ver qué métodos están asociados con una función o una clase.</p>
</div>
<div id="s4-y-r5" class="section level2 hasAnchor" number="11.7">
<h2><span class="header-section-number">11.7</span> S4 y R5<a href="s3.html#s4-y-r5" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>R también contiene otros dos sistemas que crean un comportamiento específico de clase. Estos se conocen como S4 y R5 (o clases de referencia). Cada uno de estos sistemas es mucho más difícil de usar que S3 y quizás, como consecuencia, más raro. Sin embargo, ofrecen garantías que S3 no ofrece. Si desea obtener más información sobre estos sistemas, incluido cómo escribir y usar sus propias funciones genéricas, le recomiendo el libro <a href="http://adv-r.had.co.nz/"><em>Advanced R Programming</em></a> de Hadley Wickham.</p>
</div>
<div id="resumen-7" class="section level2 hasAnchor" number="11.8">
<h2><span class="header-section-number">11.8</span> Resumen<a href="s3.html#resumen-7" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Los valores no son el único lugar para almacenar información en R, y las funciones no son la única forma de crear un comportamiento único. También puede hacer ambas cosas con el sistema S3 de R. El sistema S3 proporciona una forma sencilla de crear comportamientos específicos de objetos en R. En otras palabras, es la versión de programación orientada a objetos (OOP) de R. El sistema se implementa mediante funciones genéricas. Estas funciones examinan el atributo de clase de su entrada y llaman a un método específico de clase para generar salida. Muchos métodos de S3 buscarán y utilizarán información adicional que se almacena en los atributos de un objeto. Muchas funciones comunes de R son genéricas de S3.</p>
<p>El sistema S3 de R es más útil para las tareas de informática que para las tareas de ciencia de datos, pero comprender S3 puede ayudarlo a solucionar problemas en su trabajo en R como científico de datos</p>
<p>Ahora sabe bastante sobre cómo escribir código de R que realiza tareas personalizadas, pero ¿cómo podría repetir estas tareas? Como científico de datos, a menudo repetirá tareas, a veces miles o incluso millones de veces. ¿Por qué? Porque la repetición te permite simular resultados y estimar probabilidades. <a href="loops.html#loops">Bucles</a> te mostrará cómo automatizar la repetición con las funciones <code>for</code> y <code>while</code> de R. Usará <code>for</code> para simular varios juegos de máquinas tragamonedas y para calcular la tasa de pago de su máquina tragamonedas.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="programs.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="loops.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/davidrsch/hopres/edit/main/s3.rmd",
"text": "Editar"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
