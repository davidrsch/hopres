<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>8 Entornos | Programación práctica con R</title>
  <meta name="description" content="Este libro le enseñará cómo programar en R, con ejemplos prácticos. Lo escribí para personas que no son programadores para proporcionar una introducción amigable al lenguaje R. Aprenderá a cargar datos, ensamblar y desensamblar objetos de datos, navegar por el sistema de entorno de R, escribir sus propias funciones y utilizar todas las herramientas de programación de R. A lo largo del libro, utilizará sus nuevas habilidades para resolver problemas prácticos de ciencia de datos." />
  <meta name="generator" content="bookdown 0.31 and GitBook 2.6.7" />

  <meta property="og:title" content="8 Entornos | Programación práctica con R" />
  <meta property="og:type" content="book" />
  <meta property="og:image" content="https://github.com/davidrsch/hopres/cover.png" />
  <meta property="og:description" content="Este libro le enseñará cómo programar en R, con ejemplos prácticos. Lo escribí para personas que no son programadores para proporcionar una introducción amigable al lenguaje R. Aprenderá a cargar datos, ensamblar y desensamblar objetos de datos, navegar por el sistema de entorno de R, escribir sus propias funciones y utilizar todas las herramientas de programación de R. A lo largo del libro, utilizará sus nuevas habilidades para resolver problemas prácticos de ciencia de datos." />
  <meta name="github-repo" content="davidrsch/hopres" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="8 Entornos | Programación práctica con R" />
  
  <meta name="twitter:description" content="Este libro le enseñará cómo programar en R, con ejemplos prácticos. Lo escribí para personas que no son programadores para proporcionar una introducción amigable al lenguaje R. Aprenderá a cargar datos, ensamblar y desensamblar objetos de datos, navegar por el sistema de entorno de R, escribir sus propias funciones y utilizar todas las herramientas de programación de R. A lo largo del libro, utilizará sus nuevas habilidades para resolver problemas prácticos de ciencia de datos." />
  <meta name="twitter:image" content="https://github.com/davidrsch/hopres/cover.png" />

<meta name="author" content="Garrett Grolemund" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="modify.html"/>
<link rel="next" href="slots.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="hopr.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><strong><a href="./">Programación práctica con R</a></strong></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Bienvenido</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#sobre-la-traducción"><i class="fa fa-check"></i>Sobre la traducción</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#sobre-la-versión-original-en-inglés"><i class="fa fa-check"></i>Sobre la versión original en inglés</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="prefacio.html"><a href="prefacio.html"><i class="fa fa-check"></i>Prefacio</a>
<ul>
<li class="chapter" data-level="" data-path="prefacio.html"><a href="prefacio.html#convenciones-usadas-en-este-libro"><i class="fa fa-check"></i>Convenciones Usadas en Este Libro</a></li>
<li class="chapter" data-level="" data-path="prefacio.html"><a href="prefacio.html#reconocimientos"><i class="fa fa-check"></i>Reconocimientos</a></li>
</ul></li>
<li class="part"><span><b>I Parte 1</b></span></li>
<li class="chapter" data-level="1" data-path="proyecto-1-dados-ponderados.html"><a href="proyecto-1-dados-ponderados.html"><i class="fa fa-check"></i><b>1</b> Proyecto 1: Dados Ponderados</a></li>
<li class="chapter" data-level="2" data-path="Básico.html"><a href="Básico.html"><i class="fa fa-check"></i><b>2</b> Lo Más Básico</a>
<ul>
<li class="chapter" data-level="2.1" data-path="Básico.html"><a href="Básico.html#la-interfaz-de-usuario-de-r"><i class="fa fa-check"></i><b>2.1</b> La Interfaz de Usuario de R</a></li>
<li class="chapter" data-level="2.2" data-path="Básico.html"><a href="Básico.html#objetos"><i class="fa fa-check"></i><b>2.2</b> Objetos</a></li>
<li class="chapter" data-level="2.3" data-path="Básico.html"><a href="Básico.html#funciones"><i class="fa fa-check"></i><b>2.3</b> Funciones</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="Básico.html"><a href="Básico.html#muestra-con-reemplazo"><i class="fa fa-check"></i><b>2.3.1</b> Muestra con reemplazo</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="Básico.html"><a href="Básico.html#Escribir-funciones"><i class="fa fa-check"></i><b>2.4</b> Escribiendo Sus Propias Funciones</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="Básico.html"><a href="Básico.html#el-constructor-de-funciones"><i class="fa fa-check"></i><b>2.4.1</b> El Constructor de Funciones</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="Básico.html"><a href="Básico.html#argumentos"><i class="fa fa-check"></i><b>2.5</b> Argumentos</a></li>
<li class="chapter" data-level="2.6" data-path="Básico.html"><a href="Básico.html#scripts"><i class="fa fa-check"></i><b>2.6</b> Scripts</a></li>
<li class="chapter" data-level="2.7" data-path="Básico.html"><a href="Básico.html#resumen"><i class="fa fa-check"></i><b>2.7</b> Resumen</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="packages.html"><a href="packages.html"><i class="fa fa-check"></i><b>3</b> Paquetes y páginas de ayuda</a>
<ul>
<li class="chapter" data-level="3.1" data-path="packages.html"><a href="packages.html#paquetes"><i class="fa fa-check"></i><b>3.1</b> Paquetes</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="packages.html"><a href="packages.html#install.packages"><i class="fa fa-check"></i><b>3.1.1</b> install.packages</a></li>
<li class="chapter" data-level="3.1.2" data-path="packages.html"><a href="packages.html#library"><i class="fa fa-check"></i><b>3.1.2</b> library</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="packages.html"><a href="packages.html#obteniendo-ayuda-con-las-páginas-de-ayuda"><i class="fa fa-check"></i><b>3.2</b> Obteniendo Ayuda con las Páginas de Ayuda</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="packages.html"><a href="packages.html#partes-de-una-página-de-ayuda"><i class="fa fa-check"></i><b>3.2.1</b> Partes de una Página de Ayuda</a></li>
<li class="chapter" data-level="3.2.2" data-path="packages.html"><a href="packages.html#obteniendo-más-ayuda"><i class="fa fa-check"></i><b>3.2.2</b> Obteniendo Más Ayuda</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="packages.html"><a href="packages.html#resumen-1"><i class="fa fa-check"></i><b>3.3</b> Resumen</a></li>
<li class="chapter" data-level="3.4" data-path="packages.html"><a href="packages.html#resumen-del-proyecto-1"><i class="fa fa-check"></i><b>3.4</b> Resumen del Proyecto 1</a></li>
</ul></li>
<li class="part"><span><b>II Parte 2</b></span></li>
<li class="chapter" data-level="4" data-path="proyecto-2-baraja-de-cartas.html"><a href="proyecto-2-baraja-de-cartas.html"><i class="fa fa-check"></i><b>4</b> Proyecto 2: Baraja de Cartas</a></li>
<li class="chapter" data-level="5" data-path="objectos-de-r.html"><a href="objectos-de-r.html"><i class="fa fa-check"></i><b>5</b> Objectos de R</a>
<ul>
<li class="chapter" data-level="5.1" data-path="objectos-de-r.html"><a href="objectos-de-r.html#vectores-atómicos"><i class="fa fa-check"></i><b>5.1</b> Vectores Atómicos</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="objectos-de-r.html"><a href="objectos-de-r.html#dobles"><i class="fa fa-check"></i><b>5.1.1</b> Dobles</a></li>
<li class="chapter" data-level="5.1.2" data-path="objectos-de-r.html"><a href="objectos-de-r.html#enteros"><i class="fa fa-check"></i><b>5.1.2</b> Enteros</a></li>
<li class="chapter" data-level="5.1.3" data-path="objectos-de-r.html"><a href="objectos-de-r.html#caracteres"><i class="fa fa-check"></i><b>5.1.3</b> Caracteres</a></li>
<li class="chapter" data-level="5.1.4" data-path="objectos-de-r.html"><a href="objectos-de-r.html#lógicos"><i class="fa fa-check"></i><b>5.1.4</b> Lógicos</a></li>
<li class="chapter" data-level="5.1.5" data-path="objectos-de-r.html"><a href="objectos-de-r.html#complejo-y-sin-procesar"><i class="fa fa-check"></i><b>5.1.5</b> Complejo y Sin Procesar</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="objectos-de-r.html"><a href="objectos-de-r.html#attributes"><i class="fa fa-check"></i><b>5.2</b> Atributos</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="objectos-de-r.html"><a href="objectos-de-r.html#names"><i class="fa fa-check"></i><b>5.2.1</b> Nombres</a></li>
<li class="chapter" data-level="5.2.2" data-path="objectos-de-r.html"><a href="objectos-de-r.html#dimensiones"><i class="fa fa-check"></i><b>5.2.2</b> Dimensiones</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="objectos-de-r.html"><a href="objectos-de-r.html#matrices"><i class="fa fa-check"></i><b>5.3</b> Matrices</a></li>
<li class="chapter" data-level="5.4" data-path="objectos-de-r.html"><a href="objectos-de-r.html#arreglos"><i class="fa fa-check"></i><b>5.4</b> Arreglos</a></li>
<li class="chapter" data-level="5.5" data-path="objectos-de-r.html"><a href="objectos-de-r.html#clases"><i class="fa fa-check"></i><b>5.5</b> Clases</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="objectos-de-r.html"><a href="objectos-de-r.html#fechas-y-horarios"><i class="fa fa-check"></i><b>5.5.1</b> Fechas y Horarios</a></li>
<li class="chapter" data-level="5.5.2" data-path="objectos-de-r.html"><a href="objectos-de-r.html#factores"><i class="fa fa-check"></i><b>5.5.2</b> Factores</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="objectos-de-r.html"><a href="objectos-de-r.html#coerción"><i class="fa fa-check"></i><b>5.6</b> Coerción</a></li>
<li class="chapter" data-level="5.7" data-path="objectos-de-r.html"><a href="objectos-de-r.html#listas"><i class="fa fa-check"></i><b>5.7</b> Listas</a></li>
<li class="chapter" data-level="5.8" data-path="objectos-de-r.html"><a href="objectos-de-r.html#data-frames"><i class="fa fa-check"></i><b>5.8</b> Data Frames</a></li>
<li class="chapter" data-level="5.9" data-path="objectos-de-r.html"><a href="objectos-de-r.html#loading"><i class="fa fa-check"></i><b>5.9</b> Cargando Datos</a></li>
<li class="chapter" data-level="5.10" data-path="objectos-de-r.html"><a href="objectos-de-r.html#guardando-datos"><i class="fa fa-check"></i><b>5.10</b> Guardando Datos</a></li>
<li class="chapter" data-level="5.11" data-path="objectos-de-r.html"><a href="objectos-de-r.html#resumen-2"><i class="fa fa-check"></i><b>5.11</b> Resumen</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="notación-de-r.html"><a href="notación-de-r.html"><i class="fa fa-check"></i><b>6</b> Notación de R</a>
<ul>
<li class="chapter" data-level="6.1" data-path="notación-de-r.html"><a href="notación-de-r.html#selección-de-valores"><i class="fa fa-check"></i><b>6.1</b> Selección de Valores</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="notación-de-r.html"><a href="notación-de-r.html#números-enteros-positivos"><i class="fa fa-check"></i><b>6.1.1</b> Números Enteros Positivos</a></li>
<li class="chapter" data-level="6.1.2" data-path="notación-de-r.html"><a href="notación-de-r.html#números-enteros-negativos"><i class="fa fa-check"></i><b>6.1.2</b> Números Enteros Negativos</a></li>
<li class="chapter" data-level="6.1.3" data-path="notación-de-r.html"><a href="notación-de-r.html#cero"><i class="fa fa-check"></i><b>6.1.3</b> Cero</a></li>
<li class="chapter" data-level="6.1.4" data-path="notación-de-r.html"><a href="notación-de-r.html#espacios-en-blanco"><i class="fa fa-check"></i><b>6.1.4</b> Espacios en Blanco</a></li>
<li class="chapter" data-level="6.1.5" data-path="notación-de-r.html"><a href="notación-de-r.html#logic"><i class="fa fa-check"></i><b>6.1.5</b> Valores Lógicos</a></li>
<li class="chapter" data-level="6.1.6" data-path="notación-de-r.html"><a href="notación-de-r.html#nombres"><i class="fa fa-check"></i><b>6.1.6</b> Nombres</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="notación-de-r.html"><a href="notación-de-r.html#repartir-una-carta"><i class="fa fa-check"></i><b>6.2</b> Repartir una Carta</a></li>
<li class="chapter" data-level="6.3" data-path="notación-de-r.html"><a href="notación-de-r.html#barajar-el-mazo"><i class="fa fa-check"></i><b>6.3</b> Barajar el Mazo</a></li>
<li class="chapter" data-level="6.4" data-path="notación-de-r.html"><a href="notación-de-r.html#signos-de-dólar-y-corchetes-dobles"><i class="fa fa-check"></i><b>6.4</b> Signos de Dólar y Corchetes Dobles</a></li>
<li class="chapter" data-level="6.5" data-path="notación-de-r.html"><a href="notación-de-r.html#resumen-3"><i class="fa fa-check"></i><b>6.5</b> Resumen</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="modify.html"><a href="modify.html"><i class="fa fa-check"></i><b>7</b> Modificación de Valores</a>
<ul>
<li class="chapter" data-level="7.0.1" data-path="modify.html"><a href="modify.html#cambio-de-valores-en-el-lugar"><i class="fa fa-check"></i><b>7.0.1</b> Cambio de Valores en el Lugar</a></li>
<li class="chapter" data-level="7.0.2" data-path="modify.html"><a href="modify.html#subconjunto-lógico"><i class="fa fa-check"></i><b>7.0.2</b> Subconjunto Lógico</a></li>
<li class="chapter" data-level="7.0.3" data-path="modify.html"><a href="modify.html#missing"><i class="fa fa-check"></i><b>7.0.3</b> Información Faltante</a></li>
<li class="chapter" data-level="7.0.4" data-path="modify.html"><a href="modify.html#resumen-4"><i class="fa fa-check"></i><b>7.0.4</b> Resumen</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="entornos.html"><a href="entornos.html"><i class="fa fa-check"></i><b>8</b> Entornos</a>
<ul>
<li class="chapter" data-level="8.1" data-path="entornos.html"><a href="entornos.html#entornos-1"><i class="fa fa-check"></i><b>8.1</b> Entornos</a></li>
<li class="chapter" data-level="8.2" data-path="entornos.html"><a href="entornos.html#trabajar-con-entornos"><i class="fa fa-check"></i><b>8.2</b> Trabajar con Entornos</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="entornos.html"><a href="entornos.html#el-entorno-activo"><i class="fa fa-check"></i><b>8.2.1</b> El Entorno Activo</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="entornos.html"><a href="entornos.html#reglas-de-alcance"><i class="fa fa-check"></i><b>8.3</b> Reglas de Alcance</a></li>
<li class="chapter" data-level="8.4" data-path="entornos.html"><a href="entornos.html#asignación"><i class="fa fa-check"></i><b>8.4</b> Asignación</a></li>
<li class="chapter" data-level="8.5" data-path="entornos.html"><a href="entornos.html#evaluación"><i class="fa fa-check"></i><b>8.5</b> Evaluación</a></li>
<li class="chapter" data-level="8.6" data-path="entornos.html"><a href="entornos.html#cierres"><i class="fa fa-check"></i><b>8.6</b> Cierres</a></li>
<li class="chapter" data-level="8.7" data-path="entornos.html"><a href="entornos.html#resumen-5"><i class="fa fa-check"></i><b>8.7</b> Resumen</a></li>
<li class="chapter" data-level="8.8" data-path="entornos.html"><a href="entornos.html#resumen-del-proyecto-2"><i class="fa fa-check"></i><b>8.8</b> Resumen del Proyecto 2</a></li>
</ul></li>
<li class="part"><span><b>III Part 3</b></span></li>
<li class="chapter" data-level="9" data-path="slots.html"><a href="slots.html"><i class="fa fa-check"></i><b>9</b> Project 3: Slot Machine</a></li>
<li class="chapter" data-level="10" data-path="programs.html"><a href="programs.html"><i class="fa fa-check"></i><b>10</b> Programs</a>
<ul>
<li class="chapter" data-level="10.1" data-path="programs.html"><a href="programs.html#strategy"><i class="fa fa-check"></i><b>10.1</b> Strategy</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="programs.html"><a href="programs.html#sequential-steps"><i class="fa fa-check"></i><b>10.1.1</b> Sequential Steps</a></li>
<li class="chapter" data-level="10.1.2" data-path="programs.html"><a href="programs.html#parallel-cases"><i class="fa fa-check"></i><b>10.1.2</b> Parallel Cases</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="programs.html"><a href="programs.html#if-statements"><i class="fa fa-check"></i><b>10.2</b> if Statements</a></li>
<li class="chapter" data-level="10.3" data-path="programs.html"><a href="programs.html#else-statements"><i class="fa fa-check"></i><b>10.3</b> else Statements</a></li>
<li class="chapter" data-level="10.4" data-path="programs.html"><a href="programs.html#lookup-tables"><i class="fa fa-check"></i><b>10.4</b> Lookup Tables</a></li>
<li class="chapter" data-level="10.5" data-path="programs.html"><a href="programs.html#code-comments"><i class="fa fa-check"></i><b>10.5</b> Code Comments</a></li>
<li class="chapter" data-level="10.6" data-path="programs.html"><a href="programs.html#summary"><i class="fa fa-check"></i><b>10.6</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="s3.html"><a href="s3.html"><i class="fa fa-check"></i><b>11</b> S3</a>
<ul>
<li class="chapter" data-level="11.1" data-path="s3.html"><a href="s3.html#the-s3-system"><i class="fa fa-check"></i><b>11.1</b> The S3 System</a></li>
<li class="chapter" data-level="11.2" data-path="s3.html"><a href="s3.html#attributes-1"><i class="fa fa-check"></i><b>11.2</b> Attributes</a></li>
<li class="chapter" data-level="11.3" data-path="s3.html"><a href="s3.html#generic-functions"><i class="fa fa-check"></i><b>11.3</b> Generic Functions</a></li>
<li class="chapter" data-level="11.4" data-path="s3.html"><a href="s3.html#methods"><i class="fa fa-check"></i><b>11.4</b> Methods</a>
<ul>
<li class="chapter" data-level="11.4.1" data-path="s3.html"><a href="s3.html#method-dispatch"><i class="fa fa-check"></i><b>11.4.1</b> Method Dispatch</a></li>
</ul></li>
<li class="chapter" data-level="11.5" data-path="s3.html"><a href="s3.html#classes"><i class="fa fa-check"></i><b>11.5</b> Classes</a></li>
<li class="chapter" data-level="11.6" data-path="s3.html"><a href="s3.html#s3-and-debugging"><i class="fa fa-check"></i><b>11.6</b> S3 and Debugging</a></li>
<li class="chapter" data-level="11.7" data-path="s3.html"><a href="s3.html#s4-and-r5"><i class="fa fa-check"></i><b>11.7</b> S4 and R5</a></li>
<li class="chapter" data-level="11.8" data-path="s3.html"><a href="s3.html#summary-1"><i class="fa fa-check"></i><b>11.8</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="loops.html"><a href="loops.html"><i class="fa fa-check"></i><b>12</b> Loops</a>
<ul>
<li class="chapter" data-level="12.1" data-path="loops.html"><a href="loops.html#expected-values"><i class="fa fa-check"></i><b>12.1</b> Expected Values</a></li>
<li class="chapter" data-level="12.2" data-path="loops.html"><a href="loops.html#expand.grid"><i class="fa fa-check"></i><b>12.2</b> expand.grid</a></li>
<li class="chapter" data-level="12.3" data-path="loops.html"><a href="loops.html#for-loops"><i class="fa fa-check"></i><b>12.3</b> for Loops</a></li>
<li class="chapter" data-level="12.4" data-path="loops.html"><a href="loops.html#while-loops"><i class="fa fa-check"></i><b>12.4</b> while Loops</a></li>
<li class="chapter" data-level="12.5" data-path="loops.html"><a href="loops.html#repeat-loops"><i class="fa fa-check"></i><b>12.5</b> repeat Loops</a></li>
<li class="chapter" data-level="12.6" data-path="loops.html"><a href="loops.html#summary-2"><i class="fa fa-check"></i><b>12.6</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="speed.html"><a href="speed.html"><i class="fa fa-check"></i><b>13</b> Speed</a>
<ul>
<li class="chapter" data-level="13.1" data-path="speed.html"><a href="speed.html#vectorized-code"><i class="fa fa-check"></i><b>13.1</b> Vectorized Code</a></li>
<li class="chapter" data-level="13.2" data-path="speed.html"><a href="speed.html#how-to-write-vectorized-code"><i class="fa fa-check"></i><b>13.2</b> How to Write Vectorized Code</a></li>
<li class="chapter" data-level="13.3" data-path="speed.html"><a href="speed.html#how-to-write-fast-for-loops-in-r"><i class="fa fa-check"></i><b>13.3</b> How to Write Fast for Loops in R</a></li>
<li class="chapter" data-level="13.4" data-path="speed.html"><a href="speed.html#vectorized-code-in-practice"><i class="fa fa-check"></i><b>13.4</b> Vectorized Code in Practice</a>
<ul>
<li class="chapter" data-level="13.4.1" data-path="speed.html"><a href="speed.html#loops-versus-vectorized-code"><i class="fa fa-check"></i><b>13.4.1</b> Loops Versus Vectorized Code</a></li>
</ul></li>
<li class="chapter" data-level="13.5" data-path="speed.html"><a href="speed.html#summary-3"><i class="fa fa-check"></i><b>13.5</b> Summary</a></li>
<li class="chapter" data-level="13.6" data-path="speed.html"><a href="speed.html#project-3-wrap-up"><i class="fa fa-check"></i><b>13.6</b> Project 3 Wrap-up</a></li>
</ul></li>
<li class="appendix"><span><b>Apéndice</b></span></li>
<li class="chapter" data-level="A" data-path="starting.html"><a href="starting.html"><i class="fa fa-check"></i><b>A</b> Instalación de R y RStudio</a>
<ul>
<li class="chapter" data-level="A.1" data-path="starting.html"><a href="starting.html#cómo-descargar-e-instalar-r"><i class="fa fa-check"></i><b>A.1</b> Cómo descargar e instalar R</a>
<ul>
<li class="chapter" data-level="A.1.1" data-path="starting.html"><a href="starting.html#windows"><i class="fa fa-check"></i><b>A.1.1</b> Windows</a></li>
<li class="chapter" data-level="A.1.2" data-path="starting.html"><a href="starting.html#mac"><i class="fa fa-check"></i><b>A.1.2</b> Mac</a></li>
<li class="chapter" data-level="A.1.3" data-path="starting.html"><a href="starting.html#linux"><i class="fa fa-check"></i><b>A.1.3</b> Linux</a></li>
</ul></li>
<li class="chapter" data-level="A.2" data-path="starting.html"><a href="starting.html#usando-r"><i class="fa fa-check"></i><b>A.2</b> Usando R</a></li>
<li class="chapter" data-level="A.3" data-path="starting.html"><a href="starting.html#rstudio"><i class="fa fa-check"></i><b>A.3</b> RStudio</a></li>
<li class="chapter" data-level="A.4" data-path="starting.html"><a href="starting.html#abriendo-r"><i class="fa fa-check"></i><b>A.4</b> Abriendo R</a></li>
</ul></li>
<li class="chapter" data-level="B" data-path="packages2.html"><a href="packages2.html"><i class="fa fa-check"></i><b>B</b> Paquetes de R</a>
<ul>
<li class="chapter" data-level="B.1" data-path="packages2.html"><a href="packages2.html#instalando-paquetes"><i class="fa fa-check"></i><b>B.1</b> Instalando Paquetes</a></li>
<li class="chapter" data-level="B.2" data-path="packages2.html"><a href="packages2.html#cargando-paquetes"><i class="fa fa-check"></i><b>B.2</b> Cargando Paquetes</a></li>
</ul></li>
<li class="chapter" data-level="C" data-path="updating.html"><a href="updating.html"><i class="fa fa-check"></i><b>C</b> Updating R and Its Packages</a>
<ul>
<li class="chapter" data-level="C.1" data-path="updating.html"><a href="updating.html#r-packages"><i class="fa fa-check"></i><b>C.1</b> R Packages</a></li>
</ul></li>
<li class="chapter" data-level="D" data-path="dataio.html"><a href="dataio.html"><i class="fa fa-check"></i><b>D</b> Cargar y Guardar Datos en R</a>
<ul>
<li class="chapter" data-level="D.1" data-path="dataio.html"><a href="dataio.html#conjuntos-de-datos-en-r-base"><i class="fa fa-check"></i><b>D.1</b> Conjuntos de Datos en R Base</a></li>
<li class="chapter" data-level="D.2" data-path="dataio.html"><a href="dataio.html#directorio-de-trabajo"><i class="fa fa-check"></i><b>D.2</b> Directorio de Trabajo</a></li>
<li class="chapter" data-level="D.3" data-path="dataio.html"><a href="dataio.html#archivos-de-texto-sin-formato"><i class="fa fa-check"></i><b>D.3</b> Archivos de Texto Sin Formato</a>
<ul>
<li class="chapter" data-level="D.3.1" data-path="dataio.html"><a href="dataio.html#read.table"><i class="fa fa-check"></i><b>D.3.1</b> read.table</a></li>
<li class="chapter" data-level="D.3.2" data-path="dataio.html"><a href="dataio.html#la-familia-read"><i class="fa fa-check"></i><b>D.3.2</b> La Familia read</a></li>
<li class="chapter" data-level="D.3.3" data-path="dataio.html"><a href="dataio.html#read.fwf"><i class="fa fa-check"></i><b>D.3.3</b> read.fwf</a></li>
<li class="chapter" data-level="D.3.4" data-path="dataio.html"><a href="dataio.html#links-html"><i class="fa fa-check"></i><b>D.3.4</b> Links HTML</a></li>
<li class="chapter" data-level="D.3.5" data-path="dataio.html"><a href="dataio.html#guardar-archivos-de-texto-sin-formato"><i class="fa fa-check"></i><b>D.3.5</b> Guardar Archivos de Texto Sin Formato</a></li>
<li class="chapter" data-level="D.3.6" data-path="dataio.html"><a href="dataio.html#comprimiendo-archivos"><i class="fa fa-check"></i><b>D.3.6</b> Comprimiendo Archivos</a></li>
</ul></li>
<li class="chapter" data-level="D.4" data-path="dataio.html"><a href="dataio.html#archivos-de-r"><i class="fa fa-check"></i><b>D.4</b> Archivos de R</a>
<ul>
<li class="chapter" data-level="D.4.1" data-path="dataio.html"><a href="dataio.html#guardar-archivos-de-r"><i class="fa fa-check"></i><b>D.4.1</b> Guardar archivos de R</a></li>
</ul></li>
<li class="chapter" data-level="D.5" data-path="dataio.html"><a href="dataio.html#hojas-de-cálculo-de-excel"><i class="fa fa-check"></i><b>D.5</b> Hojas de Cálculo de Excel</a>
<ul>
<li class="chapter" data-level="D.5.1" data-path="dataio.html"><a href="dataio.html#exportar-desde-excel"><i class="fa fa-check"></i><b>D.5.1</b> Exportar desde Excel</a></li>
<li class="chapter" data-level="D.5.2" data-path="dataio.html"><a href="dataio.html#copiar-y-pegar"><i class="fa fa-check"></i><b>D.5.2</b> Copiar y pegar</a></li>
<li class="chapter" data-level="D.5.3" data-path="dataio.html"><a href="dataio.html#xlconnect"><i class="fa fa-check"></i><b>D.5.3</b> XLConnect</a></li>
<li class="chapter" data-level="D.5.4" data-path="dataio.html"><a href="dataio.html#lectura-de-hojas-de-cálculo"><i class="fa fa-check"></i><b>D.5.4</b> Lectura de Hojas de Cálculo</a></li>
<li class="chapter" data-level="D.5.5" data-path="dataio.html"><a href="dataio.html#escribir-hojas-de-cálculo"><i class="fa fa-check"></i><b>D.5.5</b> Escribir Hojas de Cálculo</a></li>
</ul></li>
<li class="chapter" data-level="D.6" data-path="dataio.html"><a href="dataio.html#cargar-archivos-desde-otros-programas"><i class="fa fa-check"></i><b>D.6</b> Cargar Archivos desde Otros Programas</a>
<ul>
<li class="chapter" data-level="D.6.1" data-path="dataio.html"><a href="dataio.html#conexión-a-bases-de-datos"><i class="fa fa-check"></i><b>D.6.1</b> Conexión a bases de datos</a></li>
</ul></li>
<li class="chapter" data-level="D.7" data-path="dataio.html"><a href="dataio.html#actualización"><i class="fa fa-check"></i><b>D.7</b> Actualización</a></li>
</ul></li>
<li class="chapter" data-level="E" data-path="debug.html"><a href="debug.html"><i class="fa fa-check"></i><b>E</b> Debugging R Code</a>
<ul>
<li class="chapter" data-level="E.1" data-path="debug.html"><a href="debug.html#traceback"><i class="fa fa-check"></i><b>E.1</b> traceback</a></li>
<li class="chapter" data-level="E.2" data-path="debug.html"><a href="debug.html#browser"><i class="fa fa-check"></i><b>E.2</b> browser</a></li>
<li class="chapter" data-level="E.3" data-path="debug.html"><a href="debug.html#break-points"><i class="fa fa-check"></i><b>E.3</b> Break Points</a></li>
<li class="chapter" data-level="E.4" data-path="debug.html"><a href="debug.html#debug-1"><i class="fa fa-check"></i><b>E.4</b> debug</a></li>
<li class="chapter" data-level="E.5" data-path="debug.html"><a href="debug.html#trace"><i class="fa fa-check"></i><b>E.5</b> trace</a></li>
<li class="chapter" data-level="E.6" data-path="debug.html"><a href="debug.html#recover"><i class="fa fa-check"></i><b>E.6</b> recover</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Programación práctica con R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="entornos" class="section level1 hasAnchor" number="8">
<h1><span class="header-section-number">8</span> Entornos<a href="entornos.html#entornos" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Su mazo ahora está listo para un juego de blackjack (o de corazones o de guerra), pero ¿sus funciones de <code>barajar</code> y <code>repartir</code> están a la altura? Definitivamente no. Por ejemplo, <code>repartir</code> reparte la misma carta una y otra vez:</p>
<div class="sourceCode" id="cb201"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb201-1"><a href="entornos.html#cb201-1" aria-hidden="true" tabindex="-1"></a><span class="fu">repartir</span>(mazo)</span>
<span id="cb201-2"><a href="entornos.html#cb201-2" aria-hidden="true" tabindex="-1"></a><span class="do">## cara  palo valor</span></span>
<span id="cb201-3"><a href="entornos.html#cb201-3" aria-hidden="true" tabindex="-1"></a><span class="do">##  rey picas    13</span></span>
<span id="cb201-4"><a href="entornos.html#cb201-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb201-5"><a href="entornos.html#cb201-5" aria-hidden="true" tabindex="-1"></a><span class="fu">repartir</span>(mazo)</span>
<span id="cb201-6"><a href="entornos.html#cb201-6" aria-hidden="true" tabindex="-1"></a><span class="do">## cara  palo valor</span></span>
<span id="cb201-7"><a href="entornos.html#cb201-7" aria-hidden="true" tabindex="-1"></a><span class="do">##  rey picas    13</span></span>
<span id="cb201-8"><a href="entornos.html#cb201-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb201-9"><a href="entornos.html#cb201-9" aria-hidden="true" tabindex="-1"></a><span class="fu">repartir</span>(mazo)</span>
<span id="cb201-10"><a href="entornos.html#cb201-10" aria-hidden="true" tabindex="-1"></a><span class="do">## cara  palo valor</span></span>
<span id="cb201-11"><a href="entornos.html#cb201-11" aria-hidden="true" tabindex="-1"></a><span class="do">##  rey picas    13</span></span></code></pre></div>
<p>Y la función <code>barajar</code> en realidad no baraja el <code>mazo</code> (devuelve una copia del <code>mazo</code> que se ha barajado). En resumen, ambas funciones usan <code>mazo</code>, pero ninguna manipula <code>mazo</code>, y nos gustaría que lo hicieran.</p>
<p>Para corregir estas funciones, deberá aprender cómo R almacena, busca y manipula objetos como <code>mazo</code>. R hace todas estas cosas con la ayuda de un sistema de entorno.</p>
<div id="entornos-1" class="section level2 hasAnchor" number="8.1">
<h2><span class="header-section-number">8.1</span> Entornos<a href="entornos.html#entornos-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Considere por un momento cómo su computadora almacena archivos. Cada archivo se guarda en una carpeta y cada carpeta se guarda en otra carpeta, lo que forma un sistema de archivos jerárquico. Si su computadora quiere abrir un archivo, primero debe buscar el archivo en este sistema de archivos.</p>
<p>Puede ver su sistema de archivos abriendo una ventana del buscador. Por ejemplo, la figura <a href="entornos.html#fig:folders">8.1</a> muestra parte del sistema de archivos de mi computadora. Tengo toneladas de carpetas. Dentro de uno de ellos hay una subcarpeta llamada <em>Documentos</em>, dentro de esa subcarpeta hay una subsubcarpeta llamada <em>ggsubplot</em>, dentro de esa carpeta hay una carpeta llamada <em>inst</em>, dentro de esa subcarpeta hay una carpeta llamada <em>doc</em>, y dentro de eso hay un archivo llamado <em>manual .pdf</em>.</p>
<div class="figure"><span style="display:block;" id="fig:folders"></span>
<img src="images/hopr_0601.png" alt="Su computadora organiza los archivos en una jerarquía de carpetas y subcarpetas. Para mirar un archivo, necesita encontrar dónde está guardado en el sistema de archivos." width="678" />
<p class="caption">
Figure 8.1: Su computadora organiza los archivos en una jerarquía de carpetas y subcarpetas. Para mirar un archivo, necesita encontrar dónde está guardado en el sistema de archivos.
</p>
</div>
<p>R usa un sistema similar para guardar objetos de R. Cada objeto se guarda dentro de un entorno, un objeto similar a una lista que se asemeja a una carpeta en su computadora. Cada entorno está conectado a un <em>entorno principal</em>, un entorno de nivel superior, que crea una jerarquía de entornos.</p>
<p>Puede ver el sistema de entorno de R con la función <code>parenvs</code> en el paquete pryr (tenga en cuenta que <code>parenvs</code> venía en el paquete pryr cuando este libro se publicó por primera vez). <code>parenvs(all = TRUE)</code> devolverá una lista de los entornos que utiliza su sesión de R. El resultado real variará de una sesión a otra según los paquetes que haya cargado. Aquí está el resultado de mi sesión actual:</p>
<div class="sourceCode" id="cb202"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb202-1"><a href="entornos.html#cb202-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(pryr)</span>
<span id="cb202-2"><a href="entornos.html#cb202-2" aria-hidden="true" tabindex="-1"></a><span class="fu">parenvs</span>(<span class="at">all =</span> <span class="cn">TRUE</span>)</span>
<span id="cb202-3"><a href="entornos.html#cb202-3" aria-hidden="true" tabindex="-1"></a><span class="do">##    label                            name               </span></span>
<span id="cb202-4"><a href="entornos.html#cb202-4" aria-hidden="true" tabindex="-1"></a><span class="do">## 1  &lt;environment: R_GlobalEnv&gt;       &quot;&quot;                 </span></span>
<span id="cb202-5"><a href="entornos.html#cb202-5" aria-hidden="true" tabindex="-1"></a><span class="do">## 2  &lt;environment: package:pryr&gt;  &quot;package:pryr&quot; </span></span>
<span id="cb202-6"><a href="entornos.html#cb202-6" aria-hidden="true" tabindex="-1"></a><span class="do">## 3  &lt;environment: 0x7fff3321c388&gt;    &quot;tools:rstudio&quot;    </span></span>
<span id="cb202-7"><a href="entornos.html#cb202-7" aria-hidden="true" tabindex="-1"></a><span class="do">## 4  &lt;environment: package:stats&gt;     &quot;package:stats&quot;    </span></span>
<span id="cb202-8"><a href="entornos.html#cb202-8" aria-hidden="true" tabindex="-1"></a><span class="do">## 5  &lt;environment: package:graphics&gt;  &quot;package:graphics&quot; </span></span>
<span id="cb202-9"><a href="entornos.html#cb202-9" aria-hidden="true" tabindex="-1"></a><span class="do">## 6  &lt;environment: package:grDevices&gt; &quot;package:grDevices&quot;</span></span>
<span id="cb202-10"><a href="entornos.html#cb202-10" aria-hidden="true" tabindex="-1"></a><span class="do">## 7  &lt;environment: package:utils&gt;     &quot;package:utils&quot;    </span></span>
<span id="cb202-11"><a href="entornos.html#cb202-11" aria-hidden="true" tabindex="-1"></a><span class="do">## 8  &lt;environment: package:datasets&gt;  &quot;package:datasets&quot; </span></span>
<span id="cb202-12"><a href="entornos.html#cb202-12" aria-hidden="true" tabindex="-1"></a><span class="do">## 9  &lt;environment: package:methods&gt;   &quot;package:methods&quot;  </span></span>
<span id="cb202-13"><a href="entornos.html#cb202-13" aria-hidden="true" tabindex="-1"></a><span class="do">## 10 &lt;environment: 0x7fff3193dab0&gt;    &quot;Autoloads&quot;        </span></span>
<span id="cb202-14"><a href="entornos.html#cb202-14" aria-hidden="true" tabindex="-1"></a><span class="do">## 11 &lt;environment: base&gt;              &quot;&quot;                 </span></span>
<span id="cb202-15"><a href="entornos.html#cb202-15" aria-hidden="true" tabindex="-1"></a><span class="do">## 12 &lt;environment: R_EmptyEnv&gt;        &quot;&quot;                 </span></span></code></pre></div>
<p>Se necesita algo de imaginación para interpretar este resultado, así que visualicemos los entornos como un sistema de carpetas, Figura <a href="entornos.html#fig:environments">8.2</a>. Puedes pensar en el árbol del entorno de esta manera. El entorno de nivel más bajo se llama <code>R_GlobalEnv</code> y se guarda dentro de un entorno llamado <code>package:pryr</code>, que se guarda dentro del entorno llamado <code>0x7fff3321c388</code>, y así sucesivamente, hasta llegar al entorno final de más alto nivel. <code>R_EmptyEnv</code>. <code>R_EmptyEnv</code> es el único entorno de R que no tiene un entorno principal.</p>
<div class="figure"><span style="display:block;" id="fig:environments"></span>
<img src="images/hopr_0602.png" alt="R almacena objetos de R en un árbol de entorno que se asemeja al sistema de carpetas de su computadora." width="578" />
<p class="caption">
Figure 8.2: R almacena objetos de R en un árbol de entorno que se asemeja al sistema de carpetas de su computadora.
</p>
</div>
<p>Recuerde que este ejemplo es solo una metáfora. Los entornos de R existen en su memoria RAM y no en su sistema de archivos. Además, los entornos de R técnicamente no se guardan uno dentro de otro. Cada entorno está conectado a un entorno principal, lo que facilita la búsqueda en el árbol de entornos de R. Pero esta conexión es unidireccional: no hay forma de mirar un entorno y decir cuáles son sus “hijos”. Por lo tanto, no puede buscar en el árbol de entorno de R. Sin embargo, en otras formas, el sistema de entorno de R funciona de manera similar a un sistema de archivos.</p>
</div>
<div id="trabajar-con-entornos" class="section level2 hasAnchor" number="8.2">
<h2><span class="header-section-number">8.2</span> Trabajar con Entornos<a href="entornos.html#trabajar-con-entornos" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>R viene con algunas funciones de ayuda que puede usar para explorar su árbol de entorno. Primero, puede referirse a cualquiera de los entornos en su árbol con <code>as.environment</code>. <code>as.environment</code> toma un nombre de entorno (como una cadena de caracteres) y devuelve el entorno correspondiente:</p>
<div class="sourceCode" id="cb203"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb203-1"><a href="entornos.html#cb203-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.environment</span>(<span class="st">&quot;package:stats&quot;</span>)</span>
<span id="cb203-2"><a href="entornos.html#cb203-2" aria-hidden="true" tabindex="-1"></a><span class="do">## &lt;environment: package:stats&gt;</span></span>
<span id="cb203-3"><a href="entornos.html#cb203-3" aria-hidden="true" tabindex="-1"></a><span class="do">## attr(,&quot;name&quot;)</span></span>
<span id="cb203-4"><a href="entornos.html#cb203-4" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &quot;package:stats&quot;</span></span>
<span id="cb203-5"><a href="entornos.html#cb203-5" aria-hidden="true" tabindex="-1"></a><span class="do">## attr(,&quot;path&quot;)</span></span>
<span id="cb203-6"><a href="entornos.html#cb203-6" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &quot;/Library/Frameworks/R.framework/Versions/3.0/Resources/library/stats&quot;</span></span></code></pre></div>
<p>Tres entornos en su árbol también vienen con sus propias funciones de acceso. Estos son el entorno global (<code>R_GlobalEnv</code>), el entorno base (<code>base</code>) y el entorno vacío (<code>R_EmptyEnv</code>). Puedes referirte a ellos con:</p>
<div class="sourceCode" id="cb204"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb204-1"><a href="entornos.html#cb204-1" aria-hidden="true" tabindex="-1"></a><span class="fu">globalenv</span>()</span>
<span id="cb204-2"><a href="entornos.html#cb204-2" aria-hidden="true" tabindex="-1"></a><span class="do">## &lt;environment: R_GlobalEnv&gt;</span></span>
<span id="cb204-3"><a href="entornos.html#cb204-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb204-4"><a href="entornos.html#cb204-4" aria-hidden="true" tabindex="-1"></a><span class="fu">baseenv</span>()</span>
<span id="cb204-5"><a href="entornos.html#cb204-5" aria-hidden="true" tabindex="-1"></a><span class="do">## &lt;environment: base&gt;</span></span>
<span id="cb204-6"><a href="entornos.html#cb204-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb204-7"><a href="entornos.html#cb204-7" aria-hidden="true" tabindex="-1"></a><span class="fu">emptyenv</span>()</span>
<span id="cb204-8"><a href="entornos.html#cb204-8" aria-hidden="true" tabindex="-1"></a><span class="do">##&lt;environment: R_EmptyEnv&gt;</span></span></code></pre></div>
<p>A continuación, puede buscar el padre de un entorno con <code>parent.env</code>:</p>
<div class="sourceCode" id="cb205"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb205-1"><a href="entornos.html#cb205-1" aria-hidden="true" tabindex="-1"></a><span class="fu">parent.env</span>(<span class="fu">globalenv</span>())</span>
<span id="cb205-2"><a href="entornos.html#cb205-2" aria-hidden="true" tabindex="-1"></a><span class="do">## &lt;environment: package:pryr&gt;</span></span>
<span id="cb205-3"><a href="entornos.html#cb205-3" aria-hidden="true" tabindex="-1"></a><span class="do">## attr(,&quot;name&quot;)</span></span>
<span id="cb205-4"><a href="entornos.html#cb205-4" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &quot;package:pryr&quot;</span></span>
<span id="cb205-5"><a href="entornos.html#cb205-5" aria-hidden="true" tabindex="-1"></a><span class="do">## attr(,&quot;path&quot;)</span></span>
<span id="cb205-6"><a href="entornos.html#cb205-6" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &quot;/Library/Frameworks/R.framework/Versions/3.0/Resources/library/pryr&quot;</span></span></code></pre></div>
<p>Tenga en cuenta que el entorno vacío es el único entorno R sin padre:</p>
<div class="sourceCode" id="cb206"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb206-1"><a href="entornos.html#cb206-1" aria-hidden="true" tabindex="-1"></a><span class="fu">parent.env</span>(<span class="fu">emptyenv</span>())</span>
<span id="cb206-2"><a href="entornos.html#cb206-2" aria-hidden="true" tabindex="-1"></a><span class="do">## Error in parent.env(emptyenv()) : the empty environment has no parent</span></span></code></pre></div>
<p>Puede ver los objetos guardados en un entorno con <code>ls</code> o <code>ls.str</code>. <code>ls</code> devolverá solo los nombres de los objetos, pero <code>ls.str</code> mostrará un poco sobre la estructura de cada objeto:</p>
<div class="sourceCode" id="cb207"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb207-1"><a href="entornos.html#cb207-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span>(<span class="fu">emptyenv</span>())</span>
<span id="cb207-2"><a href="entornos.html#cb207-2" aria-hidden="true" tabindex="-1"></a><span class="do">## character(0)</span></span>
<span id="cb207-3"><a href="entornos.html#cb207-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb207-4"><a href="entornos.html#cb207-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span>(<span class="fu">globalenv</span>())</span>
<span id="cb207-5"><a href="entornos.html#cb207-5" aria-hidden="true" tabindex="-1"></a><span class="do">##  &quot;ahora&quot;   &quot;barajar&quot;   &quot;dado&quot;    &quot;genero&quot;    &quot;lst&quot;   &quot;mano&quot;</span></span>
<span id="cb207-6"><a href="entornos.html#cb207-6" aria-hidden="true" tabindex="-1"></a><span class="do">##   &quot;mazo&quot;   &quot;mazo2&quot;   &quot;mazo3&quot;   &quot;mazo4&quot;   &quot;mazo5&quot;    &quot;millon&quot;        </span></span>
<span id="cb207-7"><a href="entornos.html#cb207-7" aria-hidden="true" tabindex="-1"></a><span class="do">##  &quot;nuevo&quot;   &quot;repartir&quot;    &quot;vec&quot;  </span></span></code></pre></div>
<p>El entorno vacío es, como es lógico, vacío; el entorno base tiene demasiados objetos para enumerarlos aquí; y el entorno global tiene algunas caras conocidas. Es donde R ha guardado todos los objetos que ha creado hasta ahora.</p>

<div class="rmdtip">
El panel de Global Environment de RStudio muestra todos los objetos en su entorno global.
</div>
<p>Puede usar la sintaxis <code>$</code> de R para acceder a un objeto en un entorno específico. Por ejemplo, puedes acceder a <code>mazo</code> desde el entorno global:</p>
<div class="sourceCode" id="cb208"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb208-1"><a href="entornos.html#cb208-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">globalenv</span>()<span class="sc">$</span>mazo, <span class="dv">3</span>)</span>
<span id="cb208-2"><a href="entornos.html#cb208-2" aria-hidden="true" tabindex="-1"></a><span class="do">##  cara  palo valor</span></span>
<span id="cb208-3"><a href="entornos.html#cb208-3" aria-hidden="true" tabindex="-1"></a><span class="do">##   rey picas    13</span></span>
<span id="cb208-4"><a href="entornos.html#cb208-4" aria-hidden="true" tabindex="-1"></a><span class="do">## reina picas    12</span></span>
<span id="cb208-5"><a href="entornos.html#cb208-5" aria-hidden="true" tabindex="-1"></a><span class="do">##  jota picas    11</span></span></code></pre></div>
<p>Y puede usar la función <code>assign</code> para guardar un objeto en un entorno particular. Primero dale a <code>assign</code> el nombre del nuevo objeto (como una cadena de caracteres). Luego dale a <code>assign</code> el valor del nuevo objeto, y finalmente el entorno para guardar el objeto:</p>
<div class="sourceCode" id="cb209"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb209-1"><a href="entornos.html#cb209-1" aria-hidden="true" tabindex="-1"></a><span class="fu">assign</span>(<span class="st">&quot;nuevo&quot;</span>, <span class="st">&quot;Hola Global&quot;</span>, <span class="at">envir =</span> <span class="fu">globalenv</span>())</span>
<span id="cb209-2"><a href="entornos.html#cb209-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb209-3"><a href="entornos.html#cb209-3" aria-hidden="true" tabindex="-1"></a><span class="fu">globalenv</span>()<span class="sc">$</span>nuevo</span>
<span id="cb209-4"><a href="entornos.html#cb209-4" aria-hidden="true" tabindex="-1"></a><span class="do">## &quot;Hola Global&quot;</span></span></code></pre></div>
<p>Tenga en cuenta que <code>assign</code> funciona de forma similar a <code>&lt;-</code>. Si un objeto ya existe con el nombre dado en el entorno dado, <code>assign</code> lo sobrescribirá sin pedir permiso. Esto hace que <code>assign</code> sea útil para actualizar objetos.</p>
<p>Ahora que puede explorar el árbol de entorno de R, examinemos cómo lo usa R. R trabaja en estrecha colaboración con el árbol del entorno para buscar objetos, almacenar objetos y evaluar funciones. La forma en que R realice cada una de estas tareas dependerá del entorno activo actual.</p>
<div id="el-entorno-activo" class="section level3 hasAnchor" number="8.2.1">
<h3><span class="header-section-number">8.2.1</span> El Entorno Activo<a href="entornos.html#el-entorno-activo" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>En cualquier momento, R está trabajando en estrecha colaboración con un solo entorno. R almacenará nuevos objetos en este entorno (si crea alguno), y R utilizará este entorno como punto de partida para buscar objetos existentes (si llama a alguno). Llamaré a este entorno especial el <em>entorno activo</em>. El entorno activo suele ser el entorno global, pero esto puede cambiar cuando ejecuta una función.</p>
<p>Puede usar <code>environment</code> para ver el entorno activo actual:</p>
<div class="sourceCode" id="cb210"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb210-1"><a href="entornos.html#cb210-1" aria-hidden="true" tabindex="-1"></a><span class="fu">environment</span>()</span>
<span id="cb210-2"><a href="entornos.html#cb210-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&lt;</span>environment<span class="sc">:</span> R_GlobalEnv<span class="sc">&gt;</span></span></code></pre></div>
<p>El entorno global juega un papel especial en R. Es el entorno activo para cada comando que ejecuta en la línea de comandos. Como resultado, cualquier objeto que cree en la línea de comandos se guardará en el entorno global. Puede pensar en el entorno global como su espacio de trabajo de usuario.</p>
<p>Cuando llama a un objeto en la línea de comando, R lo buscará primero en el entorno global. Pero, ¿y si el objeto no está allí? En ese caso, R seguirá una serie de reglas para buscar el objeto.</p>
</div>
</div>
<div id="reglas-de-alcance" class="section level2 hasAnchor" number="8.3">
<h2><span class="header-section-number">8.3</span> Reglas de Alcance<a href="entornos.html#reglas-de-alcance" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>R sigue un conjunto especial de reglas para buscar objetos. Estas reglas se conocen como reglas de alcance de R y ya conoce un par de ellas:</p>
<ol style="list-style-type: decimal">
<li>R busca objetos en el entorno activo actual.</li>
<li>Cuando trabaja en la línea de comandos, el entorno activo es el entorno global. Por lo tanto, R busca objetos a los que llama en la línea de comando en el entorno global.</li>
</ol>
<p>Aquí hay una tercera regla que explica cómo R encuentra objetos que no están en el entorno activo.</p>
<ol start="3" style="list-style-type: decimal">
<li>Cuando R no encuentra un objeto en un entorno, R busca en el entorno principal del entorno, luego en el principal del principal, y así sucesivamente, hasta que R encuentra el objeto o llega al entorno vacío.</li>
</ol>
<p>Entonces, si llama a un objeto en la línea de comando, R lo buscará en el entorno global. Si R no puede encontrarlo allí, R buscará en el padre del entorno global, y luego en el padre del padre, y así sucesivamente, ascendiendo por el árbol del entorno hasta que encuentre el objeto, como en la Figura @ ref(figura:path). Si R no puede encontrar el objeto en ningún entorno, devolverá un error que dice que no se encuentra el objeto.</p>
<div class="figure"><span style="display:block;" id="fig:path"></span>
<img src="images/hopr_0603.png" alt="R buscará un objeto por su nombre en el entorno activo, aquí el entorno global. Si R no encuentra el objeto allí, buscará en el padre del entorno activo y luego en el padre del padre, y así sucesivamente hasta que R encuentre el objeto o se quede sin entornos." width="713" />
<p class="caption">
Figure 8.3: R buscará un objeto por su nombre en el entorno activo, aquí el entorno global. Si R no encuentra el objeto allí, buscará en el padre del entorno activo y luego en el padre del padre, y así sucesivamente hasta que R encuentre el objeto o se quede sin entornos.
</p>
</div>

<div class="rmdtip">
Recuerde que las funciones son un tipo de objeto en R. R almacenará y buscará funciones de la misma manera que almacena y busca otros objetos, buscándolos por nombre en el árbol del entorno.
</div>
</div>
<div id="asignación" class="section level2 hasAnchor" number="8.4">
<h2><span class="header-section-number">8.4</span> Asignación<a href="entornos.html#asignación" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Cuando asigna un valor a un objeto, R guarda el valor en el entorno activo bajo el nombre del objeto. Si ya existe un objeto con el mismo nombre en el entorno activo, R lo sobrescribirá.</p>
<p>Por ejemplo, existe un objeto llamado <code>nuevo</code> en el entorno global:</p>
<div class="sourceCode" id="cb211"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb211-1"><a href="entornos.html#cb211-1" aria-hidden="true" tabindex="-1"></a>nuevo</span>
<span id="cb211-2"><a href="entornos.html#cb211-2" aria-hidden="true" tabindex="-1"></a><span class="do">## &quot;Hola Global&quot;</span></span></code></pre></div>
<p>Puede guardar un nuevo objeto llamado <code>nuevo</code> en el entorno global con este comando. R sobrescribirá el objeto anterior como resultado:</p>
<div class="sourceCode" id="cb212"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb212-1"><a href="entornos.html#cb212-1" aria-hidden="true" tabindex="-1"></a>nuevo <span class="ot">&lt;-</span> <span class="st">&quot;Hola Activo&quot;</span></span>
<span id="cb212-2"><a href="entornos.html#cb212-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-3"><a href="entornos.html#cb212-3" aria-hidden="true" tabindex="-1"></a>nuevo</span>
<span id="cb212-4"><a href="entornos.html#cb212-4" aria-hidden="true" tabindex="-1"></a><span class="do">## &quot;Hola Activo&quot;</span></span></code></pre></div>
<p>Este arreglo crea un dilema para R cada vez que R ejecuta una función. Muchas funciones guardan objetos temporales que les ayudan a hacer su trabajo. Por ejemplo, la función <code>tirar</code> del <a href="proyecto-1-dados-ponderados.html#proyecto-1-dados-ponderados">Proyecto 1: Dados Ponderados</a> guardó un objeto llamado <code>dado</code> y un objeto llamado <code>dados</code>:</p>
<div class="sourceCode" id="cb213"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb213-1"><a href="entornos.html#cb213-1" aria-hidden="true" tabindex="-1"></a>tirar <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb213-2"><a href="entornos.html#cb213-2" aria-hidden="true" tabindex="-1"></a>  dado <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span></span>
<span id="cb213-3"><a href="entornos.html#cb213-3" aria-hidden="true" tabindex="-1"></a>  dados <span class="ot">&lt;-</span> <span class="fu">sample</span>(dado, <span class="at">size =</span> <span class="dv">2</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb213-4"><a href="entornos.html#cb213-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sum</span>(dados)</span>
<span id="cb213-5"><a href="entornos.html#cb213-5" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>R debe guardar estos objetos temporales en el entorno activo; pero si R hace eso, puede sobrescribir los objetos existentes. Los autores de funciones no pueden adivinar de antemano qué nombres pueden existir ya en su entorno activo. ¿Cómo evita R este riesgo? Cada vez que R ejecuta una función, crea un nuevo entorno activo para evaluar la función.</p>
</div>
<div id="evaluación" class="section level2 hasAnchor" number="8.5">
<h2><span class="header-section-number">8.5</span> Evaluación<a href="entornos.html#evaluación" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>R crea un nuevo entorno cada vez que evalúa una función. R usará el nuevo entorno como el entorno activo mientras ejecuta la función, y luego R volverá al entorno desde el que llamó a la función, trayendo consigo el resultado de la función. Llamemos a estos nuevos entornos <em>entornos de tiempo de ejecución</em> porque R los crea en tiempo de ejecución para evaluar funciones.</p>
<p>Usaremos la siguiente función para explorar los entornos de tiempo de ejecución de R. Queremos saber cómo son los entornos: ¿cuáles son sus entornos principales y qué objetos contienen? <code>show_env</code> está diseñado para decirnos:</p>
<div class="sourceCode" id="cb214"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb214-1"><a href="entornos.html#cb214-1" aria-hidden="true" tabindex="-1"></a>show_env <span class="ot">&lt;-</span> <span class="cf">function</span>(){</span>
<span id="cb214-2"><a href="entornos.html#cb214-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list</span>(<span class="at">ran.in =</span> <span class="fu">environment</span>(), </span>
<span id="cb214-3"><a href="entornos.html#cb214-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">parent =</span> <span class="fu">parent.env</span>(<span class="fu">environment</span>()), </span>
<span id="cb214-4"><a href="entornos.html#cb214-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">objects =</span> <span class="fu">ls.str</span>(<span class="fu">environment</span>()))</span>
<span id="cb214-5"><a href="entornos.html#cb214-5" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p><code>show_env</code> es en sí mismo una función, por lo que cuando llamamos a <code>show_env()</code>, R creará un entorno de tiempo de ejecución para evaluar la función. Los resultados de <code>show_env</code> nos dirán el nombre del entorno de tiempo de ejecución, su padre y qué objetos entorno de tiempo de ejecución contiene:</p>
<div class="sourceCode" id="cb215"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb215-1"><a href="entornos.html#cb215-1" aria-hidden="true" tabindex="-1"></a><span class="fu">show_env</span>()</span>
<span id="cb215-2"><a href="entornos.html#cb215-2" aria-hidden="true" tabindex="-1"></a><span class="do">## $ran.in</span></span>
<span id="cb215-3"><a href="entornos.html#cb215-3" aria-hidden="true" tabindex="-1"></a><span class="do">## &lt;environment: 0x7ff711d12e28&gt;</span></span>
<span id="cb215-4"><a href="entornos.html#cb215-4" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb215-5"><a href="entornos.html#cb215-5" aria-hidden="true" tabindex="-1"></a><span class="do">## $parent</span></span>
<span id="cb215-6"><a href="entornos.html#cb215-6" aria-hidden="true" tabindex="-1"></a><span class="do">## &lt;environment: R_GlobalEnv&gt;</span></span>
<span id="cb215-7"><a href="entornos.html#cb215-7" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb215-8"><a href="entornos.html#cb215-8" aria-hidden="true" tabindex="-1"></a><span class="do">## $objects</span></span></code></pre></div>
<p>Los resultados revelan que R creó un nuevo entorno llamado <code>0x7ff711d12e28</code> para ejecutar <code>show_env()</code>. El entorno no tenía objetos y su padre era el <code>entorno global</code>. Entonces, para ejecutar <code>show_env</code>, el árbol de entorno de R se parecía a la figura <a href="entornos.html#fig:tree">8.4</a>.</p>
<p>Ejecutemos <code>show_env</code> de nuevo:</p>
<div class="sourceCode" id="cb216"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb216-1"><a href="entornos.html#cb216-1" aria-hidden="true" tabindex="-1"></a><span class="fu">show_env</span>()</span>
<span id="cb216-2"><a href="entornos.html#cb216-2" aria-hidden="true" tabindex="-1"></a><span class="do">## $ran.in</span></span>
<span id="cb216-3"><a href="entornos.html#cb216-3" aria-hidden="true" tabindex="-1"></a><span class="do">## &lt;environment: 0x7ff715f49808&gt;</span></span>
<span id="cb216-4"><a href="entornos.html#cb216-4" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb216-5"><a href="entornos.html#cb216-5" aria-hidden="true" tabindex="-1"></a><span class="do">## $parent</span></span>
<span id="cb216-6"><a href="entornos.html#cb216-6" aria-hidden="true" tabindex="-1"></a><span class="do">## &lt;environment: R_GlobalEnv&gt;</span></span>
<span id="cb216-7"><a href="entornos.html#cb216-7" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb216-8"><a href="entornos.html#cb216-8" aria-hidden="true" tabindex="-1"></a><span class="do">## $objects</span></span></code></pre></div>
<p>Esta vez <code>show_env</code> se ejecutó en un nuevo entorno, <code>0x7ff715f49808</code>. R crea un nuevo entorno <em>cada</em> vez que ejecuta una función. El entorno <code>0x7ff715f49808</code> se ve exactamente igual que <code>0x7ff711d12e28</code>. Está vacío y tiene el mismo entorno global que su padre.</p>
<div class="figure"><span style="display:block;" id="fig:tree"></span>
<img src="images/hopr_0604.png" alt="R crea un nuevo entorno para ejecutar show_env. El entorno es un elemento secundario del entorno global." width="700" />
<p class="caption">
Figure 8.4: R crea un nuevo entorno para ejecutar show_env. El entorno es un elemento secundario del entorno global.
</p>
</div>
<p>Ahora, consideremos qué entorno usará R como padre del entorno de tiempo de ejecución.</p>
<p>R conectará el entorno de tiempo de ejecución de una función con el entorno en el que la función <em>fue creada por primera vez</em>. Este entorno juega un papel importante en la vida de la función, porque todos los entornos de tiempo de ejecución de la función lo utilizarán como padre. Llamemos a este entorno el <em>entorno de origen</em>. Puede buscar el entorno de origen de una función ejecutando <code>environment</code> en la función:</p>
<div class="sourceCode" id="cb217"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb217-1"><a href="entornos.html#cb217-1" aria-hidden="true" tabindex="-1"></a><span class="fu">environment</span>(show_env)</span>
<span id="cb217-2"><a href="entornos.html#cb217-2" aria-hidden="true" tabindex="-1"></a><span class="do">## &lt;environment: R_GlobalEnv&gt;</span></span></code></pre></div>
<p>El entorno de origen de <code>show_env</code> es el entorno global porque creamos <code>show_env</code> en la línea de comando, pero no es necesario que el entorno de origen sea el entorno global. Por ejemplo, el entorno de <code>parenvs</code> es el paquete <code>pryr</code>:</p>
<div class="sourceCode" id="cb218"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb218-1"><a href="entornos.html#cb218-1" aria-hidden="true" tabindex="-1"></a><span class="fu">environment</span>(parenvs)</span>
<span id="cb218-2"><a href="entornos.html#cb218-2" aria-hidden="true" tabindex="-1"></a><span class="do">## &lt;environment: namespace:pryr&gt;</span></span></code></pre></div>
<p>En otras palabras, el padre de un entorno de tiempo de ejecución no siempre será el entorno global; será el entorno en el que se creó la función por primera vez.</p>
<p>Finalmente, veamos los objetos contenidos en un entorno de tiempo de ejecución. Por el momento, los entornos de ejecución de <code>show_env</code> no contienen ningún objeto, pero eso es fácil de arreglar. Simplemente haga que <code>show_env</code> cree algunos objetos en el cuerpo de su código. R almacenará cualquier objeto creado por <code>show_env</code> en su entorno de ejecución. ¿Por qué? Debido a que el entorno de tiempo de ejecución será el entorno activo cuando se creen esos objetos:</p>
<div class="sourceCode" id="cb219"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb219-1"><a href="entornos.html#cb219-1" aria-hidden="true" tabindex="-1"></a>show_env <span class="ot">&lt;-</span> <span class="cf">function</span>(){</span>
<span id="cb219-2"><a href="entornos.html#cb219-2" aria-hidden="true" tabindex="-1"></a>  a <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb219-3"><a href="entornos.html#cb219-3" aria-hidden="true" tabindex="-1"></a>  b <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb219-4"><a href="entornos.html#cb219-4" aria-hidden="true" tabindex="-1"></a>  c <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb219-5"><a href="entornos.html#cb219-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list</span>(<span class="at">ran.in =</span> <span class="fu">environment</span>(), </span>
<span id="cb219-6"><a href="entornos.html#cb219-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">parent =</span> <span class="fu">parent.env</span>(<span class="fu">environment</span>()), </span>
<span id="cb219-7"><a href="entornos.html#cb219-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">objects =</span> <span class="fu">ls.str</span>(<span class="fu">environment</span>()))</span>
<span id="cb219-8"><a href="entornos.html#cb219-8" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Esta vez, cuando ejecutamos <code>show_env</code>, R almacena <code>a</code>, <code>b</code> y <code>c</code> en el entorno de ejecución:</p>
<div class="sourceCode" id="cb220"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb220-1"><a href="entornos.html#cb220-1" aria-hidden="true" tabindex="-1"></a><span class="fu">show_env</span>()</span>
<span id="cb220-2"><a href="entornos.html#cb220-2" aria-hidden="true" tabindex="-1"></a><span class="do">## $ran.in</span></span>
<span id="cb220-3"><a href="entornos.html#cb220-3" aria-hidden="true" tabindex="-1"></a><span class="do">## &lt;environment: 0x7ff712312cd0&gt;</span></span>
<span id="cb220-4"><a href="entornos.html#cb220-4" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb220-5"><a href="entornos.html#cb220-5" aria-hidden="true" tabindex="-1"></a><span class="do">## $parent</span></span>
<span id="cb220-6"><a href="entornos.html#cb220-6" aria-hidden="true" tabindex="-1"></a><span class="do">## &lt;environment: R_GlobalEnv&gt;</span></span>
<span id="cb220-7"><a href="entornos.html#cb220-7" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb220-8"><a href="entornos.html#cb220-8" aria-hidden="true" tabindex="-1"></a><span class="do">## $objects</span></span>
<span id="cb220-9"><a href="entornos.html#cb220-9" aria-hidden="true" tabindex="-1"></a><span class="do">## a :  num 1</span></span>
<span id="cb220-10"><a href="entornos.html#cb220-10" aria-hidden="true" tabindex="-1"></a><span class="do">## b :  num 2</span></span>
<span id="cb220-11"><a href="entornos.html#cb220-11" aria-hidden="true" tabindex="-1"></a><span class="do">## c :  num 3</span></span></code></pre></div>
<p>Así es como R se asegura de que una función no sobrescriba nada que no debería. Todos los objetos creados por la función se almacenan en un entorno de tiempo de ejecución seguro y apartado.</p>
<p>R también pondrá un segundo tipo de objeto en un entorno de tiempo de ejecución. Si una función tiene argumentos, R copiará cada argumento en el entorno de tiempo de ejecución. El argumento aparecerá como un objeto que tiene el nombre del argumento pero el valor de cualquier entrada que el usuario proporcionó para el argumento. Esto asegura que una función podrá encontrar y usar cada uno de sus argumentos:</p>
<div class="sourceCode" id="cb221"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb221-1"><a href="entornos.html#cb221-1" aria-hidden="true" tabindex="-1"></a>foo <span class="ot">&lt;-</span> <span class="st">&quot;llevame a tu tiempo de ejecucion&quot;</span></span>
<span id="cb221-2"><a href="entornos.html#cb221-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb221-3"><a href="entornos.html#cb221-3" aria-hidden="true" tabindex="-1"></a>show_env <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">x =</span> foo){</span>
<span id="cb221-4"><a href="entornos.html#cb221-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list</span>(<span class="at">ran.in =</span> <span class="fu">environment</span>(), </span>
<span id="cb221-5"><a href="entornos.html#cb221-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">parent =</span> <span class="fu">parent.env</span>(<span class="fu">environment</span>()), </span>
<span id="cb221-6"><a href="entornos.html#cb221-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">objects =</span> <span class="fu">ls.str</span>(<span class="fu">environment</span>()))</span>
<span id="cb221-7"><a href="entornos.html#cb221-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb221-8"><a href="entornos.html#cb221-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb221-9"><a href="entornos.html#cb221-9" aria-hidden="true" tabindex="-1"></a><span class="fu">show_env</span>()</span>
<span id="cb221-10"><a href="entornos.html#cb221-10" aria-hidden="true" tabindex="-1"></a><span class="do">## $ran.in</span></span>
<span id="cb221-11"><a href="entornos.html#cb221-11" aria-hidden="true" tabindex="-1"></a><span class="do">## &lt;environment: 0x7ff712398958&gt;</span></span>
<span id="cb221-12"><a href="entornos.html#cb221-12" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb221-13"><a href="entornos.html#cb221-13" aria-hidden="true" tabindex="-1"></a><span class="do">## $parent</span></span>
<span id="cb221-14"><a href="entornos.html#cb221-14" aria-hidden="true" tabindex="-1"></a><span class="do">## &lt;environment: R_GlobalEnv&gt;</span></span>
<span id="cb221-15"><a href="entornos.html#cb221-15" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb221-16"><a href="entornos.html#cb221-16" aria-hidden="true" tabindex="-1"></a><span class="do">## $objects</span></span>
<span id="cb221-17"><a href="entornos.html#cb221-17" aria-hidden="true" tabindex="-1"></a><span class="do">## x :  chr &quot;llevame a tu tiempo de ejecucion&quot;</span></span></code></pre></div>
<p>Pongamos todo esto junto para ver cómo R evalúa una función. Antes de llamar a una función, R está trabajando en un entorno activo; llamemos a esto el <em>entorno de llamadas</em>. Es el entorno desde el que R llama a la función.</p>
<p>Luego llamas a la función. R responde configurando un nuevo entorno de tiempo de ejecución. Este entorno será un elemento secundario del entorno de origen de la función. R copiará cada uno de los argumentos de la función en el entorno de tiempo de ejecución y luego hará que el entorno de tiempo de ejecución sea el nuevo entorno activo.</p>
<p>A continuación, R ejecuta el código en el cuerpo de la función. Si el código crea objetos, R los almacena en el entorno activo, es decir, en tiempo de ejecución. Si el código llama a algún objeto, R usa sus reglas de alcance para buscarlos. R buscará el entorno de tiempo de ejecución, luego el padre del entorno de tiempo de ejecución (que será el entorno de origen), luego el padre del entorno de origen, y así sucesivamente. Tenga en cuenta que es posible que el entorno de llamada no esté en la ruta de búsqueda. Por lo general, una función solo llamará a sus argumentos, que R puede encontrar en el entorno de tiempo de ejecución activo.</p>
<p>Finalmente, R termina de ejecutar la función. Cambia el entorno activo de nuevo al entorno de llamada. Ahora R ejecuta cualquier otro comando en la línea de código que llamó a la función. Entonces, si guarda el resultado de la función en un objeto con <code>&lt;-</code>, el nuevo objeto se almacenará en el entorno de llamada.</p>
<p>En resumen, R almacena sus objetos en un sistema de entorno. En cualquier momento, R está trabajando en estrecha colaboración con un único entorno activo. Almacena nuevos objetos en este entorno y utiliza el entorno como punto de partida cuando busca objetos existentes. El entorno activo de R suele ser el entorno global, pero R ajustará el entorno activo para hacer cosas como ejecutar funciones de forma segura.</p>
<p>¿Cómo puedes usar este conocimiento para arreglar las funciones <code>repartir</code> y <code>barajar</code>?</p>
<p>Primero, comencemos con una pregunta de calentamiento. Supongamos que redefino <code>repartir</code> en la línea de comando de esta manera:</p>
<div class="sourceCode" id="cb222"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb222-1"><a href="entornos.html#cb222-1" aria-hidden="true" tabindex="-1"></a>repartir <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb222-2"><a href="entornos.html#cb222-2" aria-hidden="true" tabindex="-1"></a>  mazo[<span class="dv">1</span>, ]</span>
<span id="cb222-3"><a href="entornos.html#cb222-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Tenga en cuenta que <code>repartir</code> ya no toma un argumento y llama al objeto <code>mazo</code>, que vive en el entorno global.</p>
<p><strong>Ejercicio 8.1 (¿Funcionará repartir?)</strong> ¿Podrá R encontrar <code>mazo</code> y devolver una respuesta cuando llame a la nueva versión de <code>repartir</code>, como <code>repartir()</code>?</p>
<div class="solution">
<p><span id="unlabeled-div-14" class="solution"><em>Solution</em>. </span>Sí. <code>repartir</code> seguirá funcionando igual que antes. R ejecutará <code>repartir</code> en un entorno de tiempo de ejecución que es un elemento secundario del entorno global. ¿Por qué será un hijo del entorno global? Debido a que el entorno global es el entorno de origen de <code>repartir</code> (definimos <code>repartir</code> en el entorno global):</p>
</div>
<div class="sourceCode" id="cb223"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb223-1"><a href="entornos.html#cb223-1" aria-hidden="true" tabindex="-1"></a><span class="fu">environment</span>(repartir)</span>
<span id="cb223-2"><a href="entornos.html#cb223-2" aria-hidden="true" tabindex="-1"></a><span class="do">## &lt;environment: R_GlobalEnv&gt;</span></span></code></pre></div>
<p>Cuando <code>repartir</code> llama a <code>mazo</code>, R necesitará buscar el objeto <code>mazo</code>. Las reglas de alcance de R lo llevarán a la versión de <code>repartir</code> en el entorno global, como en la Figura <a href="entornos.html#fig:deal">8.5</a>. <code>mazo</code> funciona como se esperaba como resultado:</p>
<div class="sourceCode" id="cb224"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb224-1"><a href="entornos.html#cb224-1" aria-hidden="true" tabindex="-1"></a><span class="fu">repartir</span>()</span>
<span id="cb224-2"><a href="entornos.html#cb224-2" aria-hidden="true" tabindex="-1"></a><span class="do">##  cara  palo valor</span></span>
<span id="cb224-3"><a href="entornos.html#cb224-3" aria-hidden="true" tabindex="-1"></a><span class="do">##   rey picas    13</span></span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:deal"></span>
<img src="images/hopr_0605.png" alt="R encuentra el mazo mirando en el padre del entorno de tiempo de ejecución de repartir. El padre es el entorno global, el entorno de origen de repartir. Aquí, R encuentra la copia del mazo." width="746" />
<p class="caption">
Figure 8.5: R encuentra el mazo mirando en el padre del entorno de tiempo de ejecución de repartir. El padre es el entorno global, el entorno de origen de repartir. Aquí, R encuentra la copia del mazo.
</p>
</div>
<p>Ahora arreglemos la función <code>repartir</code> para eliminar las cartas que ha repartido del <code>mazo</code>. Recuerde que <code>repartir</code> devuelve la carta superior de <code>mazo</code> pero no elimina la carta de la baraja. Como resultado, <code>repartir</code> siempre devuelve la misma carta:</p>
<div class="sourceCode" id="cb225"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb225-1"><a href="entornos.html#cb225-1" aria-hidden="true" tabindex="-1"></a><span class="fu">repartir</span>()</span>
<span id="cb225-2"><a href="entornos.html#cb225-2" aria-hidden="true" tabindex="-1"></a><span class="do">##  cara  palo valor</span></span>
<span id="cb225-3"><a href="entornos.html#cb225-3" aria-hidden="true" tabindex="-1"></a><span class="do">##   rey picas    13</span></span>
<span id="cb225-4"><a href="entornos.html#cb225-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb225-5"><a href="entornos.html#cb225-5" aria-hidden="true" tabindex="-1"></a><span class="fu">repartir</span>()</span>
<span id="cb225-6"><a href="entornos.html#cb225-6" aria-hidden="true" tabindex="-1"></a><span class="do">##  cara  palo valor</span></span>
<span id="cb225-7"><a href="entornos.html#cb225-7" aria-hidden="true" tabindex="-1"></a><span class="do">##   rey picas    13</span></span></code></pre></div>
<p>Conoces suficiente sintaxis de R para eliminar la carta superior de <code>mazo</code>. El siguiente código guardará una copia prístina de <code>mazo</code> y luego eliminará la carta superior:</p>
<div class="sourceCode" id="cb226"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb226-1"><a href="entornos.html#cb226-1" aria-hidden="true" tabindex="-1"></a>MAZO <span class="ot">&lt;-</span> mazo</span>
<span id="cb226-2"><a href="entornos.html#cb226-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb226-3"><a href="entornos.html#cb226-3" aria-hidden="true" tabindex="-1"></a>mazo <span class="ot">&lt;-</span> mazo[<span class="sc">-</span><span class="dv">1</span>, ]</span>
<span id="cb226-4"><a href="entornos.html#cb226-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb226-5"><a href="entornos.html#cb226-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(mazo, <span class="dv">3</span>)</span>
<span id="cb226-6"><a href="entornos.html#cb226-6" aria-hidden="true" tabindex="-1"></a><span class="do">##  cara  palo valor</span></span>
<span id="cb226-7"><a href="entornos.html#cb226-7" aria-hidden="true" tabindex="-1"></a><span class="do">## reina picas    12</span></span>
<span id="cb226-8"><a href="entornos.html#cb226-8" aria-hidden="true" tabindex="-1"></a><span class="do">##  jota picas    11</span></span>
<span id="cb226-9"><a href="entornos.html#cb226-9" aria-hidden="true" tabindex="-1"></a><span class="do">##  diez picas    10</span></span></code></pre></div>
<p>Ahora agreguemos el código a <code>repartir</code>. Aquí <code>repartir</code> guarda (y luego devuelve) la carta superior de <code>mazo</code>. En el medio, quita la carta del <code>mazo</code>… ¿o no?</p>
<div class="sourceCode" id="cb227"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb227-1"><a href="entornos.html#cb227-1" aria-hidden="true" tabindex="-1"></a>repartir <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb227-2"><a href="entornos.html#cb227-2" aria-hidden="true" tabindex="-1"></a>  carta <span class="ot">&lt;-</span> mazo[<span class="dv">1</span>, ]</span>
<span id="cb227-3"><a href="entornos.html#cb227-3" aria-hidden="true" tabindex="-1"></a>  mazo <span class="ot">&lt;-</span> mazo[<span class="sc">-</span><span class="dv">1</span>, ]</span>
<span id="cb227-4"><a href="entornos.html#cb227-4" aria-hidden="true" tabindex="-1"></a>  carta</span>
<span id="cb227-5"><a href="entornos.html#cb227-5" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Este código no funcionará porque R estará en un entorno de tiempo de ejecución cuando ejecute <code>mazo &lt;- mazo[-1, ]</code>. En lugar de sobrescribir la copia global de <code>mazo</code> con <code>mazo[-1, ]</code>, <code>repartir`` simplemente creará una copia ligeramente alterada de</code>mazo` en su entorno de tiempo de ejecución, como en la Figura <a href="entornos.html#fig:second-deck">8.6</a>.</p>
<div class="figure"><span style="display:block;" id="fig:second-deck"></span>
<img src="images/hopr_0606.png" alt="La función de repartir busca el mazo en el entorno global pero guarda el mazo[-1, ] en el entorno de tiempo de ejecución como un nuevo objeto llamado mazo. " width="590" />
<p class="caption">
Figure 8.6: La función de repartir busca el mazo en el entorno global pero guarda el mazo[-1, ] en el entorno de tiempo de ejecución como un nuevo objeto llamado mazo.
</p>
</div>
<p>Ejercicio 8.2 (Sobreescribir el mazo) Vuelva a escribir la línea <code>mazo &lt;- mazo[-1, ]</code> de <code>repartir</code> para <em>asignar</em> <code>mazo[-1, ]</code> a un objeto llamado <code>mazo</code> en el entorno global. Sugerencia: considere la función <code>assign</code>.</p>
<div class="solution">
<p><span id="unlabeled-div-15" class="solution"><em>Solution</em>. </span>Puede asignar un objeto a un entorno específico con la función <code>assign</code>:</p>
</div>
<div class="sourceCode" id="cb228"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb228-1"><a href="entornos.html#cb228-1" aria-hidden="true" tabindex="-1"></a>repartir <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb228-2"><a href="entornos.html#cb228-2" aria-hidden="true" tabindex="-1"></a>  carta <span class="ot">&lt;-</span> mazo[<span class="dv">1</span>, ]</span>
<span id="cb228-3"><a href="entornos.html#cb228-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">assign</span>(<span class="st">&quot;mazo&quot;</span>, mazo[<span class="sc">-</span><span class="dv">1</span>, ], <span class="at">envir =</span> <span class="fu">globalenv</span>())</span>
<span id="cb228-4"><a href="entornos.html#cb228-4" aria-hidden="true" tabindex="-1"></a>  carta</span>
<span id="cb228-5"><a href="entornos.html#cb228-5" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Ahora <code>repartir</code> finalmente limpiará la copia global de <code>mazo</code>, y podemos <code>repartir</code> cartas tal como lo haríamos en la vida real:</p>
<div class="sourceCode" id="cb229"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb229-1"><a href="entornos.html#cb229-1" aria-hidden="true" tabindex="-1"></a><span class="fu">repartir</span>()</span>
<span id="cb229-2"><a href="entornos.html#cb229-2" aria-hidden="true" tabindex="-1"></a><span class="do">##  cara  palo valor</span></span>
<span id="cb229-3"><a href="entornos.html#cb229-3" aria-hidden="true" tabindex="-1"></a><span class="do">## reina picas    12</span></span>
<span id="cb229-4"><a href="entornos.html#cb229-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb229-5"><a href="entornos.html#cb229-5" aria-hidden="true" tabindex="-1"></a><span class="fu">repartir</span>()</span>
<span id="cb229-6"><a href="entornos.html#cb229-6" aria-hidden="true" tabindex="-1"></a><span class="do">## cara  palo valor</span></span>
<span id="cb229-7"><a href="entornos.html#cb229-7" aria-hidden="true" tabindex="-1"></a><span class="do">## jota picas    11</span></span>
<span id="cb229-8"><a href="entornos.html#cb229-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb229-9"><a href="entornos.html#cb229-9" aria-hidden="true" tabindex="-1"></a><span class="fu">repartir</span>()</span>
<span id="cb229-10"><a href="entornos.html#cb229-10" aria-hidden="true" tabindex="-1"></a><span class="do">## cara  palo valor</span></span>
<span id="cb229-11"><a href="entornos.html#cb229-11" aria-hidden="true" tabindex="-1"></a><span class="do">## diez picas    10</span></span></code></pre></div>
<p>Volvamos nuestra atención a la función <code>barajar</code>:</p>
<div class="sourceCode" id="cb230"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb230-1"><a href="entornos.html#cb230-1" aria-hidden="true" tabindex="-1"></a>barajar <span class="ot">&lt;-</span> <span class="cf">function</span>(cartas) { </span>
<span id="cb230-2"><a href="entornos.html#cb230-2" aria-hidden="true" tabindex="-1"></a>  aleatorio <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">52</span>, <span class="at">size =</span> <span class="dv">52</span>)</span>
<span id="cb230-3"><a href="entornos.html#cb230-3" aria-hidden="true" tabindex="-1"></a>  cartas[aleatorio, ]</span>
<span id="cb230-4"><a href="entornos.html#cb230-4" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p><code>barajar(mazo)</code> no mezcla el objeto <code>mazo</code>; devuelve una copia barajada del objeto <code>mazo</code>:</p>
<div class="sourceCode" id="cb231"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb231-1"><a href="entornos.html#cb231-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(mazo, <span class="dv">3</span>)</span>
<span id="cb231-2"><a href="entornos.html#cb231-2" aria-hidden="true" tabindex="-1"></a><span class="do">##  cara  palo valor</span></span>
<span id="cb231-3"><a href="entornos.html#cb231-3" aria-hidden="true" tabindex="-1"></a><span class="do">## nueve picas     9</span></span>
<span id="cb231-4"><a href="entornos.html#cb231-4" aria-hidden="true" tabindex="-1"></a><span class="do">##  ocho picas     8</span></span>
<span id="cb231-5"><a href="entornos.html#cb231-5" aria-hidden="true" tabindex="-1"></a><span class="do">## siete picas     7</span></span>
<span id="cb231-6"><a href="entornos.html#cb231-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb231-7"><a href="entornos.html#cb231-7" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">barajar</span>(mazo)</span>
<span id="cb231-8"><a href="entornos.html#cb231-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb231-9"><a href="entornos.html#cb231-9" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(mazo, <span class="dv">3</span>)</span>
<span id="cb231-10"><a href="entornos.html#cb231-10" aria-hidden="true" tabindex="-1"></a><span class="do">##  cara  palo valor</span></span>
<span id="cb231-11"><a href="entornos.html#cb231-11" aria-hidden="true" tabindex="-1"></a><span class="do">## nueve picas     9</span></span>
<span id="cb231-12"><a href="entornos.html#cb231-12" aria-hidden="true" tabindex="-1"></a><span class="do">##  ocho picas     8</span></span>
<span id="cb231-13"><a href="entornos.html#cb231-13" aria-hidden="true" tabindex="-1"></a><span class="do">## siete picas     7</span></span>
<span id="cb231-14"><a href="entornos.html#cb231-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb231-15"><a href="entornos.html#cb231-15" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(a, <span class="dv">3</span>)</span>
<span id="cb231-16"><a href="entornos.html#cb231-16" aria-hidden="true" tabindex="-1"></a><span class="do">##  cara      palo valor</span></span>
<span id="cb231-17"><a href="entornos.html#cb231-17" aria-hidden="true" tabindex="-1"></a><span class="do">##    as diamantes     1</span></span>
<span id="cb231-18"><a href="entornos.html#cb231-18" aria-hidden="true" tabindex="-1"></a><span class="do">## siete  treboles     7</span></span>
<span id="cb231-19"><a href="entornos.html#cb231-19" aria-hidden="true" tabindex="-1"></a><span class="do">##   dos  treboles     2</span></span></code></pre></div>
<p>Este comportamiento es ahora indeseable de dos maneras. Primero, <code>barajr</code> falla al barajar <code>mazo</code>. En segundo lugar, <code>barajar</code> devuelve una copia de <code>mazo</code>, a la que pueden faltarle las cartas que se han repartido. Sería mejor si <code>barajar</code> devolviera las cartas repartidas a la baraja y luego se barajaran. Esto es lo que sucede cuando barajas una baraja de cartas en la vida real.</p>
<p>Ejercicio 8.3 (Rescribir barajr) Vuelva a escribir <code>barajar</code> para que reemplace la copia de <code>mazo</code> que vive en el entorno global con una versión barajada de <code>MAZO</code>, la copia intacta de <code>mazo</code> que también vive en el entorno global. La nueva versión de <code>barajar</code> no debería tener argumentos y no devolver ningún resultado.</p>
<div class="solution">
<p><span id="unlabeled-div-16" class="solution"><em>Solution</em>. </span>Puede actualizar <code>barajar</code> de la misma manera que actualizó <code>repartir</code>. La siguiente versión hará el trabajo:</p>
</div>
<div class="sourceCode" id="cb232"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb232-1"><a href="entornos.html#cb232-1" aria-hidden="true" tabindex="-1"></a>barajar <span class="ot">&lt;-</span> <span class="cf">function</span>(){</span>
<span id="cb232-2"><a href="entornos.html#cb232-2" aria-hidden="true" tabindex="-1"></a>  aleatorio <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">52</span>, <span class="at">size =</span> <span class="dv">52</span>)</span>
<span id="cb232-3"><a href="entornos.html#cb232-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">assign</span>(<span class="st">&quot;mazo&quot;</span>, MAZO[aleatorio, ], <span class="at">envir =</span> <span class="fu">globalenv</span>())</span>
<span id="cb232-4"><a href="entornos.html#cb232-4" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Dado que <code>MAZO</code> vive en el entorno global, el entorno de origen de <code>barajar</code>, <code>barajar</code> podrá encontrar <code>MAZO</code> en tiempo de ejecución. R buscará <code>MAZO</code> primero en el entorno de tiempo de ejecución de <code>barajar</code> y luego en el entorno de origen de <code>barajar</code>, el entorno global, que es donde se almacena <code>MAZO</code>.</p>
<p>La segunda línea de <code>barajar</code> creará una copia reordenada de <code>MAZO</code> y la guardará como <code>mazo</code> en el entorno global. Esto sobrescribirá la versión anterior, no barajada, de <code>mazo</code>.</p>
</div>
<div id="cierres" class="section level2 hasAnchor" number="8.6">
<h2><span class="header-section-number">8.6</span> Cierres<a href="entornos.html#cierres" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Nuestro sistema finalmente funciona. Por ejemplo, puede barajar las cartas y luego repartir una mano de blackjack:</p>
<div class="sourceCode" id="cb233"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb233-1"><a href="entornos.html#cb233-1" aria-hidden="true" tabindex="-1"></a><span class="fu">barajar</span>()</span>
<span id="cb233-2"><a href="entornos.html#cb233-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb233-3"><a href="entornos.html#cb233-3" aria-hidden="true" tabindex="-1"></a><span class="fu">repartir</span>()</span>
<span id="cb233-4"><a href="entornos.html#cb233-4" aria-hidden="true" tabindex="-1"></a><span class="do">##  cara      palo valor</span></span>
<span id="cb233-5"><a href="entornos.html#cb233-5" aria-hidden="true" tabindex="-1"></a><span class="do">## reina corazones    12</span></span>
<span id="cb233-6"><a href="entornos.html#cb233-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb233-7"><a href="entornos.html#cb233-7" aria-hidden="true" tabindex="-1"></a><span class="fu">repartir</span>()</span>
<span id="cb233-8"><a href="entornos.html#cb233-8" aria-hidden="true" tabindex="-1"></a><span class="do">## cara      palo valor</span></span>
<span id="cb233-9"><a href="entornos.html#cb233-9" aria-hidden="true" tabindex="-1"></a><span class="do">## ocho corazones     8</span></span></code></pre></div>
<p>Pero el sistema requiere que <code>mazo</code> y <code>MAZO</code> existan en el entorno global. Muchas cosas suceden en este entorno, y es posible que el <code>mazo</code> se modifique o borre por accidente.</p>
<p>Sería mejor si pudiéramos almacenar <code>mazo</code> en un lugar seguro y apartado, como uno de esos entornos seguros y apartados que R crea para ejecutar funciones. De hecho, almacenar <code>mazo</code> en un entorno de tiempo de ejecución no es tan mala idea.</p>
<p>Podrías crear una función que tome <code>mazo</code> como argumento y guarde una copia de <code>mazo</code> como <code>MAZO</code>. La función también podría guardar sus propias copias de <code>repartir</code> y <code>barajar</code>:</p>
<div class="sourceCode" id="cb234"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb234-1"><a href="entornos.html#cb234-1" aria-hidden="true" tabindex="-1"></a>setup <span class="ot">&lt;-</span> <span class="cf">function</span>(mazo) {</span>
<span id="cb234-2"><a href="entornos.html#cb234-2" aria-hidden="true" tabindex="-1"></a>  MAZO <span class="ot">&lt;-</span> mazo</span>
<span id="cb234-3"><a href="entornos.html#cb234-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb234-4"><a href="entornos.html#cb234-4" aria-hidden="true" tabindex="-1"></a>  REPARTIR <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb234-5"><a href="entornos.html#cb234-5" aria-hidden="true" tabindex="-1"></a>    carta <span class="ot">&lt;-</span> mazo[<span class="dv">1</span>, ]</span>
<span id="cb234-6"><a href="entornos.html#cb234-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">assign</span>(<span class="st">&quot;mazo&quot;</span>, mazo[<span class="sc">-</span><span class="dv">1</span>, ], <span class="at">envir =</span> <span class="fu">globalenv</span>())</span>
<span id="cb234-7"><a href="entornos.html#cb234-7" aria-hidden="true" tabindex="-1"></a>    carta</span>
<span id="cb234-8"><a href="entornos.html#cb234-8" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb234-9"><a href="entornos.html#cb234-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb234-10"><a href="entornos.html#cb234-10" aria-hidden="true" tabindex="-1"></a>  BARAJAR <span class="ot">&lt;-</span> <span class="cf">function</span>(){</span>
<span id="cb234-11"><a href="entornos.html#cb234-11" aria-hidden="true" tabindex="-1"></a>    aleatorio <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">52</span>, <span class="at">size =</span> <span class="dv">52</span>)</span>
<span id="cb234-12"><a href="entornos.html#cb234-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">assign</span>(<span class="st">&quot;mazo&quot;</span>, MAZO[random, ], <span class="at">envir =</span> <span class="fu">globalenv</span>())</span>
<span id="cb234-13"><a href="entornos.html#cb234-13" aria-hidden="true" tabindex="-1"></a> }</span>
<span id="cb234-14"><a href="entornos.html#cb234-14" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Cuando ejecuta <code>setup</code>, R creará un entorno de tiempo de ejecución para almacenar estos objetos. El entorno se verá como la Figura <a href="entornos.html#fig:closure1">8.7</a>.</p>
<p>Ahora todas estas cosas están seguras fuera del camino en un hijo del entorno global. Eso los hace seguros pero difíciles de usar. Pidamos a <code>setup</code> que devuelva <code>REPARTIR</code> y <code>BARAJAR</code> para poder usarlos. La mejor manera de hacer esto es devolver las funciones como una lista:</p>
<div class="sourceCode" id="cb235"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb235-1"><a href="entornos.html#cb235-1" aria-hidden="true" tabindex="-1"></a>setup <span class="ot">&lt;-</span> <span class="cf">function</span>(mazo) {</span>
<span id="cb235-2"><a href="entornos.html#cb235-2" aria-hidden="true" tabindex="-1"></a>  MAZO <span class="ot">&lt;-</span> mazo</span>
<span id="cb235-3"><a href="entornos.html#cb235-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb235-4"><a href="entornos.html#cb235-4" aria-hidden="true" tabindex="-1"></a>  REPARTIR <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb235-5"><a href="entornos.html#cb235-5" aria-hidden="true" tabindex="-1"></a>    carta <span class="ot">&lt;-</span> mazo[<span class="dv">1</span>, ]</span>
<span id="cb235-6"><a href="entornos.html#cb235-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">assign</span>(<span class="st">&quot;mazo&quot;</span>, mazo[<span class="sc">-</span><span class="dv">1</span>, ], <span class="at">envir =</span> <span class="fu">globalenv</span>())</span>
<span id="cb235-7"><a href="entornos.html#cb235-7" aria-hidden="true" tabindex="-1"></a>    carta</span>
<span id="cb235-8"><a href="entornos.html#cb235-8" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb235-9"><a href="entornos.html#cb235-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb235-10"><a href="entornos.html#cb235-10" aria-hidden="true" tabindex="-1"></a>  BARAJAR <span class="ot">&lt;-</span> <span class="cf">function</span>(){</span>
<span id="cb235-11"><a href="entornos.html#cb235-11" aria-hidden="true" tabindex="-1"></a>    aleatorio <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">52</span>, <span class="at">size =</span> <span class="dv">52</span>)</span>
<span id="cb235-12"><a href="entornos.html#cb235-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">assign</span>(<span class="st">&quot;mazo&quot;</span>, MAZO[random, ], <span class="at">envir =</span> <span class="fu">globalenv</span>())</span>
<span id="cb235-13"><a href="entornos.html#cb235-13" aria-hidden="true" tabindex="-1"></a> }</span>
<span id="cb235-14"><a href="entornos.html#cb235-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb235-15"><a href="entornos.html#cb235-15" aria-hidden="true" tabindex="-1"></a> <span class="fu">list</span>(<span class="at">repartir =</span> REPARTIR, <span class="at">barajar =</span> BARAJAR)</span>
<span id="cb235-16"><a href="entornos.html#cb235-16" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb235-17"><a href="entornos.html#cb235-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb235-18"><a href="entornos.html#cb235-18" aria-hidden="true" tabindex="-1"></a>cartas <span class="ot">&lt;-</span> <span class="fu">setup</span>(mazo)</span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:closure1"></span>
<img src="images/hopr_0607.png" alt="Ejecutar setup almacenará mazo y MAZO en un lugar apartado y creará una función REPARTIR y BARAJAR. Cada uno de estos objetos se almacenará en un entorno cuyo padre es el entorno global." width="782" />
<p class="caption">
Figure 8.7: Ejecutar setup almacenará mazo y MAZO en un lugar apartado y creará una función REPARTIR y BARAJAR. Cada uno de estos objetos se almacenará en un entorno cuyo padre es el entorno global.
</p>
</div>
<p>Luego puede guardar cada uno de los elementos de la lista en un objeto dedicado en el entorno global:</p>
<div class="sourceCode" id="cb236"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb236-1"><a href="entornos.html#cb236-1" aria-hidden="true" tabindex="-1"></a>repartir <span class="ot">&lt;-</span> cartas<span class="sc">$</span>repartir</span>
<span id="cb236-2"><a href="entornos.html#cb236-2" aria-hidden="true" tabindex="-1"></a>barajar <span class="ot">&lt;-</span> cartas<span class="sc">$</span>barajar</span></code></pre></div>
<p>Ahora puedes ejecutar <code>repartir</code> y <code>barajar</code> como antes. Cada objeto contiene el mismo código que el <code>repartir</code> y <code>barajar</code> originales:</p>
<div class="sourceCode" id="cb237"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb237-1"><a href="entornos.html#cb237-1" aria-hidden="true" tabindex="-1"></a>repartir</span>
<span id="cb237-2"><a href="entornos.html#cb237-2" aria-hidden="true" tabindex="-1"></a><span class="do">## function() {</span></span>
<span id="cb237-3"><a href="entornos.html#cb237-3" aria-hidden="true" tabindex="-1"></a><span class="do">##     carta &lt;- mazo[1, ]</span></span>
<span id="cb237-4"><a href="entornos.html#cb237-4" aria-hidden="true" tabindex="-1"></a><span class="do">##     assign(&quot;mazo&quot;, mazo[-1, ], envir = globalenv())</span></span>
<span id="cb237-5"><a href="entornos.html#cb237-5" aria-hidden="true" tabindex="-1"></a><span class="do">##     carta</span></span>
<span id="cb237-6"><a href="entornos.html#cb237-6" aria-hidden="true" tabindex="-1"></a><span class="do">##   }</span></span>
<span id="cb237-7"><a href="entornos.html#cb237-7" aria-hidden="true" tabindex="-1"></a><span class="do">## &lt;environment: 0x7ff7169c3390&gt;</span></span>
<span id="cb237-8"><a href="entornos.html#cb237-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb237-9"><a href="entornos.html#cb237-9" aria-hidden="true" tabindex="-1"></a>barajar</span>
<span id="cb237-10"><a href="entornos.html#cb237-10" aria-hidden="true" tabindex="-1"></a><span class="do">## function(){</span></span>
<span id="cb237-11"><a href="entornos.html#cb237-11" aria-hidden="true" tabindex="-1"></a><span class="do">##     aleatorio &lt;- sample(1:52, size = 52)</span></span>
<span id="cb237-12"><a href="entornos.html#cb237-12" aria-hidden="true" tabindex="-1"></a><span class="do">##     assign(&quot;mazo&quot;, MAZO[aleatorio, ], envir = globalenv())</span></span>
<span id="cb237-13"><a href="entornos.html#cb237-13" aria-hidden="true" tabindex="-1"></a><span class="do">##  }</span></span>
<span id="cb237-14"><a href="entornos.html#cb237-14" aria-hidden="true" tabindex="-1"></a><span class="do">## &lt;environment: 0x7ff7169c3390&gt;</span></span></code></pre></div>
<p>Sin embargo, las funciones ahora tienen una diferencia importante. Su entorno de origen ya no es el entorno global (aunque <code>repartir</code> y <code>barajar</code> <em>están</em> actualmente guardados allí). Su entorno de origen es el entorno de tiempo de ejecución que creó R cuando ejecutó <code>setup</code>. Ahí es donde R creó <code>REPARTIR</code> y <code>BARAJAR</code>, las funciones copiadas en el nuevo <code>repartir</code> y <code>barajar</code>, como se muestra en:</p>
<div class="sourceCode" id="cb238"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb238-1"><a href="entornos.html#cb238-1" aria-hidden="true" tabindex="-1"></a><span class="fu">environment</span>(repartir)</span>
<span id="cb238-2"><a href="entornos.html#cb238-2" aria-hidden="true" tabindex="-1"></a><span class="do">## &lt;environment: 0x7ff7169c3390&gt;</span></span>
<span id="cb238-3"><a href="entornos.html#cb238-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb238-4"><a href="entornos.html#cb238-4" aria-hidden="true" tabindex="-1"></a><span class="fu">environment</span>(barajar)</span>
<span id="cb238-5"><a href="entornos.html#cb238-5" aria-hidden="true" tabindex="-1"></a><span class="do">## &lt;environment: 0x7ff7169c3390&gt;</span></span></code></pre></div>
<p>¿Por qué importa esto? Porque ahora, cuando ejecuta <code>repartir</code> o <code>barajar</code>, R evaluará las funciones en un entorno de tiempo de ejecución que usa <code>0x7ff7169c3390</code> como padre. <code>MAZO</code> y <code>mazo</code> estarán en este entorno principal, lo que significa que <code>repartir</code> y <code>barajar</code> podrán encontrarlos en tiempo de ejecución. <code>MAZO</code> y <code>mazo</code> estarán en la ruta de búsqueda de funciones, pero seguirán fuera del camino en todos los demás aspectos, como se muestra en la Figura <a href="entornos.html#fig:closure2">8.8</a>.</p>
<div class="figure"><span style="display:block;" id="fig:closure2"></span>
<img src="images/hopr_0608.png" alt="Ahora, repartir y barajar se ejecutará en un entorno que tenga el mazo protegido y el MAZO en su ruta de búsqueda.." width="782" />
<p class="caption">
Figure 8.8: Ahora, repartir y barajar se ejecutará en un entorno que tenga el mazo protegido y el MAZO en su ruta de búsqueda..
</p>
</div>
<p>Este arreglo se llama <em>cierre</em>. El entorno de tiempo de ejecución de <code>setup</code> “encierra” las funciones <code>repartir</code> y <code>barajar</code>. Tanto <code>repartir</code> como <code>barajar</code> pueden trabajar de cerca con los objetos contenidos en el entorno circundante, pero casi nada más puede hacerlo. El entorno envolvente no está en la ruta de búsqueda de ninguna otra función o entorno de R.</p>
<p>Es posible que haya notado que <code>repartir</code> y <code>barajar</code> aún actualizan el objeto <code>mazo</code> en el entorno global. No te preocupes, estamos a punto de cambiar eso. Queremos que <code>repartir</code> y <code>barajar</code> funcionen exclusivamente con los objetos en el entorno principal (incluyente) de sus entornos de tiempo de ejecución. En lugar de hacer que cada función haga referencia al entorno global para actualizar <code>mazo</code>, puede hacer que hagan referencia a su entorno principal en tiempo de ejecución, como se muestra en la Figura <a href="entornos.html#fig:closure3">8.9</a>:</p>
<div class="sourceCode" id="cb239"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb239-1"><a href="entornos.html#cb239-1" aria-hidden="true" tabindex="-1"></a>setup <span class="ot">&lt;-</span> <span class="cf">function</span>(mazo) {</span>
<span id="cb239-2"><a href="entornos.html#cb239-2" aria-hidden="true" tabindex="-1"></a>  MAZO <span class="ot">&lt;-</span> mazo</span>
<span id="cb239-3"><a href="entornos.html#cb239-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-4"><a href="entornos.html#cb239-4" aria-hidden="true" tabindex="-1"></a>  REPARTIR <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb239-5"><a href="entornos.html#cb239-5" aria-hidden="true" tabindex="-1"></a>    carta <span class="ot">&lt;-</span> mazo[<span class="dv">1</span>, ]</span>
<span id="cb239-6"><a href="entornos.html#cb239-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">assign</span>(<span class="st">&quot;mazo&quot;</span>, mazo[<span class="sc">-</span><span class="dv">1</span>, ], <span class="at">envir =</span> <span class="fu">parent.env</span>(<span class="fu">environment</span>()))</span>
<span id="cb239-7"><a href="entornos.html#cb239-7" aria-hidden="true" tabindex="-1"></a>    carta</span>
<span id="cb239-8"><a href="entornos.html#cb239-8" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb239-9"><a href="entornos.html#cb239-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-10"><a href="entornos.html#cb239-10" aria-hidden="true" tabindex="-1"></a>  BARAJAR <span class="ot">&lt;-</span> <span class="cf">function</span>(){</span>
<span id="cb239-11"><a href="entornos.html#cb239-11" aria-hidden="true" tabindex="-1"></a>    aleatorio <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">52</span>, <span class="at">size =</span> <span class="dv">52</span>)</span>
<span id="cb239-12"><a href="entornos.html#cb239-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">assign</span>(<span class="st">&quot;mazo&quot;</span>, MAZO[random, ], <span class="at">envir =</span> <span class="fu">parent.env</span>(<span class="fu">environment</span>()))</span>
<span id="cb239-13"><a href="entornos.html#cb239-13" aria-hidden="true" tabindex="-1"></a> }</span>
<span id="cb239-14"><a href="entornos.html#cb239-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-15"><a href="entornos.html#cb239-15" aria-hidden="true" tabindex="-1"></a> <span class="fu">list</span>(<span class="at">repartir =</span> REPARTIR, <span class="at">barajar =</span> BARAJAR)</span>
<span id="cb239-16"><a href="entornos.html#cb239-16" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb239-17"><a href="entornos.html#cb239-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-18"><a href="entornos.html#cb239-18" aria-hidden="true" tabindex="-1"></a>cartas <span class="ot">&lt;-</span> <span class="fu">setup</span>(mazo)</span>
<span id="cb239-19"><a href="entornos.html#cb239-19" aria-hidden="true" tabindex="-1"></a>repartir <span class="ot">&lt;-</span> cartas<span class="sc">$</span>repartir</span>
<span id="cb239-20"><a href="entornos.html#cb239-20" aria-hidden="true" tabindex="-1"></a>barajar <span class="ot">&lt;-</span> cartas<span class="sc">$</span>barajar</span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:closure3"></span>
<img src="images/hopr_0609.png" alt="Cuando cambie su código, repartir y barajar pasarán de actualizar el entorno global (izquierda) a actualizar su entorno principal (derecha)." width="720" />
<p class="caption">
Figure 8.9: Cuando cambie su código, repartir y barajar pasarán de actualizar el entorno global (izquierda) a actualizar su entorno principal (derecha).
</p>
</div>
<p>Finalmente tenemos un juego de cartas autónomo. Puedes borrar (o modificar) la copia global de <code>mazo</code> tanto como quieras y seguir jugando cartas. <code>repartir</code> y <code>barajar</code> utilizarán la copia protegida y prístina de <code>mazo</code>:</p>
<div class="sourceCode" id="cb240"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb240-1"><a href="entornos.html#cb240-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(mazo)</span>
<span id="cb240-2"><a href="entornos.html#cb240-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb240-3"><a href="entornos.html#cb240-3" aria-hidden="true" tabindex="-1"></a><span class="fu">barajar</span>()</span>
<span id="cb240-4"><a href="entornos.html#cb240-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb240-5"><a href="entornos.html#cb240-5" aria-hidden="true" tabindex="-1"></a><span class="fu">repartir</span>()</span>
<span id="cb240-6"><a href="entornos.html#cb240-6" aria-hidden="true" tabindex="-1"></a><span class="do">## cara      palo value</span></span>
<span id="cb240-7"><a href="entornos.html#cb240-7" aria-hidden="true" tabindex="-1"></a><span class="do">##   as corazones     1</span></span>
<span id="cb240-8"><a href="entornos.html#cb240-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb240-9"><a href="entornos.html#cb240-9" aria-hidden="true" tabindex="-1"></a><span class="fu">repartir</span>()</span>
<span id="cb240-10"><a href="entornos.html#cb240-10" aria-hidden="true" tabindex="-1"></a><span class="do">## cara     palo valor</span></span>
<span id="cb240-11"><a href="entornos.html#cb240-11" aria-hidden="true" tabindex="-1"></a><span class="do">## jota treboles    11</span></span></code></pre></div>
<p>Blackjack!</p>
</div>
<div id="resumen-5" class="section level2 hasAnchor" number="8.7">
<h2><span class="header-section-number">8.7</span> Resumen<a href="entornos.html#resumen-5" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>R guarda sus objetos en un sistema de entorno que se asemeja al sistema de archivos de su computadora. Si comprende este sistema, puede predecir cómo R buscará objetos. Si llama a un objeto en la línea de comando, R buscará el objeto en el entorno global y luego los padres del entorno global, ascendiendo en el árbol de entornos, un entorno a la vez.</p>
<p>R usará una ruta de búsqueda ligeramente diferente cuando llame a un objeto desde dentro de una función. Cuando ejecuta una función, R crea un nuevo entorno para ejecutar comandos. Este entorno será un elemento secundario del entorno donde se definió originalmente la función. Este puede ser el entorno global, pero también puede no serlo. Puede usar este comportamiento para crear cierres, que son funciones vinculadas a objetos en entornos protegidos.</p>
<p>A medida que se familiarice con el sistema de entorno de R, puede usarlo para producir resultados elegantes, como lo hicimos aquí. Sin embargo, el valor real de comprender el sistema de entorno proviene de saber cómo las funciones de R hacen su trabajo. Puede usar este conocimiento para descubrir qué está fallando cuando una función no funciona como se esperaba.</p>
</div>
<div id="resumen-del-proyecto-2" class="section level2 hasAnchor" number="8.8">
<h2><span class="header-section-number">8.8</span> Resumen del Proyecto 2<a href="entornos.html#resumen-del-proyecto-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Ahora tiene control total sobre los conjuntos de datos y los valores que carga en R. Puede almacenar datos como objetos de R, puede recuperar y manipular valores de datos a voluntad e incluso puede predecir cómo R almacenará y buscará sus objetos en la memoria de tu computadora.</p>
<p>Es posible que aún no se dé cuenta, pero su experiencia lo convierte en un poderoso usuario de datos aumentados por computadora. Puede usar R para guardar y trabajar con conjuntos de datos más grandes de los que podría manejar de otra manera. Hasta ahora solo hemos trabajado con <code>mazo</code>, un pequeño conjunto de datos; pero puede usar las mismas técnicas para trabajar con cualquier conjunto de datos que quepa en la memoria de su computadora.</p>
<p>Sin embargo, el almacenamiento de datos no es la única tarea logística a la que se enfrentará como científico de datos. A menudo querrá realizar tareas con sus datos que son tan complejas o repetitivas que son difíciles de realizar sin una computadora. Algunas de las cosas se pueden hacer con funciones que ya existen en R y sus paquetes, pero otras no. Serás el más versátil como científico de datos si puedes escribir tus propios programas para que los sigan las computadoras. R puede ayudarte a hacer esto. Cuando esté listo, [Project 3: Máquina Tragamonedas] le enseñará las habilidades más útiles para escribir programas en R.</p>

</div>
</div>



            </section>

          </div>
        </div>
      </div>
<a href="modify.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="slots.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/davidrsch/hopres/edit/main/environments.rmd",
"text": "Editar"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
