<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="es" xml:lang="es"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.554">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Garrett Grolemund">

<title>Programación práctica con R - Apéndice D — Cargar y Guardar Datos en R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./a5-debug.html" rel="next">
<link href="./a3-updating.html" rel="prev">
<link href="./cover.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "Sin resultados",
    "search-matching-documents-text": "documentos encontrados",
    "search-copy-link-title": "Copiar el enlace en la búsqueda",
    "search-hide-matches-text": "Ocultar resultados adicionales",
    "search-more-match-text": "resultado adicional en este documento",
    "search-more-matches-text": "resultados adicionales en este documento",
    "search-clear-button-title": "Borrar",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancelar",
    "search-submit-button-title": "Enviar",
    "search-label": "Buscar"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Alternar barra lateral" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./a1-starting.html">Apéndices</a></li><li class="breadcrumb-item"><a href="./a4-data.html"><span class="chapter-number">D</span>&nbsp; <span class="chapter-title">Cargar y Guardar Datos en R</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Alternar barra lateral" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Programación práctica con R</a> 
        <div class="sidebar-tools-main">
    <div class="dropdown">
      <a href="" title="" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" aria-label=""><i class="bi bi-github"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://github.com/rstudio-education/hopr">
            Original
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://github.com/davidrsch/hopres">
            Traducción
            </a>
          </li>
      </ul>
    </div>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Alternar modo lector">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Buscar"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Bienvenido</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./preface.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Prefacio</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./dice.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Proyecto 1: Dados Ponderados</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Alternar sección">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./basics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Lo Más Básico</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./packages.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Paquetes y páginas de ayuda</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./cards.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Proyecto 2: Baraja de Cartas</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Alternar sección">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./objects.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Objectos de R</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./notation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Notación de R</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./modifying.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Modificación de Valores</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./environments.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Entornos</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./slots.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Proyecto 3: Máquina Tragamonedas</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Alternar sección">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./programs.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Programas</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./s3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">S3</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./loops.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Bucles</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./speed.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Velocidad</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
 <span class="menu-text">Apéndices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Alternar sección">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./a1-starting.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Instalación de R y RStudio</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./a2-packages.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">B</span>&nbsp; <span class="chapter-title">Paquetes de R</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./a3-updating.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">C</span>&nbsp; <span class="chapter-title">Actualizando R y sus Paquetes</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./a4-data.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">D</span>&nbsp; <span class="chapter-title">Cargar y Guardar Datos en R</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./a5-debug.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">E</span>&nbsp; <span class="chapter-title">Depuración de Código de R</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Tabla de contenidos</h2>
   
  <ul>
  <li><a href="#conjuntos-de-datos-en-r-base" id="toc-conjuntos-de-datos-en-r-base" class="nav-link active" data-scroll-target="#conjuntos-de-datos-en-r-base"><span class="header-section-number">D.1</span> Conjuntos de Datos en R Base</a></li>
  <li><a href="#directorio-de-trabajo" id="toc-directorio-de-trabajo" class="nav-link" data-scroll-target="#directorio-de-trabajo"><span class="header-section-number">D.2</span> Directorio de Trabajo</a></li>
  <li><a href="#archivos-de-texto-sin-formato" id="toc-archivos-de-texto-sin-formato" class="nav-link" data-scroll-target="#archivos-de-texto-sin-formato"><span class="header-section-number">D.3</span> Archivos de Texto Sin Formato</a>
  <ul class="collapse">
  <li><a href="#read.table" id="toc-read.table" class="nav-link" data-scroll-target="#read.table"><span class="header-section-number">D.3.1</span> read.table</a></li>
  <li><a href="#la-familia-read" id="toc-la-familia-read" class="nav-link" data-scroll-target="#la-familia-read"><span class="header-section-number">D.3.2</span> La Familia read</a></li>
  <li><a href="#read.fwf" id="toc-read.fwf" class="nav-link" data-scroll-target="#read.fwf"><span class="header-section-number">D.3.3</span> read.fwf</a></li>
  <li><a href="#links-html" id="toc-links-html" class="nav-link" data-scroll-target="#links-html"><span class="header-section-number">D.3.4</span> Links HTML</a></li>
  <li><a href="#guardar-archivos-de-texto-sin-formato" id="toc-guardar-archivos-de-texto-sin-formato" class="nav-link" data-scroll-target="#guardar-archivos-de-texto-sin-formato"><span class="header-section-number">D.3.5</span> Guardar Archivos de Texto Sin Formato</a></li>
  <li><a href="#comprimiendo-archivos" id="toc-comprimiendo-archivos" class="nav-link" data-scroll-target="#comprimiendo-archivos"><span class="header-section-number">D.3.6</span> Comprimiendo Archivos</a></li>
  </ul></li>
  <li><a href="#archivos-de-r" id="toc-archivos-de-r" class="nav-link" data-scroll-target="#archivos-de-r"><span class="header-section-number">D.4</span> Archivos de R</a>
  <ul class="collapse">
  <li><a href="#guardar-archivos-de-r" id="toc-guardar-archivos-de-r" class="nav-link" data-scroll-target="#guardar-archivos-de-r"><span class="header-section-number">D.4.1</span> Guardar archivos de R</a></li>
  </ul></li>
  <li><a href="#hojas-de-cálculo-de-excel" id="toc-hojas-de-cálculo-de-excel" class="nav-link" data-scroll-target="#hojas-de-cálculo-de-excel"><span class="header-section-number">D.5</span> Hojas de Cálculo de Excel</a>
  <ul class="collapse">
  <li><a href="#exportar-desde-excel" id="toc-exportar-desde-excel" class="nav-link" data-scroll-target="#exportar-desde-excel"><span class="header-section-number">D.5.1</span> Exportar desde Excel</a></li>
  <li><a href="#copiar-y-pegar" id="toc-copiar-y-pegar" class="nav-link" data-scroll-target="#copiar-y-pegar"><span class="header-section-number">D.5.2</span> Copiar y pegar</a></li>
  <li><a href="#xlconnect" id="toc-xlconnect" class="nav-link" data-scroll-target="#xlconnect"><span class="header-section-number">D.5.3</span> XLConnect</a></li>
  <li><a href="#lectura-de-hojas-de-cálculo" id="toc-lectura-de-hojas-de-cálculo" class="nav-link" data-scroll-target="#lectura-de-hojas-de-cálculo"><span class="header-section-number">D.5.4</span> Lectura de Hojas de Cálculo</a></li>
  <li><a href="#escribir-hojas-de-cálculo" id="toc-escribir-hojas-de-cálculo" class="nav-link" data-scroll-target="#escribir-hojas-de-cálculo"><span class="header-section-number">D.5.5</span> Escribir Hojas de Cálculo</a></li>
  </ul></li>
  <li><a href="#cargar-archivos-desde-otros-programas" id="toc-cargar-archivos-desde-otros-programas" class="nav-link" data-scroll-target="#cargar-archivos-desde-otros-programas"><span class="header-section-number">D.6</span> Cargar Archivos desde Otros Programas</a>
  <ul class="collapse">
  <li><a href="#conexión-a-bases-de-datos" id="toc-conexión-a-bases-de-datos" class="nav-link" data-scroll-target="#conexión-a-bases-de-datos"><span class="header-section-number">D.6.1</span> Conexión a bases de datos</a></li>
  </ul></li>
  <li><a href="#actualización" id="toc-actualización" class="nav-link" data-scroll-target="#actualización"><span class="header-section-number">D.7</span> Actualización</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./a1-starting.html">Apéndices</a></li><li class="breadcrumb-item"><a href="./a4-data.html"><span class="chapter-number">D</span>&nbsp; <span class="chapter-title">Cargar y Guardar Datos en R</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span id="dataio" class="quarto-section-identifier">Apéndice D — Cargar y Guardar Datos en R</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>Este apéndice le mostrará cómo cargar y guardar datos en R desde archivos de texto sin formato, archivos de R y hojas de cálculo de Excel. También le mostrará los paquetes R que puede usar para cargar datos de bases de datos y otros programas comunes, como SAS y MATLAB.</p>
<section id="conjuntos-de-datos-en-r-base" class="level2" data-number="D.1">
<h2 data-number="D.1" class="anchored" data-anchor-id="conjuntos-de-datos-en-r-base"><span class="header-section-number">D.1</span> Conjuntos de Datos en R Base</h2>
<p>R viene con muchos conjuntos de datos precargados en el paquete <code>datasets</code>, que viene con la base de R. Estos conjuntos de datos no son muy interesantes, pero le brindan la oportunidad de probar el código o hacer un punto sin tener que cargar un conjunto de datos desde el exterior de R. Puede ver una lista de los conjuntos de datos de R, así como una breve descripción de cada uno, ejecutando:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">help</span>(<span class="at">package =</span> <span class="st">"datasets"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Para utilizar un conjunto de datos, simplemente escriba su nombre. Cada conjunto de datos ya está preguardado como un objeto R. Por ejemplo:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>iris</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="do">##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="do">## 1          5.1         3.5          1.4         0.2  setosa</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="do">## 2          4.9         3.0          1.4         0.2  setosa</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="do">## 3          4.7         3.2          1.3         0.2  setosa</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="do">## 4          4.6         3.1          1.5         0.2  setosa</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="do">## 5          5.0         3.6          1.4         0.2  setosa</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="do">## 6          5.4         3.9          1.7         0.4  setosa</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Sin embargo, los conjuntos de datos de R no reemplazan sus propios datos, que puede cargar en R desde una amplia variedad de formatos de archivo. Pero antes de cargar cualquier archivo de datos en R, deberá determinar dónde está su <em>directorio de trabajo</em>.</p>
</section>
<section id="directorio-de-trabajo" class="level2" data-number="D.2">
<h2 data-number="D.2" class="anchored" data-anchor-id="directorio-de-trabajo"><span class="header-section-number">D.2</span> Directorio de Trabajo</h2>
<p>Cada vez que abre R, se vincula a sí mismo a un directorio en su computadora, que R llama el directorio de trabajo. Aquí es donde R buscará los archivos cuando intente cargarlos, y es donde R guardará los archivos cuando los guarde. La ubicación de su directorio de trabajo variará en diferentes computadoras. Para determinar qué directorio está usando R como su directorio de trabajo, ejecute:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getwd</span>()</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="do">## "/Users/garrettgrolemund"</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Puede colocar archivos de datos directamente en la carpeta que es su directorio de trabajo, o puede mover su directorio de trabajo a donde están sus archivos de datos. Puede mover su directorio de trabajo a cualquier carpeta de su computadora con la función <code>setwd</code>. Simplemente proporcione a <code>setwd</code> la ruta del archivo a su nuevo directorio de trabajo. Prefiero configurar mi directorio de trabajo en una carpeta dedicada a cualquier proyecto en el que esté trabajando actualmente. De esa manera puedo mantener todos mis datos, secuencias de comandos, gráficos e informes en el mismo lugar. Por ejemplo:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"~/Users/garrettgrolemund/Documents/Book_Project"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Si la ruta del archivo no comienza con su directorio raíz, R asumirá que comienza en su directorio de trabajo actual.</p>
<p>También puede cambiar su directorio de trabajo haciendo clic en Session &gt; Set Working Directory &gt; Choose Directory en la barra de menu de RStudio. Las GUI de Windows y Mac tienen opciones similares. Si inicia R desde una línea de comandos de UNIX (como en las máquinas Linux), el directorio de trabajo será el directorio en el que se encontraba cuando llamó a R.</p>
<p>Puede ver qué archivos hay en su directorio de trabajo con <code>list.files()</code>. Si ve el archivo que le gustaría abrir en su directorio de trabajo, entonces está listo para continuar. La forma en que abra los archivos en su directorio de trabajo dependerá del tipo de archivo que desee abrir.</p>
</section>
<section id="archivos-de-texto-sin-formato" class="level2" data-number="D.3">
<h2 data-number="D.3" class="anchored" data-anchor-id="archivos-de-texto-sin-formato"><span class="header-section-number">D.3</span> Archivos de Texto Sin Formato</h2>
<p>Los archivos de texto sin formato son una de las formas más comunes de guardar datos. Son muy simples y pueden ser leídos por muchos programas de computadora diferentes, incluso los editores de texto más básicos. Por esta razón, los datos públicos suelen presentarse como archivos de texto sin formato. Por ejemplo, la Oficina del Censo, la Administración del Seguro Social y la Oficina de Estadísticas Laborales ponen a disposición sus datos como archivos de texto sin formato.</p>
<p>Así es como el conjunto de datos de la escalera real de <a href="objects.html">Objetos de R</a> aparecería como un archivo de texto sin formato (he agregado una columna de valor):</p>
<pre><code>"carta", "palo", "valor"
"as", "picas", 14
"rey", "picas", 13
"reina", "picas", 12
"jota", "picas", 11
"diez", "picas", 10</code></pre>
<p>Un archivo de texto sin formato almacena una tabla de datos en un documento de texto. Cada fila de la tabla se guarda en su propia línea y se usa una convención simple para separar las celdas dentro de una fila. A menudo, las celdas están separadas por una coma, pero también pueden estar separadas por una tabulación, un delimitador de barra vertical (es decir, <code>|</code> ) o cualquier otro carácter. Cada archivo solo utiliza un método de separación de celdas, lo que minimiza la confusión. Dentro de cada celda, los datos aparecen como esperarías verlos, como palabras y números.</p>
<p>Todos los archivos de texto sin formato se pueden guardar con la extensión <em>.txt</em> (para texto), pero a veces un archivo recibirá una extensión especial que anuncia cómo separa las entradas de las celdas de datos. Dado que las entradas en el conjunto de datos mencionado anteriormente están separadas por una coma, este archivo sería un archivo de <em>valores separados por comas</em> y normalmente se guardaría con la extensión <em>.csv</em>.</p>
<section id="read.table" class="level3" data-number="D.3.1">
<h3 data-number="D.3.1" class="anchored" data-anchor-id="read.table"><span class="header-section-number">D.3.1</span> read.table</h3>
<p>Para cargar un archivo de texto sin formato, use <code>read.table</code>. El primer argumento de <code>read.table</code> debe ser el nombre de su archivo (si está en su directorio de trabajo), o la ruta del archivo a su archivo (si no está en su directorio de trabajo). Si la ruta del archivo no comienza con su directorio raíz, R lo agregará al final de la ruta del archivo que conduce a su directorio de trabajo. También puede darle a <code>read.table</code> otros argumentos. Los dos más importantes son <code>sep</code> y <code>header</code>.</p>
<p>Si el conjunto de datos de la escalera real se guardó como un archivo llamado <em>poquer.csv</em> en su directorio de trabajo, podría cargarlo con:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>poquer <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">"poquer.csv"</span>, <span class="at">sep =</span> <span class="st">","</span>, <span class="at">header =</span> <span class="cn">TRUE</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<section id="sep" class="level4" data-number="D.3.1.1">
<h4 data-number="D.3.1.1" class="anchored" data-anchor-id="sep"><span class="header-section-number">D.3.1.1</span> sep</h4>
<p>Use <code>sep</code> para decirle a <code>read.table</code> qué carácter usa su archivo para separar las entradas de datos. Para averiguarlo, es posible que deba abrir su archivo en un editor de texto y mirarlo. Si no especifica un argumento <code>sep</code>, <code>read.table</code> intentará separar las celdas siempre que haya espacios en blanco, como una pestaña o un espacio. R no podrá decirle si <code>read.table</code> hace esto correctamente o no, así que confíe en él bajo su propio riesgo.</p>
</section>
<section id="header" class="level4" data-number="D.3.1.2">
<h4 data-number="D.3.1.2" class="anchored" data-anchor-id="header"><span class="header-section-number">D.3.1.2</span> header</h4>
<p>Use <code>header</code> para decirle a <code>read.table</code> si la primera línea del archivo contiene nombres de variables en lugar de valores. Si la primera línea del archivo es un conjunto de nombres de variables, debe establecer <code>header = TRUE</code>.</p>
</section>
<section id="na.strings" class="level4" data-number="D.3.1.3">
<h4 data-number="D.3.1.3" class="anchored" data-anchor-id="na.strings"><span class="header-section-number">D.3.1.3</span> na.strings</h4>
<p>A menudo, los conjuntos de datos utilizan símbolos especiales para representar la información que falta. Si sabe que sus datos utilizan un determinado símbolo para representar las entradas que faltan, puede decirle a <code>read.table</code> (y a las funciones anteriores) cuál es el símbolo con el argumento <code>na.strings</code>. <code>read.table</code> convertirá todas las instancias del símbolo de información faltante en <code>NA</code>, que es el símbolo de información faltante de R (consulte <a href="modifying.html#missing">Información faltante</a>).</p>
<p>Por ejemplo, su conjunto de datos de póquer contenía valores faltantes almacenados como <code>.</code>, como este:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="do">## "carta","palo","valor"</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="do">## "as","picas"," 14"</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="do">## "rey","picas"," 13"</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="do">## "reina",".","."</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="do">## "jota",".","."</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="do">## "diez",".","."</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Puede leer el conjunto de datos en R y convertir los valores faltantes en NA a medida que avanza con el comando:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>poquer <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">"poquer.csv"</span>, <span class="at">sep =</span> <span class="st">","</span>, <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">na.string =</span> <span class="st">"."</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>R guardaría una versión de <code>poquer</code> que se ve así:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="do">##  carta     palo  valor</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="do">##     as    picas     14</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="do">##    rey    picas     13</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="do">##  reina     &lt;NA&gt;     NA</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="do">##   jota     &lt;NA&gt;     NA</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="do">##   diez     &lt;NA&gt;     NA</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="skip-and-nrow" class="level4" data-number="D.3.1.4">
<h4 data-number="D.3.1.4" class="anchored" data-anchor-id="skip-and-nrow"><span class="header-section-number">D.3.1.4</span> skip and nrow</h4>
<p>A veces, un archivo de texto sin formato vendrá con un texto introductorio que no forma parte del conjunto de datos. O bien, puede decidir que solo desea leer una parte de un conjunto de datos. Puede hacer estas cosas con los argumentos <code>skip</code> y <code>nrow</code>. Use <code>skip</code> para decirle a R que salte un número específico de líneas antes de que comience a leer valores del archivo. Use <code>nrow</code> para decirle a R que deje de leer valores después de haber leído un cierto número de líneas.</p>
<p>Por ejemplo, imagine que el archivo de escalera real completo se ve así:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>Estos datos fueron recopilados por el Instituto Nacional de Póquer.</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>Accidentalmente repetimos la última fila de datos.</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="st">"cata"</span>, <span class="st">"palo"</span>, <span class="st">"valor"</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="st">"as"</span>, <span class="st">"picas"</span>, <span class="dv">14</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="st">"rey"</span>, <span class="st">"picas"</span>, <span class="dv">13</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="st">"reina"</span>, <span class="st">"picas"</span>, <span class="dv">12</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="st">"jota"</span>, <span class="st">"picas"</span>, <span class="dv">11</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a><span class="st">"diez"</span>, <span class="st">"picas"</span>, <span class="dv">10</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a><span class="st">"diez"</span>, <span class="st">"picas"</span>, <span class="dv">10</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Puede leer solo las seis líneas que desee (cinco filas más un encabezado) con:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">read.table</span>(<span class="st">"poquer.csv"</span>, <span class="at">sep =</span> <span class="st">","</span>, <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">skip =</span> <span class="dv">3</span>, <span class="at">nrow =</span> <span class="dv">5</span>)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="do">##    carta    palo  valor</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="do">## 1     as   picas     14</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="do">## 2    rey   picas     13</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="do">## 3  reina   picas     12</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="do">## 4   jota   picas     11</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="do">## 5   diez   picas     10</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Tenga en cuenta que la fila del encabezado no cuenta para el total de filas permitidas por <code>nrow</code>.</p>
</section>
<section id="stringsasfactors" class="level4" data-number="D.3.1.5">
<h4 data-number="D.3.1.5" class="anchored" data-anchor-id="stringsasfactors"><span class="header-section-number">D.3.1.5</span> stringsAsFactors</h4>
<p>R lee números tal como cabría esperar, pero cuando R encuentra cadenas de caracteres (por ejemplo, letras y palabras), comienza a actuar de manera extraña. R quiere convertir cada cadena de caracteres en un factor. Este es el comportamiento predeterminado de R, pero creo que es un error. A veces los factores son útiles. En otras ocasiones, son claramente el tipo de datos incorrecto para el trabajo. Además, los factores provocan un comportamiento extraño, especialmente cuando desea mostrar datos. Este comportamiento puede ser sorprendente si no se dio cuenta de que R convirtió sus datos en factores. En general, tendrá una experiencia R más fluida si no permite que R genere factores hasta que los solicite. Afortunadamente, es fácil hacer esto.</p>
<p>Establecer el argumento <code>stringsAsFactors</code> en <code>FALSE</code> asegurará que R guarde cualquier cadena de caracteres en su conjunto de datos como cadenas de caracteres, no como factores. Para usar <code>stringsAsFactors</code>, escribirías:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">read.table</span>(<span class="st">"poquer.csv"</span>, <span class="at">sep =</span> <span class="st">","</span>, <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Si va a cargar más de un archivo de datos, puede cambiar el comportamiento de factorización predeterminado a nivel global con:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Esto garantizará que todas las cadenas se lean como cadenas, no como factores, hasta que finalice su sesión de R o vuelva a cambiar el valor predeterminado global ejecutando:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">stringsAsFactors =</span> <span class="cn">TRUE</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="la-familia-read" class="level3" data-number="D.3.2">
<h3 data-number="D.3.2" class="anchored" data-anchor-id="la-familia-read"><span class="header-section-number">D.3.2</span> La Familia read</h3>
<p>R también viene con algunos atajos preempaquetados para <code>read.table</code>, que se muestran en la Tabla <a href="#tbl-shortcuts" class="quarto-xref">Tabla&nbsp;<span>D.1</span></a>.</p>
<div id="tbl-shortcuts" class="quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-shortcuts-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabla&nbsp;D.1: Funciones read de R. Puede sobrescribir cualquiera de los argumentos predeterminados según sea necesario.
</figcaption>
<div aria-describedby="tbl-shortcuts-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="table">
<colgroup>
<col style="width: 37%">
<col style="width: 37%">
<col style="width: 25%">
</colgroup>
<thead>
<tr class="header">
<th>Función</th>
<th>Por Defecto</th>
<th>Uso</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>read.table</code></td>
<td>sep = ” “, header = FALSE</td>
<td>Función de lectura de uso general</td>
</tr>
<tr class="even">
<td><code>read.csv</code></td>
<td>sep = “,”, header = TRUE</td>
<td>Archivos de variables separadas por comas (CSV)</td>
</tr>
<tr class="odd">
<td><code>read.delim</code></td>
<td>sep = “, header = TRUE</td>
<td>Archivos delimitados por tabuladores</td>
</tr>
<tr class="even">
<td><code>read.csv2</code></td>
<td>sep = “;”, header = TRUE, dec = “,”</td>
<td>Archivos CSV con formato decimal europeo</td>
</tr>
<tr class="odd">
<td><code>read.delim2</code></td>
<td>sep = “, header = TRUE, dec =”,”</td>
<td>Archivos delimitados por tabuladores con formato decimal europeo</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<p>El primer atajo, <code>read.csv</code>, se comporta como <code>read.table</code> pero establece automáticamente <code>sep = ","</code> y <code>header = TRUE</code>, lo que puede ahorrarte algo de escritura:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>poquer <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"poquer.csv"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><code>read.delim</code> establece automáticamente <code>sep</code> en el carácter de tabulación, lo cual es muy útil para leer archivos delimitados por tabulaciones. Estos son archivos donde cada celda está separada por una pestaña. <code>read.delim</code> también establece <code>header = TRUE</code> por defecto.</p>
<p><code>read.delim2</code> y <code>read.csv2</code> existen para los usuarios europeos de R. Estas funciones le dicen a R que los datos usan una coma en lugar de un punto para indicar lugares decimales. (Si se pregunta cómo funciona esto con los archivos CSV, los archivos CSV2 generalmente separan las celdas con un punto y coma, no con una coma).</p>
<div class="callout callout-style-simple callout-tip">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-body-container">
<p><strong>Import Dataset</strong></p>
<p>También puede cargar archivos de texto sin formato con el botón Importar conjunto de datos de RStudio, como se describe en <a href="objects.html#loading">Cargando Datos</a>. Importar conjunto de datos proporciona una versión GUI de <code>read.table</code>.</p>
</div>
</div>
</div>
</section>
<section id="read.fwf" class="level3" data-number="D.3.3">
<h3 data-number="D.3.3" class="anchored" data-anchor-id="read.fwf"><span class="header-section-number">D.3.3</span> read.fwf</h3>
<p>Un tipo de archivo de texto sin formato desafía el patrón al utilizar su diseño para separar las celdas de datos. Cada fila se coloca en su propia línea (al igual que con otros archivos de texto sin formato), y luego cada columna comienza en un número específico de caracteres desde el lado izquierdo del documento. Para lograr esto, se agrega un número arbitrario de espacios de caracteres al final de cada entrada para ubicar correctamente la siguiente entrada. Estos documentos se conocen como <em>archivos de ancho fijo</em> y normalmente terminan con la extensión <em>.fwf</em>.</p>
<p>Esta es una forma en que el conjunto de datos de la escalera real podría verse como un archivo de ancho fijo. En cada fila, la entrada del palo comienza exactamente 10 caracteres desde el inicio de la línea. No importa cuántos caracteres aparecieron en la primera celda de cada fila:</p>
<pre><code>
carta     palo       valor
as        picas      14
rey       picas      13  
reina     picas      12  
jota      picas      11  
diez      picas      10</code></pre>
<p>Los archivos de ancho fijo se ven bien a los ojos humanos (pero no mejor que un archivo delimitado por tabulaciones); sin embargo, puede ser difícil trabajar con ellos. Quizás debido a esto, R viene con una función para leer archivos de ancho fijo, pero no para guardarlos. Desafortunadamente, a las agencias del gobierno de EE. UU. parece gustarles los archivos de ancho fijo, y es probable que encuentre uno o más durante su carrera.</p>
<p>Puede leer archivos de ancho fijo en R con la función <code>read.fwf</code>. La función toma los mismos argumentos que <code>read.table</code> pero requiere un argumento adicional, <code>widths</code>, que debería ser un vector de números. Cada entrada <em>i</em> del vector <code>widths</code> debe indicar el ancho (en caracteres) de la columna <em>i</em> del conjunto de datos.</p>
<p>Si los datos de escalera real de ancho fijo antes mencionados se guardaron como <em>poquer.fwf</em> en su directorio de trabajo, podría leerlos con:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>poquer <span class="ot">&lt;-</span> <span class="fu">read.fwf</span>(<span class="st">"poquer.fwf"</span>, <span class="at">widths =</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">7</span>, <span class="dv">6</span>), <span class="at">header =</span> <span class="cn">TRUE</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="links-html" class="level3" data-number="D.3.4">
<h3 data-number="D.3.4" class="anchored" data-anchor-id="links-html"><span class="header-section-number">D.3.4</span> Links HTML</h3>
<p>Muchos archivos de datos están disponibles en Internet en su propia dirección web. Si está conectado a Internet, puede abrir estos archivos directamente en R con <code>read.table</code>, <code>read.csv</code>, etc. Puede pasar una dirección web al argumento del nombre del archivo para cualquiera de las funciones de lectura de datos de R. . Como resultado, podría leer el conjunto de datos de póquer desde una dirección web como <em>http://…/poquer.csv</em> con:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>poquer <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"http://.../poquer.csv"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Obviamente, esa no es una dirección real, pero aquí hay algo que funcionaría, ¡si puede escribirlo!</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>mazo <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"https://gist.github.com/davidrsch/e59a71c228f5632634ebba08c7c7beaa/raw/mazo.csv"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Solo asegúrese de que la dirección web se vincule directamente al archivo y no a una página web que se vincule al archivo. Por lo general, cuando visita la dirección web de un archivo de datos, el archivo comenzará a descargarse o los datos sin procesar aparecerán en la ventana de su navegador.</p>
<p>Tenga en cuenta que los sitios web que comienzan con <em>https://</em> son sitios web seguros, lo que significa que es posible que R no pueda acceder a los datos proporcionados en estos enlaces.</p>
</section>
<section id="guardar-archivos-de-texto-sin-formato" class="level3" data-number="D.3.5">
<h3 data-number="D.3.5" class="anchored" data-anchor-id="guardar-archivos-de-texto-sin-formato"><span class="header-section-number">D.3.5</span> Guardar Archivos de Texto Sin Formato</h3>
<p>Una vez que sus datos estén en R, puede guardarlos en cualquier formato de archivo compatible con R. Si desea guardarlo como un archivo de texto sin formato, puede utilizar la familia de funciones +write+. Las tres funciones básicas de write aparecen en Table <a href="#tbl-write" class="quarto-xref">Tabla&nbsp;<span>D.2</span></a>. Use <code>write.csv</code> para guardar sus datos como un archivo <em>.csv</em> y <code>write.table</code> para guardar sus datos como un documento delimitado por tabulaciones o un documento con separadores más exóticos.</p>
<div id="tbl-write" class="quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-write-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabla&nbsp;D.2: R guarda conjuntos de datos en archivos de texto sin formato con la familia de funciones write.
</figcaption>
<div aria-describedby="tbl-write-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="table">
<colgroup>
<col style="width: 36%">
<col style="width: 63%">
</colgroup>
<thead>
<tr class="header">
<th>Formato de archivo</th>
<th>Función y sintaxis</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>.csv</strong></td>
<td><code>write.csv(r_object, file = filepath, row.names = FALSE)</code></td>
</tr>
<tr class="even">
<td><strong>.csv</strong> (con notación decimal europea)</td>
<td><code>write.csv2(r_object, file = filepath, row.names = FALSE)</code></td>
</tr>
<tr class="odd">
<td>Delimitado por tabulaciones</td>
<td><code>write.table(r_object, file = filepath, sep = "\t", row.names=FALSE)</code></td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<p>El primer argumento de cada función es el objeto de R que contiene su conjunto de datos. El argumento <code>file</code> es el nombre del archivo (incluida la extensión) que desea dar a los datos guardados. De forma predeterminada, cada función guardará sus datos en su directorio de trabajo. Sin embargo, puede proporcionar una ruta de archivo al argumento del archivo. R lo complacerá guardando el archivo al final de la ruta del archivo. Si la ruta del archivo no comienza con su directorio raíz, R lo agregará al final de la ruta del archivo que conduce a su directorio de trabajo.</p>
<p>Por ejemplo, puede guardar el data frame (hipotético) póquer en un subdirectorio llamado <em>data</em> dentro de su directorio de trabajo con el comando:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(poquer, <span class="st">"data/poquer.csv"</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Tenga en cuenta que <code>write.csv</code> y <code>write.table</code> no pueden crear nuevos directorios en su computadora. Cada carpeta en la ruta del archivo debe existir antes de intentar guardar un archivo con ella.</p>
<p>El argumento <code>row.names</code> evita que R guarde los nombres de las filas del data frame como una columna en el archivo de texto sin formato. Es posible que haya notado que R nombra automáticamente cada fila en un data frame con un número. Por ejemplo, cada fila en nuestro data frame de póquer aparece con un número al lado:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>poquer</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="do">##    carta  palo valor</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="do">## 1     as picas    14</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="do">## 2    rey picas    13</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="do">## 3  reina picas    12</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a><span class="do">## 4   jota picas    11</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a><span class="do">## 5   diez picas    10</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Estos números de fila son útiles, pero pueden acumularse rápidamente si comienza a guardarlos. R agregará un nuevo conjunto de números de forma predeterminada cada vez que vuelva a leer el archivo. Evite esto configurando siempre <code>row.names = FALSE</code> cuando use una función de la familia <code>write</code>.</p>
</section>
<section id="comprimiendo-archivos" class="level3" data-number="D.3.6">
<h3 data-number="D.3.6" class="anchored" data-anchor-id="comprimiendo-archivos"><span class="header-section-number">D.3.6</span> Comprimiendo Archivos</h3>
<p>Para comprimir un archivo de texto sin formato, rodee el nombre del archivo o la ruta del archivo con la función <code>bzfile</code>, <code>gzfile</code> o <code>xzfile</code>. Por ejemplo:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(poquer, <span class="at">file =</span> <span class="fu">bzfile</span>(<span class="st">"data/poquer.csv.bz2"</span>), <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Cada una de estas funciones comprimirá la salida con un tipo diferente de formato de compresión, que se muestra en la Tabla <a href="#tbl-compression" class="quarto-xref">Tabla&nbsp;<span>D.3</span></a>.</p>
<div id="tbl-compression" class="quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-compression-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabla&nbsp;D.3: R viene con tres funciones auxiliares para comprimir archivos
</figcaption>
<div aria-describedby="tbl-compression-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="table">
<thead>
<tr class="header">
<th>Función</th>
<th>Tipo de compresión</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>bzfile</code></td>
<td>bzip2</td>
</tr>
<tr class="even">
<td><code>gzfile</code></td>
<td>gnu zip (gzip)</td>
</tr>
<tr class="odd">
<td><code>xzfile</code></td>
<td>compresión xz</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<p>Es una buena idea ajustar la extensión de su archivo para reflejar la compresión. Las funciones `read`` de R abrirán archivos de texto sin formato comprimidos en cualquiera de estos formatos. Por ejemplo, podría leer un archivo comprimido llamado <em>poquer.csv.bz2</em> con:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">read.csv</span>(<span class="st">"poquer.csv.bz2"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>o:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">read.csv</span>(<span class="st">"data/poquer.csv.bz2"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>dependiendo de dónde se encuentre el archivo.</p>
</section>
</section>
<section id="archivos-de-r" class="level2" data-number="D.4">
<h2 data-number="D.4" class="anchored" data-anchor-id="archivos-de-r"><span class="header-section-number">D.4</span> Archivos de R</h2>
<p>R proporciona dos formatos de archivo propios para almacenar datos, <em>.RDS</em> y <em>.RData</em>. Los archivos RDS pueden almacenar un único objeto R y los archivos RData pueden almacenar varios objetos R.</p>
<p>Puede abrir un archivo RDS con <code>readRDS</code>. Por ejemplo, si los datos de la escalera real se guardaron como <em>poquer.RDS</em>, podría abrirlos con:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>poquer <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">"poquer.RDS"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Abrir archivos RData es aún más fácil. Simplemente ejecute la función <code>load</code> con el archivo:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">"archivo.RData"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>No hay necesidad de asignar la salida a un objeto. Los objetos de R en su archivo RData se cargarán en su sesión de R con sus nombres originales. Los archivos RData pueden contener varios objetos de R, por lo que cargar uno puede leer varios objetos. <code>load</code> no le dice cuántos objetos está leyendo, ni cuáles son sus nombres, por lo que vale la pena saber un poco sobre el archivo RData antes de cargarlo.</p>
<p>En el peor de los casos, puede vigilar el panel de environment en RStudio mientras carga un archivo RData. Muestra todos los objetos que ha creado o cargado durante su sesión de R. Otro truco útil es poner paréntesis alrededor de tu comando de carga como <code>(load("poquer.RData"))</code>. Esto hará que R imprima los nombres de cada objeto que carga desde el archivo.</p>
<p>Tanto <code>readRDS</code> como <code>load</code> toman una ruta de archivo como su primer argumento, al igual que las otras funciones de lectura y escritura de R. Si su archivo está en su directorio de trabajo, la ruta del archivo será el nombre del archivo.</p>
<section id="guardar-archivos-de-r" class="level3" data-number="D.4.1">
<h3 data-number="D.4.1" class="anchored" data-anchor-id="guardar-archivos-de-r"><span class="header-section-number">D.4.1</span> Guardar archivos de R</h3>
<p>Puede guardar un objeto de R como un data frame como un archivo RData o un archivo RDS. Los archivos RData pueden almacenar varios objetos de R a la vez, pero los archivos RDS son la mejor opción porque fomentan el código reproducible.</p>
<p>Para guardar datos como un objeto RData, utilice la función <code>save</code>. Para guardar datos como un objeto RDS, use la función <code>saveRDS</code>. En cada caso, el primer argumento debe ser el nombre del objeto de R que desea guardar. Luego debe incluir un argumento de archivo que tenga el nombre del archivo o la ruta del archivo en el que desea guardar el conjunto de datos.</p>
<p>Por ejemplo, si tiene tres objetos R, <code>a</code>, <code>b</code> y <code>c</code>, puede guardarlos todos en el mismo archivo RData y luego volver a cargarlos en otra sesión de R:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>c <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(a, b, c, <span class="at">file =</span> <span class="st">"objetos.RData"</span>)</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">"objetos.RData"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Sin embargo, si olvida los nombres de sus objetos o le da su archivo a otra persona para que lo use, será difícil determinar qué había en el archivo, incluso después de que usted (o ellos) lo carguen. La interfaz de usuario para archivos RDS es mucho más clara. Puede guardar solo un objeto por archivo, y quien lo cargue puede decidir cómo quiere llamar a sus nuevos datos. Como beneficio adicional, no tiene que preocuparse de que <code>load</code> sobrescriba cualquier objeto de R que tenga el mismo nombre que los objetos que está cargando:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(a, <span class="at">file =</span> <span class="st">"objeto.RDS"</span>) </span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">"objeto.RDS"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Guardar sus datos como un archivo R ofrece algunas ventajas sobre guardar sus datos como un archivo de texto sin formato. R comprime automáticamente el archivo y también guardará los metadatos relacionados con R asociados con su objeto. Esto puede ser útil si sus datos contienen factores, fechas y horas o atributos de clase. No tendrá que volver a analizar esta información en R como lo haría si convirtiera todo en un archivo de texto.</p>
<p>Por otro lado, muchos otros programas no pueden leer los archivos de R, lo que los hace ineficientes para compartir. También pueden crear un problema para el almacenamiento a largo plazo si no cree que tendrá una copia de R cuando vuelva a abrir los archivos.</p>
</section>
</section>
<section id="hojas-de-cálculo-de-excel" class="level2" data-number="D.5">
<h2 data-number="D.5" class="anchored" data-anchor-id="hojas-de-cálculo-de-excel"><span class="header-section-number">D.5</span> Hojas de Cálculo de Excel</h2>
<p>Microsoft Excel es un popular programa de hoja de cálculo que se ha convertido casi en el estándar de la industria en el mundo de los negocios. Es muy probable que necesite trabajar con una hoja de cálculo de Excel en R al menos una vez en su carrera. Puede leer hojas de cálculo en R y también guardar datos de R como una hoja de cálculo de varias maneras.</p>
<section id="exportar-desde-excel" class="level3" data-number="D.5.1">
<h3 data-number="D.5.1" class="anchored" data-anchor-id="exportar-desde-excel"><span class="header-section-number">D.5.1</span> Exportar desde Excel</h3>
<p>El mejor método para mover datos de Excel a R es exportar la hoja de cálculo de Excel como un archivo <em>.csv</em> o <em>.txt</em>. R no solo podrá leer el archivo de texto, también lo hará cualquier otro software de análisis de datos. Los archivos de texto son la lengua franca del almacenamiento de datos.</p>
<p>Exportar los datos también resuelve otra dificultad. Excel usa formatos y metadatos patentados que no se transferirán fácilmente a R. Por ejemplo, un solo archivo de Excel puede incluir varias hojas de cálculo, cada una con sus propias columnas y macros. Cuando Excel exporta el archivo como <em>.csv</em> o <em>.txt</em>, se asegura de que este formato se transfiera a un archivo de texto sin formato de la forma más adecuada. Es posible que R no pueda administrar la conversión de manera tan eficiente.</p>
<p>Para exportar datos desde Excel, abra la hoja de cálculo de Excel y luego vaya a Guardar como. Luego elija CSV en el cuadro Guardar como tipo que aparece y guarde los archivos. Luego puede leer el archivo en R con la función <code>read.csv</code>.</p>
</section>
<section id="copiar-y-pegar" class="level3" data-number="D.5.2">
<h3 data-number="D.5.2" class="anchored" data-anchor-id="copiar-y-pegar"><span class="header-section-number">D.5.2</span> Copiar y pegar</h3>
<p>También puede copiar partes de una hoja de cálculo de Excel y pegarlas en R. Para hacer esto, abra la hoja de cálculo y seleccione las celdas que desea leer en R. Luego seleccione Editar &gt; Copiar en la barra de menú, o use un atajo de teclado, para copia las celdas a tu portapapeles.</p>
<p>En la mayoría de los sistemas operativos, puede leer los datos almacenados en su portapapeles en R con:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">read.table</span>(<span class="st">"clipboard"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>En Mac necesitarás usar:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">read.table</span>(<span class="fu">pipe</span>(<span class="st">"pbpaste"</span>))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Si las celdas contienen valores con espacios en ellos, esto interrumpirá <code>read.table</code>. Puede probar otra función `read`` (o simplemente exportar formalmente los datos de Excel) antes de leerlos en R.</p>
</section>
<section id="xlconnect" class="level3" data-number="D.5.3">
<h3 data-number="D.5.3" class="anchored" data-anchor-id="xlconnect"><span class="header-section-number">D.5.3</span> XLConnect</h3>
<p>Se han escrito muchos paquetes para ayudarlo a leer archivos de Excel directamente en R. Desafortunadamente, muchos de estos paquetes no funcionan en todos los sistemas operativos. Otros se han vuelto obsoletos debido al formato de archivo <em>.xlsx</em>. Un paquete que funciona en todos los sistemas de archivos (y recibe buenas críticas) es el paquete XLConnect. Para usarlo, deberá instalar y cargar el paquete:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"XLConnect"</span>)</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(XLConnect)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>XLConnect se basa en Java para ser independiente de la plataforma. Entonces, cuando abra XLConnect por primera vez, RStudio puede solicitarle que descargue un Java Runtime Environment si aún no tiene uno.</p>
</section>
<section id="lectura-de-hojas-de-cálculo" class="level3" data-number="D.5.4">
<h3 data-number="D.5.4" class="anchored" data-anchor-id="lectura-de-hojas-de-cálculo"><span class="header-section-number">D.5.4</span> Lectura de Hojas de Cálculo</h3>
<p>Puede usar XLConnect para leer en una hoja de cálculo de Excel con un proceso de uno o dos pasos. Comenzaré con el proceso de dos pasos. Primero, cargue un libro de trabajo de Excel con <code>loadWorkbook</code>. <code>loadWorkbook</code> puede cargar archivos <em>.xls</em> y <em>.xlsx</em>. Toma un argumento: la ruta del archivo a su libro de Excel (este será el nombre del libro de trabajo si está guardado en su directorio de trabajo):</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>lt <span class="ot">&lt;-</span> <span class="fu">loadWorkbook</span>(<span class="st">"archivo.xlsx"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>A continuación, lea una hoja de cálculo del libro de trabajo con <code>readWorksheet</code>, que toma varios argumentos. El primer argumento debe ser un objeto de libro de trabajo creado con <code>loadWorkbook</code>. El siguiente argumento, <code>sheet</code>, debe ser el nombre de la hoja de cálculo en el libro de trabajo que le gustaría leer en R. Este será el nombre que aparece en la pestaña inferior de la hoja de cálculo. También puede darle a <code>sheet</code> un número, que especifica la hoja en la que desea leer (uno para la primera hoja, dos para la segunda, y así sucesivamente).</p>
<p><code>readWorksheet</code> luego toma cuatro argumentos que especifican un cuadro delimitador de celdas para leer: <code>startRow</code>, <code>startCol</code>, <code>endRow</code> y <code>endCol</code>. Use <code>startRow</code> y <code>startCol</code> para describir la celda en la esquina superior izquierda del cuadro delimitador de celdas que desea leer. Use <code>endRow</code> y <code>endCol</code> para especificar la celda en la esquina inferior derecha de el cuadro delimitador. Cada uno de estos argumentos toma un número. Si no proporciona argumentos delimitadores, <code>readWorksheet</code> leerá en la región rectangular de celdas en la hoja de cálculo que parece contener datos. <code>readWorksheet</code> supondrá que esta región contiene una fila de encabezado, pero puede decir lo contrario con <code>header = FALSE</code>.</p>
<p>Entonces, para leer en la primera hoja de trabajo de <code>lt</code>, podría usar:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>hoja1 <span class="ot">&lt;-</span> <span class="fu">readWorksheet</span>(lt, <span class="at">sheet =</span> <span class="dv">1</span>, <span class="at">startRow =</span> <span class="dv">0</span>, <span class="at">startCol =</span> <span class="dv">0</span>, </span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">endRow =</span> <span class="dv">100</span>, <span class="at">endCol =</span> <span class="dv">3</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>R guardará la salida como un data frame. Todos los argumentos en <code>readWorkbook</code> excepto el primero están vectorizados, por lo que puede usarlo para leer varias hojas del mismo libro de trabajo a la vez (o varias regiones de celdas de una sola hoja de trabajo). En este caso, <code>readWorksheet</code> devolverá una lista de data frames.</p>
<p>Puede combinar estos dos pasos con <code>readWorksheetFromFile</code>. Toma el argumento del archivo de <code>loadWorkbook</code> y lo combina con los argumentos de <code>readWorksheet</code>. Puede usarlo para leer una o más hojas directamente desde un archivo de Excel:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>hoja1 <span class="ot">&lt;-</span> <span class="fu">readWorksheetFromFile</span>(<span class="st">"archivo.xlsx"</span>, <span class="at">sheet =</span> <span class="dv">1</span>, <span class="at">startRow =</span> <span class="dv">0</span>, </span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">startCol =</span> <span class="dv">0</span>, <span class="at">endRow =</span> <span class="dv">100</span>, <span class="at">endCol =</span> <span class="dv">3</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="escribir-hojas-de-cálculo" class="level3" data-number="D.5.5">
<h3 data-number="D.5.5" class="anchored" data-anchor-id="escribir-hojas-de-cálculo"><span class="header-section-number">D.5.5</span> Escribir Hojas de Cálculo</h3>
<p>Escribir en una hoja de cálculo de Excel es un proceso de cuatro pasos. Primero, debe configurar un objeto de libro de trabajo con <code>loadWorkbook</code>. Esto funciona igual que antes, excepto que si no está utilizando un archivo de Excel existente, debe agregar el argumento <code>create = TRUE</code>. XLConnect creará un libro de trabajo en blanco. Cuando lo guarde, XLConnect lo escribirá en la ubicación del archivo que especificó aquí con <code>loadWorkbook</code>:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>lt <span class="ot">&lt;-</span> <span class="fu">loadWorkbook</span>(<span class="st">"archivo.xlsx"</span>, <span class="at">create =</span> <span class="cn">TRUE</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>A continuación, debe crear una hoja de trabajo dentro de su objeto de libro de trabajo con <code>createSheet</code>. Dile a <code>createSheet</code> en qué libro colocar la hoja y cuál usar para la hoja.</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">createSheet</span>(lt, <span class="st">"Hoja 1"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Luego puede guardar su data frame o matriz en la hoja con <code>writeWorksheet</code>. El primer argumento de <code>writeWorksheet</code>, <code>object</code>, es el libro de trabajo para escribir los datos. El segundo argumento, <code>data</code>, son los datos a escribir. El tercer argumento, <code>sheet</code>, es el nombre de la hoja en la que escribirlo. Los siguientes dos argumentos, <code>startRow</code> y <code>startCol</code>, le indican a R en qué parte de la hoja de cálculo colocar la celda superior izquierda de los nuevos datos. Cada uno de estos argumentos tiene un valor predeterminado de 1. Finalmente, puede usar <code>header</code> para decirle a R si los nombres de sus columnas deben escribirse con los datos:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">writeWorksheet</span>(lt, <span class="at">data =</span> poquer, <span class="at">sheet =</span> <span class="st">"Hoja 1"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Una vez que haya terminado de agregar hojas y datos a su libro de trabajo, puede guardarlo ejecutando <code>saveWorkbook</code> en el objeto del libro de trabajo. R guardará el libro de trabajo con el nombre de archivo o la ruta que proporcionó en <code>loadWorkbook</code>. Si esto conduce a un archivo de Excel existente, R lo sobrescribirá. Si conduce a un nuevo archivo, R lo creará.</p>
<p>También puede colapsar estos pasos en una sola llamada con <code>writeWorksheetToFile</code>, así:</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">writeWorksheetToFile</span>(<span class="st">"archivo.xlsx"</span>, <span class="at">data =</span> poquer, <span class="at">sheet =</span> <span class="st">"Hoja 1"</span>, </span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">startRow =</span> <span class="dv">1</span>, <span class="at">startCol =</span> <span class="dv">1</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>El paquete XLConnect también le permite hacer cosas más avanzadas con las hojas de cálculo de Excel, como escribir en una región con nombre en una hoja de cálculo, trabajar con fórmulas y asignar estilos a las celdas. Puede leer acerca de estas funciones en la viñeta de XLConnect, a la que se puede acceder cargando XLConnect y luego ejecutando:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">vignette</span>(<span class="st">"XLConnect"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="cargar-archivos-desde-otros-programas" class="level2" data-number="D.6">
<h2 data-number="D.6" class="anchored" data-anchor-id="cargar-archivos-desde-otros-programas"><span class="header-section-number">D.6</span> Cargar Archivos desde Otros Programas</h2>
<p>Debe seguir el mismo consejo que le di para los archivos de Excel siempre que desee trabajar con formatos de archivo nativos de otros programas: abra el archivo en el programa original y exporte los datos como un archivo de texto sin formato, generalmente un CSV. Esto garantizará la transcripción más fiel de los datos en el archivo y, por lo general, le brindará la mayor cantidad de opciones para personalizar la forma en que se transcriben los datos.</p>
<p>A veces, sin embargo, puede adquirir un archivo pero no el programa del que procede. Como resultado, no podrá abrir el archivo en su programa nativo y exportarlo como un archivo de texto. En este caso, puede usar una de las funciones en Tabla <a href="#tbl-others" class="quarto-xref">Tabla&nbsp;<span>D.4</span></a> para abrir el archivo. La mayoría de estas funciones vienen en el paquete <code>foreign</code> de R. Cada uno intenta leer en un formato de archivo diferente con la menor cantidad de contratiempos posible.</p>
<div id="tbl-others" class="quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-others-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabla&nbsp;D.4: Varias funciones intentarán leer los tipos de archivo de otros programas de análisis de datos
</figcaption>
<div aria-describedby="tbl-others-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="table">
<thead>
<tr class="header">
<th>Formato de archivo</th>
<th>Función</th>
<th>Paquete</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>ERSI ArcGIS</td>
<td><code>read.shapefile</code></td>
<td>shapefiles</td>
</tr>
<tr class="even">
<td>Matlab</td>
<td><code>readMat</code></td>
<td>R.matlab</td>
</tr>
<tr class="odd">
<td>minitab</td>
<td><code>read.mtp</code></td>
<td>foreign</td>
</tr>
<tr class="even">
<td>SAS (conjunto de datos permanente)</td>
<td><code>read.ssd</code></td>
<td>foreign</td>
</tr>
<tr class="odd">
<td>SAS (formato XPORT)</td>
<td><code>read.xport</code></td>
<td>foreign</td>
</tr>
<tr class="even">
<td>SPSS</td>
<td><code>read.spss</code></td>
<td>foreign</td>
</tr>
<tr class="odd">
<td>Stata</td>
<td><code>read.dta</code></td>
<td>foreign</td>
</tr>
<tr class="even">
<td>Systat</td>
<td><code>read.systat</code></td>
<td>foreign</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<section id="conexión-a-bases-de-datos" class="level3" data-number="D.6.1">
<h3 data-number="D.6.1" class="anchored" data-anchor-id="conexión-a-bases-de-datos"><span class="header-section-number">D.6.1</span> Conexión a bases de datos</h3>
<p>También puede usar R para conectarse a una base de datos y leer datos.</p>
<p>Utilice el paquete RODBC para conectarse a bases de datos a través de una conexión ODBC.</p>
<p>Utilice el paquete DBI para conectarse a bases de datos a través de controladores individuales. El paquete DBI proporciona una sintaxis común para trabajar con diferentes bases de datos. Tendrá que descargar un paquete específico de base de datos para usarlo junto con DBI. Estos paquetes proporcionan la API para los controladores nativos de diferentes programas de bases de datos. Para MySQL use RMySQL, para SQLite use RSQLite, para Oracle use ROracle, para PostgreSQL use RPostgreSQL y para las bases de datos que usan controladores basados en la API Java Database Connectivity (JDBC) use RJDBC. Una vez que haya cargado el paquete de controladores adecuado, puede utilizar los comandos proporcionados por DBI para acceder a su base de datos.</p>
</section>
</section>
<section id="actualización" class="level2" data-number="D.7">
<h2 data-number="D.7" class="anchored" data-anchor-id="actualización"><span class="header-section-number">D.7</span> Actualización</h2>
<p>En versiones modernas de RStudio es simple cargar archivos de Excel, SPSS, SAS y Stata usando el asistente de importación de RStudio. Para poder accerder a estas opciones se debe instalar el paquete <code>readxl</code> para los archivos de Excel y el paquete <code>haven</code> para el resto. Para realizar la operación es tan simple como dar click en el botón Import Dataset &gt; “Opción desead”(“From Excel”, “From SPSS”, “From SAS” o “From Stata”). Esto abrirá el asistente de importación de RStudio que permite visualizar el archivo a importar.</p>
<p>Con el uso de los paquetes <code>xlsx</code> y <code>haven</code> se facilita también la forma de escribir y exportar archivos con dichas extenciones como se ve en la Tabla <a href="#tbl-actua" class="quarto-xref">Tabla&nbsp;<span>D.5</span></a>.</p>
<div id="tbl-actua" class="quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-actua-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabla&nbsp;D.5: Varias funciones para escribir y guardar archivos en distintos formatos
</figcaption>
<div aria-describedby="tbl-actua-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="table">
<thead>
<tr class="header">
<th>Formato de archivo</th>
<th>Función</th>
<th>Paquete</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Excel</td>
<td><code>xlsx</code></td>
<td>shapefiles</td>
</tr>
<tr class="even">
<td>SPSS</td>
<td><code>write_sav</code></td>
<td>haven</td>
</tr>
<tr class="odd">
<td>SAS (conjunto de datos permanente)</td>
<td><code>write_sas</code></td>
<td>haven</td>
</tr>
<tr class="even">
<td>SAS (formato XPORT)</td>
<td><code>write_xpt</code></td>
<td>haven</td>
</tr>
<tr class="odd">
<td>Stata</td>
<td><code>write_dta</code></td>
<td>haven</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>


</section>

</main> <!-- /main -->

<script>

  // Chapter name
  const currentChapterFile = window.location.pathname.split('/').pop().replace('.html', '');

  //Deffining urls
  const originalURL = "https://github.com/rstudio-education/hopr";
  const translationURL = "https://github.com/davidrsch/hopres";

  //Deffining texts
  const edit_text = "Editar esta página";
  const issue_text = "Informar de un problema"

  //Deffining git_i
  const git_i = '<div><i class="bi bi-github"></i></div>';

  // Adding TOC if not exist
  const sidebarmargin = document.getElementById('quarto-margin-sidebar');
  const buscar_TOC = document.getElementById('TOC');

  if (!buscar_TOC) {
    const crear_TOC = document.createElement('nav');
    crear_TOC.id = 'TOC';
    crear_TOC.role = "doc-toc";
    crear_TOC.class = "toc-active";
    sidebarmargin.appendChild(crear_TOC);
  }


  // Adding original github actions
  const TOC = document.getElementById('TOC');
  const originalga = document.createElement('h2');
  originalga.textContent = "Original";
  const toc_act_O = document.createElement('div');
  toc_act_O.className = 'toc-actions';
  toc_act_O.id = 'toc-act-O';
  const act_link_O = document.createElement('div');
  act_link_O.className='action-links';
  act_link_O.id='act-link-O';
  const edit_issue_O ='<p><a href="'+originalURL+'/edit/master/'+currentChapterFile+'.rmd" class="toc-action">'+edit_text+'</p><p><a href="'+originalURL+'/issues/new" class="toc-action">'+issue_text+'</p>';


  TOC.appendChild(originalga);
  TOC.appendChild(toc_act_O);
  toc_act_O.innerHTML += git_i;
  toc_act_O.appendChild(act_link_O);
  act_link_O.innerHTML += edit_issue_O;

  // Adding translation github actions
  const translationga = document.createElement('h2');
  translationga.textContent = "Traducción";
  const toc_act_T = document.createElement('div');
  toc_act_T.className = 'toc-actions';
  toc_act_T.id = 'toc-act-T';
  const act_link_T = document.createElement('div');
  act_link_T.className='action-links';
  act_link_T.id='act-link-T';
  const edit_issue_T ='<p><a href="'+translationURL+'/edit/main/'+currentChapterFile+'.qmd" class="toc-action">'+edit_text+'</p><p><a href="'+translationURL+'/issues/new" class="toc-action">'+issue_text+'</p>';


  TOC.appendChild(translationga);
  TOC.appendChild(toc_act_T);
  toc_act_T.innerHTML += git_i;
  toc_act_T.appendChild(act_link_T);
  act_link_T.innerHTML += edit_issue_T;


</script>

<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copiado");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copiado");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./a3-updating.html" class="pagination-link" aria-label="Actualizando R y sus Paquetes">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">C</span>&nbsp; <span class="chapter-title">Actualizando R y sus Paquetes</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./a5-debug.html" class="pagination-link" aria-label="Depuración de Código de R">
        <span class="nav-page-text"><span class="chapter-number">E</span>&nbsp; <span class="chapter-title">Depuración de Código de R</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Programación práctica con R fue escrito por Garrett Grolemund.</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
<p>Este libro fue creado usando <a href="https://quarto.org/">Quarto</a>.</p>
</div>
  </div>
</footer>




</body></html>